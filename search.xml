<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MIT6.824</title>
      <link href="/posts/1906f3d9/"/>
      <url>/posts/1906f3d9/</url>
      
        <content type="html"><![CDATA[<h1 id="Lecture01-Introduce"><a href="#Lecture01-Introduce" class="headerlink" title="Lecture01 - Introduce"></a>Lecture01 - Introduce</h1><h2 id="MapReduceè®ºæ–‡"><a href="#MapReduceè®ºæ–‡" class="headerlink" title="MapReduceè®ºæ–‡"></a>MapReduceè®ºæ–‡</h2><p><img src="/../../../img/Pasted%20image%2020230929130402.png"></p><p>è¿‡ç¨‹ï¼š</p><ul><li>å°†ç”¨æˆ·è¾“å…¥çš„æ–‡ä»¶åˆ†æˆMå—ï¼Œæ¯å—å¤§å°ä¸º16MB-64MBï¼ˆå¯ç”±ç”¨æˆ·æŒ‡å®šï¼‰ã€‚</li><li>ç”±MasterèŠ‚ç‚¹åˆ†é…å·¥ä½œç»™å…¶ä»–WorkerèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬Mä¸ªmapä»»åŠ¡å’ŒRä¸ªreduceä»»åŠ¡ã€‚</li><li>è¢«åˆ†é…äº†mapä»»åŠ¡çš„èŠ‚ç‚¹è§£ææ•°æ®ï¼Œç”Ÿæˆ&lt;key,value&gt;ç„¶åæ”¾å…¥å†…å­˜ç¼“å†²åŒºã€‚</li><li>è¢«ç¼“å†²çš„é”®å€¼å¯¹å‘¨æœŸæ€§åœ°å†™å…¥ç£ç›˜ï¼Œç„¶åè¢«åˆ’åˆ†ä¸ºRä¸ªå—ï¼ˆHash(key) mod Rï¼‰ï¼Œä»–ä»¬åœ¨ç£ç›˜ä¸Šçš„ä½ç½®è¢«å‘é€ç»™Master,ç„¶åMasterè½¬å‘ç»™WorkerèŠ‚ç‚¹è¿›è¡Œreduceä»»åŠ¡ã€‚</li><li>å½“èŠ‚ç‚¹æ”¶åˆ°masterå…³äºè¿™äº›ä½ç½®çš„é€šçŸ¥æ—¶ï¼Œä»–ä¼šä½¿ç”¨RPCè¯»å–ç£ç›˜ä¸­çš„æ•°æ®ï¼Œå½“è¯»å–å®Œæ‰€æœ‰ä¸­é—´æ•°æ®æ—¶ï¼Œè¿›è¡Œæ’åºæ“ä½œæ¥ä¿è¯ç›¸åŒçš„é”®ç»„åˆåœ¨ä¸€èµ·ã€‚</li><li>Reduceå‡½æ•°å¯¹å·²æ’åºçš„ä¸­é—´æ•°æ®è¿›è¡Œè¿­ä»£ï¼Œå…¶è¾“å‡ºé™„åŠ åˆ°Reduceåˆ†åŒºçš„outputæ–‡ä»¶ä¸­ã€‚</li><li>å½“æ‰€æœ‰mapå’Œreduceä»»åŠ¡è¿è¡Œå®Œæ¯•åï¼Œè¿”å›è‡³ç”¨æˆ·ä»£ç ï¼Œæ•´ä¸ªè¿‡ç¨‹ç»“æŸã€‚</li></ul><h1 id="Lab-1-MapReduce"><a href="#Lab-1-MapReduce" class="headerlink" title="Lab 1 - MapReduce"></a>Lab 1 - MapReduce</h1>]]></content>
      
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥ç¨‹ç¡•å£«æ•°å­¦</title>
      <link href="/posts/806cd970/"/>
      <url>/posts/806cd970/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å¼•è®º"><a href="#1-å¼•è®º" class="headerlink" title="1.å¼•è®º"></a>1.å¼•è®º</h1><h1 id="2-çº¿æ€§ä»£æ•°æ–¹ç¨‹ç»„çš„ç›´æ¥è§£æ³•"><a href="#2-çº¿æ€§ä»£æ•°æ–¹ç¨‹ç»„çš„ç›´æ¥è§£æ³•" class="headerlink" title="2.çº¿æ€§ä»£æ•°æ–¹ç¨‹ç»„çš„ç›´æ¥è§£æ³•"></a>2.çº¿æ€§ä»£æ•°æ–¹ç¨‹ç»„çš„ç›´æ¥è§£æ³•</h1><h2 id="2-2Gaussæ¶ˆå»æ³•"><a href="#2-2Gaussæ¶ˆå»æ³•" class="headerlink" title="2.2Gaussæ¶ˆå»æ³•"></a>2.2Gaussæ¶ˆå»æ³•</h2>]]></content>
      
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+github+Obsidianæ­å»ºä¸ªäººåšå®¢å¹³å°</title>
      <link href="/posts/26e99575/"/>
      <url>/posts/26e99575/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”±äºæœ¬åœ°ä½¿ç”¨obsidianå¯¹ç¬”è®°è¿›è¡Œç¼–è¾‘å’Œåˆ†ç±»æ—¶ï¼Œå¤šç«¯åŒæ­¥ç¹çï¼Œæ— æ³•åœ¨çº¿æŸ¥çœ‹ã€‚å› æ­¤é€‰ç”¨Hexoåšå®¢æ¡†æ¶+Githubå»ºç«™ï¼Œæ­å»ºä¸€ä¸ªè‡ªå·±çš„ä¸ªäººåšå®¢é¡µé¢ï¼ŒåŒæ—¶é€šè¿‡é…ç½®Obsidian,ä½¿å¾—åœ¨æœ¬åœ°ä¹Ÿå¯ä»¥ä½¿ç”¨Obsidianè¿›è¡Œç®¡ç†å’Œç¬”è®°çš„ç¼–è¾‘ã€‚</p></blockquote><blockquote><p>(å…¶å®æ˜¯ç¾¡æ…•åˆ«äººç‚«é…·çš„ä¸ªäººåšå®¢Ã—)ğŸ˜„ğŸ˜„</p></blockquote><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>åšå®¢é“¾æ¥ï¼š<a href="https://leggasai.github.io/">LegGasaiâ€™s CSLearning</a></p><h1 id="ä¸€-æ–°å»ºGithubä»“åº“"><a href="#ä¸€-æ–°å»ºGithubä»“åº“" class="headerlink" title="ä¸€.æ–°å»ºGithubä»“åº“"></a>ä¸€.æ–°å»ºGithubä»“åº“</h1><h2 id="1-åˆ›å»ºåŒåä»“åº“"><a href="#1-åˆ›å»ºåŒåä»“åº“" class="headerlink" title="1.åˆ›å»ºåŒåä»“åº“"></a>1.åˆ›å»ºåŒåä»“åº“</h2><blockquote><p>æ³¨æ„å›¾ä¸­<code>Repository name</code>å¿…é¡»ä¸º<code>Owner.github.io</code>ï¼Œè¿™æ ·githubæ‰èƒ½æ­£ç¡®è¯†åˆ«ä¸º<strong>github pages</strong><br><img src="/../../img/Pasted%20image%2020230924160911.png"></p></blockquote><h1 id="äºŒ-åˆ›å»ºHexoé¡¹ç›®"><a href="#äºŒ-åˆ›å»ºHexoé¡¹ç›®" class="headerlink" title="äºŒ.åˆ›å»ºHexoé¡¹ç›®"></a>äºŒ.åˆ›å»ºHexoé¡¹ç›®</h1><blockquote><p>Hexoæ˜¯ä¸€ä¸ª<strong>å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶</strong>ï¼Œä¸”å¼€æºç¤¾åŒºæä¾›äº†å¤§é‡çš„ç¬¬ä¸‰æ–¹ä¸»é¢˜æ ·å¼ï¼Œå¯ä¸€é”®ç”Ÿæˆåä¸½çš„ä¸ªäººåšå®¢ç½‘é¡µã€‚å®˜ç½‘é“¾æ¥<a href="https://hexo.io/zh-cn/">Hexo</a></p></blockquote><h2 id="1-å®‰è£…Hexo"><a href="#1-å®‰è£…Hexo" class="headerlink" title="1.å®‰è£…Hexo"></a>1.å®‰è£…Hexo</h2><blockquote><p>ç¡®ä¿å·²ç»å®‰è£…äº†å¦‚ä¸‹å·¥å…·</p></blockquote><ul><li>Node.js (Node.js ç‰ˆæœ¬éœ€ä¸ä½äº 10.13ï¼Œå»ºè®®ä½¿ç”¨ Node.js 12.0 åŠä»¥ä¸Šç‰ˆæœ¬)</li><li>Git</li></ul><p>ç„¶åé€šè¿‡npmå®‰è£…Hexoè„šæ‰‹æ¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install -g hexo-cli</span></span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œå»ºç«™ï¼ˆåˆ›å»ºHexoé¡¹ç›®ï¼‰,å°†<code>&lt;folder&gt;</code>æ›¿æ¢æˆä½ çš„æ–‡ä»¶å¤¹å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo init &lt;folder&gt;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> &lt;folder&gt;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.  </span><br><span class="line">â”œâ”€â”€ _config.yml  </span><br><span class="line">â”œâ”€â”€ package.json  </span><br><span class="line">â”œâ”€â”€ scaffolds  </span><br><span class="line">â”œâ”€â”€ source  </span><br><span class="line">|   â”œâ”€â”€ _drafts  </span><br><span class="line">|   â””â”€â”€ _posts  </span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure><blockquote><p>ä¹‹åä¸»è¦ä¼šç”¨åˆ°_config.ymlæ–‡ä»¶å’Œsourceæ–‡ä»¶å¤¹</p></blockquote><h2 id="2-ä¿®æ”¹é…ç½®"><a href="#2-ä¿®æ”¹é…ç½®" class="headerlink" title="2.ä¿®æ”¹é…ç½®"></a>2.ä¿®æ”¹é…ç½®</h2><p>ä¿®æ”¹_config.ymlä¸­çš„é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site  </span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&lt;your</span> <span class="string">blog</span> <span class="string">name&gt;</span>  </span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;&#x27;</span>  </span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;&#x27;</span>  </span><br><span class="line"><span class="attr">keywords:</span>  </span><br><span class="line"><span class="attr">author:</span> <span class="string">&lt;your</span> <span class="string">name&gt;</span> </span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span> <span class="comment">#æ”¹æˆä¸­æ–‡  </span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br></pre></td></tr></table></figure><p>å„å‚æ•°è¯´æ˜å¦‚ä¸‹</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>title</code></td><td>ç½‘ç«™æ ‡é¢˜</td></tr><tr><td><code>subtitle</code></td><td>ç½‘ç«™å‰¯æ ‡é¢˜</td></tr><tr><td><code>description</code></td><td>ç½‘ç«™æè¿°</td></tr><tr><td><code>keywords</code></td><td>ç½‘ç«™çš„å…³é”®è¯ã€‚æ”¯æŒå¤šä¸ªå…³é”®è¯ã€‚</td></tr><tr><td><code>author</code></td><td>æ‚¨çš„åå­—</td></tr><tr><td><code>language</code></td><td>ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€ã€‚å¯¹äºç®€ä½“ä¸­æ–‡ç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨ä¸åŒçš„ä¸»é¢˜å¯èƒ½éœ€è¦è®¾ç½®æˆä¸åŒçš„å€¼ï¼Œè¯·å‚è€ƒä½ çš„ä¸»é¢˜çš„æ–‡æ¡£è‡ªè¡Œè®¾ç½®ï¼Œå¸¸è§çš„æœ‰Â <code>zh-Hans</code>å’ŒÂ <code>zh-CN</code>ã€‚</td></tr><tr><td><code>timezone</code></td><td>ç½‘ç«™æ—¶åŒºã€‚Hexo é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚è¯·å‚è€ƒÂ <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">æ—¶åŒºåˆ—è¡¨</a>Â è¿›è¡Œè®¾ç½®ï¼Œå¦‚Â <code>America/New_York</code>,Â <code>Japan</code>, å’ŒÂ <code>UTC</code>Â ã€‚ä¸€èˆ¬çš„ï¼Œå¯¹äºä¸­å›½å¤§é™†åœ°åŒºå¯ä»¥ä½¿ç”¨Â <code>Asia/Shanghai</code>ã€‚</td></tr></tbody></table><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://leggasai.github.io/</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–é…ç½®å¯ä»¥å…ˆä¸ç”¨æ”¹ï¼Œåç»­é…ç½®Hexoä¸»é¢˜çš„æ—¶å€™å†å¯¹åº”ä¿®æ”¹</p><h1 id="ä¸‰-é…ç½®Hexoä¸»é¢˜-Butterflyä¸ºä¾‹"><a href="#ä¸‰-é…ç½®Hexoä¸»é¢˜-Butterflyä¸ºä¾‹" class="headerlink" title="ä¸‰.é…ç½®Hexoä¸»é¢˜(Butterflyä¸ºä¾‹)"></a>ä¸‰.é…ç½®Hexoä¸»é¢˜(Butterflyä¸ºä¾‹)</h1><blockquote><p>ç”±äºé»˜è®¤çš„ä¸»é¢˜æ¯”è¾ƒç®€é™‹ï¼Œå¥½åœ¨ç¤¾åŒºæä¾›äº†å¤§é‡çš„ç°æˆçš„Hexoä¸»é¢˜æ¡†æ¶ä¾›æˆ‘ä»¬é€‰æ‹©ï¼Œç½‘é¡µé“¾æ¥ï¼š<a href="https://hexo.io/themes/">Themes | Hexo</a></p></blockquote><h2 id="1-é€‰æ‹©ä¸»é¢˜"><a href="#1-é€‰æ‹©ä¸»é¢˜" class="headerlink" title="1.é€‰æ‹©ä¸»é¢˜"></a>1.é€‰æ‹©ä¸»é¢˜</h2><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å’Œå®¡ç¾ï¼Œé€‰æ‹©ä¸€æ¬¾è‡ªå·±å–œçˆ±çš„ä¸»é¢˜ï¼Œè¿™è¾¹ç¬”è€…é€‰æ‹©çš„æ˜¯æ¯”è¾ƒçƒ­é—¨çš„ä¸€æ¬¾Butterflyä¸»é¢˜ã€‚<br><img src="/../../img/Pasted%20image%2020230924163004.png"></p><h2 id="2-å®‰è£…å’Œé…ç½®"><a href="#2-å®‰è£…å’Œé…ç½®" class="headerlink" title="2.å®‰è£…å’Œé…ç½®"></a>2.å®‰è£…å’Œé…ç½®</h2><blockquote><p>é€‰æ‹©ä¸»é¢˜åï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¯¥ä¸»é¢˜çš„å®˜æ–¹æ–‡æ¡£ï¼Œæ¥è¿›è¡Œé…ç½®ã€‚ä¾‹å¦‚Butterflyçš„å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ï¼š</p></blockquote><ul><li>githubé“¾æ¥ï¼š<a href="https://github.com/jerryc127/hexo-theme-butterfly">ğŸ¦‹ A Hexo Theme: Butterfly (github.com)</a></li><li>ä½¿ç”¨æ–‡æ¡£ï¼š<a href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£æ–‡æª”(ä¸€) å¿«é€Ÿé–‹å§‹ | Butterfly</a></li></ul><p>é¦–å…ˆå®‰è£…ä¸»é¢˜,åœ¨ä½ çš„<code>Hexoæ ¹ç›®å½•</code>ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><p>ç„¶ååº”ç”¨ä¸»é¢˜ï¼Œä¿®æ”¹<code>Hexoæ ¹ç›®å½•ä¸‹çš„/_config.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions  </span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/  </span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/  </span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><p>æ¥ç€å®‰è£…å¿…è¦çš„æ¸²æŸ“å™¨æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å‡å°‘å‡çº§ä¸»é¢˜åå¸¦æ¥çš„ä¸ä¾¿ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼ˆå»ºè®®ï¼Œå¯ä»¥ä¸åšï¼‰ã€‚</p><p>åœ¨ hexo çš„æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ _config.butterfly.ymlï¼Œå¹¶æŠŠä¸»é¢˜ç›®å½•çš„ _config.yml å†…å®¹å¤åˆ¶åˆ° _config.butterfly.yml å»ã€‚( æ³¨æ„: å¤åˆ¶çš„æ˜¯ä¸»é¢˜çš„ _config.yml ï¼Œè€Œä¸æ˜¯ hexo çš„ _config.yml)<br><img src="/../../img/Pasted%20image%2020230924163827.png"></p><blockquote><p>Hexoä¼šè‡ªåŠ¨åˆå¹¶ä¸»é¢˜ä¸­çš„<code>_config.yml</code> å’Œ<code>_config.butterfly.yml</code> é‡Œçš„é…ç½®ï¼Œå¦‚æœå­˜åœ¨åŒåé…ç½®ï¼Œä¼šä½¿ç”¨ <code>_config.butterfly.yml</code> çš„é…ç½®ï¼Œå…¶ä¼˜å…ˆåº¦è¾ƒé«˜ã€‚</p></blockquote><p>ç„¶åæ ¹æ®å®˜æ–¹æ–‡æ¡£å’Œè‡ªå·±éœ€æ±‚ï¼Œè¿›è¡Œé¡µé¢çš„å®šåˆ¶å³å¯ï¼Œå‚è€ƒæ–‡æ¡£å¦‚ä¸‹ï¼š</p><ul><li><a href="https://butterfly.js.org/posts/4aa8abbe/">Butterfly å®‰è£æ–‡æª”(ä¸‰) ä¸»é¡Œé…ç½®-1 | Butterfly</a></li><li><a href="https://butterfly.js.org/posts/ceeb73f/">Butterfly å®‰è£æ–‡æª”(å››) ä¸»é¡Œé…ç½®-2 | Butterfly</a></li></ul><h1 id="å››-é…ç½®Obsidian"><a href="#å››-é…ç½®Obsidian" class="headerlink" title="å››.é…ç½®Obsidian"></a>å››.é…ç½®Obsidian</h1><blockquote><p>ä¸ºäº†è·å¾—åœ¨æœ¬åœ°ç®¡ç†å’Œç»„ç»‡æ‰€æœ‰ç¬”è®°çš„è‰¯å¥½ä½“éªŒï¼Œæ¨èæœ¬åœ°ä½¿ç”¨Obsidianè¿›è¡Œç¼–è¾‘ã€‚ä½†Obsidianå’ŒHexoéœ€è¦ä¸€äº›é¢å¤–çš„é…ç½®ã€‚</p></blockquote><p>é¦–å…ˆç”¨Obsidianæ‰“å¼€Hexoçš„æ ¹ç›®å½•<br><img src="/../../img/Pasted%20image%2020230924170303.png"></p><p>ä¿®æ”¹.gitignoreæ–‡ä»¶ï¼Œå¿½ç•¥äº§ç”Ÿçš„.obsidiané…ç½®ä¿¡æ¯ã€‚ä¿®æ”¹å¦‚ä¸‹ï¼Œä¸»è¦æ˜¯æ·»åŠ äº†æœ€åä¸€è¡Œ<code>.obsidian/workspace</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store  </span><br><span class="line">Thumbs.db  </span><br><span class="line">db.json  </span><br><span class="line">*.log  </span><br><span class="line">node_modules/  </span><br><span class="line">public/  </span><br><span class="line">.deploy*/  </span><br><span class="line">_multiconfig.yml  </span><br><span class="line">.obsidian/workspace</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹obsidiané…ç½®"><a href="#ä¿®æ”¹obsidiané…ç½®" class="headerlink" title="ä¿®æ”¹obsidiané…ç½®"></a>ä¿®æ”¹obsidiané…ç½®</h2><p><img src="/../../img/Pasted%20image%2020230924170444.png"></p><ul><li>ä¿®æ”¹æ–°å»ºç¬”è®°å­˜æ”¾çš„ä½ç½®ï¼Œå› ä¸ºHexoé»˜è®¤æ˜¯æ”¾åœ¨<code>source/_posts</code>æ–‡ä»¶å¤¹ä¸‹çš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸ä¹‹ä¿æŒä¸€è‡´ã€‚</li><li>å…³é—­Wikié“¾æ¥ï¼ŒHexoä¸æ”¯æŒï¼Œå¦‚æœä¸å…³é—­åœ¨æœ¬åœ°obsidianæ˜¯æœ‰æ•ˆæœçš„ï¼Œéƒ¨ç½²è‡³ç½‘ç«™åï¼Œå›¾ç‰‡å’Œæ–‡ä»¶ä¼šåŠ è½½ä¸å‡ºã€‚</li><li>ä¿®æ”¹é™„ä»¶é»˜è®¤å­˜æ”¾ä½ç½®ï¼Œåœ¨<code>source</code>æ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ–°å»ºä¸€ä¸ªimgæˆ–å…¶ä»–åå­—çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾ç¬”è®°ä¸­çš„å›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œè§†é¢‘ç­‰</li><li>æ·»åŠ å¿½ç•¥æ–‡ä»¶ï¼Œå°†Hexoé¡¹ç›®é™¤sourceæ–‡ä»¶å¤¹å¤–å…¶ä»–æ–‡ä»¶å¤¹æ’é™¤ã€‚</li></ul><h2 id="æ·»åŠ æ¨¡æ¿"><a href="#æ·»åŠ æ¨¡æ¿" class="headerlink" title="æ·»åŠ æ¨¡æ¿"></a>æ·»åŠ æ¨¡æ¿</h2><blockquote><p>obsidianå¯ä»¥è‡ªå®šä¹‰æ¨¡æ¿ä¿¡æ¯ï¼Œé€šè¿‡æ¨¡æ¿å¿«é€Ÿåˆ›å»ºHexoçš„front-matterä¿¡æ¯</p></blockquote><p><img src="/../../img/Pasted%20image%2020230924170933.png"></p><p>åœ¨<code>source/_obsidian</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»ºtemplate.mdæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---  </span><br><span class="line">title: &#123;&#123;title&#125;&#125;  </span><br><span class="line">date: &#123;&#123;date&#125;&#125;  </span><br><span class="line"><span class="section">tags: []  </span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>ä¹‹åä½¿ç”¨obsidianæ·»åŠ æ–°ç¬”è®°æ—¶ï¼Œåªéœ€è¦å¼•å…¥è¯¥æ¨¡ç‰ˆå³å¯ã€‚</p><h2 id="æ·»åŠ æ’ä»¶"><a href="#æ·»åŠ æ’ä»¶" class="headerlink" title="æ·»åŠ æ’ä»¶"></a>æ·»åŠ æ’ä»¶</h2><h3 id="è‡ªåŠ¨ç”Ÿæˆcategories"><a href="#è‡ªåŠ¨ç”Ÿæˆcategories" class="headerlink" title="è‡ªåŠ¨ç”Ÿæˆcategories"></a>è‡ªåŠ¨ç”Ÿæˆcategories</h3><blockquote><p>åœ¨æœ¬åœ°ä½¿ç”¨Obsidianæ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šç”¨ç¬”è®°çš„è·¯å¾„(å¦‚å‰ç«¯&#x2F;Vue)æ¥ä»£è¡¨å…¶<code>categories(åˆ†ç±»)</code>ï¼Œä½†åœ¨Hexoä¸­éœ€è¦åœ¨front-matterä¸­æ‰‹åŠ¨å®šä¹‰<code>categories</code>,å¦‚æœæˆ‘ä»¬ä¸æƒ³æ¯æ¬¡éƒ½æ‰‹åŠ¨é…ç½®ï¼Œè€Œæ˜¯è®©Hexoè‡ªåŠ¨ä»¥ç¬”è®°çš„è·¯å¾„æ¥å®šä¹‰å…¶<code>categories</code>ã€‚</p></blockquote><p>æ·»åŠ <code>hexo-auto-category</code>ä¾èµ–ï¼Œæ ¹æ®æ–‡ä»¶ç›®å½•è‡ªåŠ¨ç”Ÿæˆ categories ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-auto-category --save</span><br></pre></td></tr></table></figure><p>åœ¨æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ·»åŠ é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generate categories from directory-tree  </span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/xu-song/hexo-auto-category  </span></span><br><span class="line"><span class="comment"># depth: the max_depth of directory-tree you want to generate, should &gt; 0  </span></span><br><span class="line"><span class="attr">auto_category:</span>  </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  </span><br><span class="line">  <span class="attr">depth:</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆå”¯ä¸€é™æ€é“¾æ¥"><a href="#ç”Ÿæˆå”¯ä¸€é™æ€é“¾æ¥" class="headerlink" title="ç”Ÿæˆå”¯ä¸€é™æ€é“¾æ¥"></a>ç”Ÿæˆå”¯ä¸€é™æ€é“¾æ¥</h3><blockquote><p>é»˜è®¤çš„ç¬”è®°é“¾æ¥æ˜¯æ ¹æ®ç¬”è®°çš„æ—¶é—´+æ ‡é¢˜ç”Ÿæˆçš„ï¼Œä½†å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†ç¬”è®°çš„æ—¶é—´ï¼Œé‚£ä¹ˆå¦‚æœåˆ«çš„æ–‡ç« ä¸­å¼•ç”¨äº†è¿™ç¯‡ç¬”è®°ï¼Œå°±ä¼šå¤±æ•ˆã€‚</p></blockquote><p>æ·»åŠ <code>hexo-abbrlink</code>ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><p>åœ¨æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ·»åŠ é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink/</span></span><br><span class="line"><span class="comment"># abbrlink config  </span></span><br><span class="line"><span class="comment"># https://github.com/rozbo/hexo-abbrlink  </span></span><br><span class="line"><span class="attr">abbrlink:</span>  </span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>      <span class="comment">#support crc16(default) and crc32  </span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span></span><br></pre></td></tr></table></figure><h3 id="Obsidianæ–‡ä»¶æ ‘æ’ä»¶"><a href="#Obsidianæ–‡ä»¶æ ‘æ’ä»¶" class="headerlink" title="Obsidianæ–‡ä»¶æ ‘æ’ä»¶"></a>Obsidianæ–‡ä»¶æ ‘æ’ä»¶</h3><blockquote><p>ç”±äºç›´æ¥ç”¨Obsidianæ‰“å¼€Hexoé¡¹ç›®ï¼Œç›®å½•æ ‘ä¼šæ˜¾ç¤ºå¾ˆå¤šæ— å…³ç´§è¦çš„ç›®å½•ï¼Œåœ¨Obsidianä¸­æˆ‘ä»¬åªéœ€è¦å…³æ³¨<code>source/_post</code>è¿™ä¸ªæ–‡ä»¶å¤¹å³å¯ã€‚</p></blockquote><p>åœ¨Obsidianç¬¬ä¸‰æ–¹æ’ä»¶ä¸­å®‰è£…<code>File Tree Alternative Plugin</code>æ’ä»¶<br><img src="/../../img/Pasted%20image%2020230924172412.png"><br>æ–‡ä»¶å¤¹èšç„¦æ•ˆæœï¼š<br><img src="/../../img/Pasted%20image%2020230924172457.png"></p><h1 id="äº”-é…ç½®ä¸€é”®éƒ¨ç½²"><a href="#äº”-é…ç½®ä¸€é”®éƒ¨ç½²" class="headerlink" title="äº”.é…ç½®ä¸€é”®éƒ¨ç½²"></a>äº”.é…ç½®ä¸€é”®éƒ¨ç½²</h1><blockquote><p>é…ç½®ä¸€é”®éƒ¨ç½²åŠŸèƒ½ï¼Œå¯ä»¥å®ç°æœ¬åœ°åšå®¢ç¼–å†™å®Œæ¯•åï¼Œä¸€é”®åŒæ­¥åˆ°githubä¸Šï¼Œå¹¶åŒæ­¥å“åº”çš„ä¸ªäººä¸»é¡µã€‚å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ï¼š<a href="https://hexo.io/zh-cn/docs/one-command-deployment">éƒ¨ç½² | Hexo</a></p></blockquote><p>å®‰è£…hexo-deployer-gitæ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install hexo-deployer-git --save</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼ˆæ³¨æ„ä¸æ˜¯ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼‰</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment  </span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment  </span></span><br><span class="line"><span class="attr">deploy:</span>  </span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>  </span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&lt;your</span> <span class="string">repo</span> <span class="string">url&gt;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">&lt;branch</span> <span class="string">name&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example</span></span><br><span class="line"><span class="attr">deploy:</span>  </span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>  </span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:xxxx/xxxx.github.io.git</span>  </span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤</th></tr></thead><tbody><tr><td><code>repo</code></td><td>åº“ï¼ˆRepositoryï¼‰åœ°å€</td><td>å»ºè®®ä½¿ç”¨<code>git@github.com</code>å½¢å¼çš„</td></tr><tr><td><code>branch</code></td><td>åˆ†æ”¯åç§°</td><td><code>gh-pages</code>Â (GitHub)  <br><code>coding-pages</code>Â (Coding.net)  <br><code>master</code>Â (others)</td></tr><tr><td><code>message</code></td><td>è‡ªå®šä¹‰æäº¤ä¿¡æ¯</td><td><code>Site updated: &#123;&#123; now('YYYY-MM-DD HH:mm:ss') &#125;&#125;</code>)</td></tr><tr><td><code>token</code></td><td>å¯é€‰çš„ä»¤ç‰Œå€¼ï¼Œç”¨äºè®¤è¯ repoã€‚ç”¨Â <code>$</code>Â ä½œä¸ºå‰ç¼€ä»è€Œä»ç¯å¢ƒå˜é‡ä¸­è¯»å–ä»¤ç‰Œ</td><td></td></tr></tbody></table><p>ç„¶åæ‰§è¡ŒæŒ‡ä»¤,å¦‚æœæç¤ºéœ€è¦éªŒè¯githubå¸å·å’Œå¯†ç ï¼Œåˆ™å¯ä»¥é…ç½®SSHå¯†é’¥è®¤è¯ï¼Œæ–¹å¼åœ¨è¿™å°±ä¸èµ˜è¿°äº†ï¼Œè‡ªè¡Œç™¾åº¦å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean;</span><br><span class="line">hexo deploy;</span><br></pre></td></tr></table></figure><h1 id="è¸©å‘è®°å½•"><a href="#è¸©å‘è®°å½•" class="headerlink" title="è¸©å‘è®°å½•"></a>è¸©å‘è®°å½•</h1><blockquote><p>æ€»å¾—æ¥è¯´ï¼ŒæŒ‰ç…§Hexoå’ŒButterflyæ–‡æ¡£è¿›è¡Œé…ç½®ï¼Œç¬”è€…è‡ªå·±é‡åˆ°çš„é—®é¢˜å¹¶ä¸å¤šï¼Œå¦‚æœè¯»è€…åœ¨é…ç½®ä¸­ï¼Œé‡åˆ°é—®é¢˜çš„æ¬¢è¿ç•™è¨€è¯„è®º~</p></blockquote><h2 id="1-é…ç½®è¯„è®ºåŠŸèƒ½"><a href="#1-é…ç½®è¯„è®ºåŠŸèƒ½" class="headerlink" title="1.é…ç½®è¯„è®ºåŠŸèƒ½"></a>1.é…ç½®è¯„è®ºåŠŸèƒ½</h2><blockquote><p>ç½‘ä¸Šå¤§å¤šéƒ½æ˜¯ä½¿ç”¨Valineç®¡ç†è¯„è®ºçš„ï¼Œå› ä¸ºå…¶æ— éœ€åç«¯ï¼Œä½†æ˜¯è‡ªä»2022å¹´èµ·ï¼Œå…¶ä¸æ”¯æŒå›½å†…ç”¨æˆ·ä½¿ç”¨äº†ã€‚å› æ­¤æ¢ç”¨äº†Waline+Vercelæ„å»ºè¯„è®ºåŠŸèƒ½ã€‚</p></blockquote><p>å‚è€ƒæ–‡æ¡£å¦‚ä¸‹ï¼š<a href="https://waline.js.org/guide/get-started/#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93">å¿«é€Ÿä¸Šæ‰‹ | Waline</a></p><blockquote><p>ä½†Vercelçš„èŠ‚ç‚¹ï¼Œå›½å†…æ— æ³•è®¿é—®ï¼Œå› æ­¤è¦ä½¿ç”¨è¯„è®ºåŠŸèƒ½ï¼Œåªèƒ½é€šè¿‡<code>ç‰¹æ®Šæ‰‹æ®µ</code>ï¼Œé™¤éè‡ªå·±è´­ä¹°äº†åŸŸåã€‚</p></blockquote><h2 id="2-é…ç½®ä¸€é”®éƒ¨ç½²"><a href="#2-é…ç½®ä¸€é”®éƒ¨ç½²" class="headerlink" title="2.é…ç½®ä¸€é”®éƒ¨ç½²"></a>2.é…ç½®ä¸€é”®éƒ¨ç½²</h2><blockquote><p>ç¬”è€…è‡ªå·±é€šè¿‡hexo déƒ¨ç½²åˆ°githubæ—¶ï¼Œç»å¸¸å‡ºç°timeout outçš„æƒ…å†µï¼ˆä¹Ÿæœ‰éƒ¨åˆ†æ˜¯ç½‘ç»œåŸå› ï¼‰ï¼Œåæ¥å‘ç°æ˜¯å› ä¸ºä»“åº“é“¾æ¥å†™çš„æ˜¯httpsçš„å½¢å¼ï¼Œæ”¹æˆ<code>git@github.com</code>å½¢å¼çš„æƒ…å†µå°±å¥½å¾ˆå¤šã€‚</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment  </span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment  </span></span><br><span class="line"><span class="attr">deploy:</span>  </span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>  </span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span>  </span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><h2 id="3-æ ‡ç­¾é¡µ-åˆ†ç±»é¡µ-å…³äºæˆ‘é¡µé¢ç¼ºå¤±"><a href="#3-æ ‡ç­¾é¡µ-åˆ†ç±»é¡µ-å…³äºæˆ‘é¡µé¢ç¼ºå¤±" class="headerlink" title="3.æ ‡ç­¾é¡µ&#x2F;åˆ†ç±»é¡µ&#x2F;å…³äºæˆ‘é¡µé¢ç¼ºå¤±"></a>3.æ ‡ç­¾é¡µ&#x2F;åˆ†ç±»é¡µ&#x2F;å…³äºæˆ‘é¡µé¢ç¼ºå¤±</h2><p>ä¹Ÿå°±æ˜¯å›¾ä¸­çš„è¿™äº›ï¼Œå…¶ä¸­archivesæ˜¯åˆ›å»ºHexoæ¡†æ¶æ—¶å·²ç»æœ‰çš„ï¼Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨é…ç½®ï¼Œè€Œæ ‡ç­¾ï¼Œåˆ†ç±»ï¼Œå‹é“¾ï¼Œå…³äºç•Œé¢æ˜¯éœ€è¦æ‰‹åŠ¨é…ç½®çš„ã€‚<br><img src="/../../img/Pasted%20image%2020230924164601.png"></p><p>å…¶é…ç½®çš„å…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š<a href="https://butterfly.js.org/posts/dc584b87/">Butterfly å®‰è£æ–‡æª”(äºŒ) ä¸»é¡Œé é¢ | Butterfly</a></p><p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨source&#x2F;tagsæ–‡ä»¶å¤¹ä¸‹ä¼šæ–°å»ºä¸€ä¸ªindex.mdæ–‡ä»¶ï¼Œè¿›å…¥è¯¥æ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ ‡ç­¾</span><br><span class="line">date: 2023-01-05 00:00:00</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">orderby: random</span><br><span class="line"><span class="section">order: 1</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°æ‰§è¡ŒæŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean;</span><br><span class="line">hexo g;</span><br><span class="line">hexo s;</span><br></pre></td></tr></table></figure><p>å…¶ä½™é¡µé¢çš„é…ç½®ä¹Ÿç±»ä¼¼ã€‚</p><p>å‹é“¾é¡µçš„é…ç½®è¯·å‚è€ƒï¼š<a href="https://butterfly.js.org/posts/dc584b87/#%E5%8F%8B%E6%83%85%E9%8F%88%E6%8E%A5">Butterfly å®‰è£æ–‡æª”(äºŒ) ä¸»é¡Œé é¢ | Butterfly</a></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢å¹³å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°·ç²’å•†åŸç¬”è®°</title>
      <link href="/posts/dd2fb3f1/"/>
      <url>/posts/dd2fb3f1/</url>
      
        <content type="html"><![CDATA[<h1 id="1-åˆå§‹åŒ–é¡¹ç›®"><a href="#1-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="1.åˆå§‹åŒ–é¡¹ç›®"></a>1.åˆå§‹åŒ–é¡¹ç›®</h1><h2 id="ideaæ–°å»ºç©ºé¡¹ç›®"><a href="#ideaæ–°å»ºç©ºé¡¹ç›®" class="headerlink" title="ideaæ–°å»ºç©ºé¡¹ç›®"></a>ideaæ–°å»ºç©ºé¡¹ç›®</h2><h2 id="æ·»åŠ å„ä¸ªæ¨¡å—"><a href="#æ·»åŠ å„ä¸ªæ¨¡å—" class="headerlink" title="æ·»åŠ å„ä¸ªæ¨¡å—"></a>æ·»åŠ å„ä¸ªæ¨¡å—</h2><blockquote><p>gulimall-productå•†å“æœåŠ¡<br><img src="/../../../../img/Pasted%20image%2020230920094421.png"><br>gulimall-wareä»“å‚¨æœåŠ¡<br><img src="/../../../../img/Pasted%20image%2020230920094917.png"><br>gulimall-orderè®¢å•æœåŠ¡<br><img src="/../../../../img/Pasted%20image%2020230920095048.png"><br>åŒç†åˆ›å»º<br>gulimall-couponä¼˜æƒ åˆ¸æœåŠ¡<br>gulimall-memberä¼šå‘˜æœåŠ¡<br>åŒæ—¶æ·»åŠ springboot webä¾èµ–å’Œspringcloud-routing openfeignä¾èµ–</p></blockquote><h2 id="èšåˆæ¨¡å—"><a href="#èšåˆæ¨¡å—" class="headerlink" title="èšåˆæ¨¡å—"></a>èšåˆæ¨¡å—</h2><blockquote><p>åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ pomæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹åˆ—ä»£ç </p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.leggasai.gulimall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>gulimall<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>èšåˆæœåŠ¡<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-ware<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-member<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-order<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-product<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>gulimall-coupon<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>å°†pomæ–‡ä»¶åŠ å…¥maven,åˆ·æ–°maven</p></blockquote><h2 id="æ›´æ”¹-gitignoreæ–‡ä»¶"><a href="#æ›´æ”¹-gitignoreæ–‡ä»¶" class="headerlink" title="æ›´æ”¹.gitignoreæ–‡ä»¶"></a>æ›´æ”¹.gitignoreæ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">HELP.md  </span><br><span class="line">target/  </span><br><span class="line">!.mvn/wrapper/maven-wrapper.jar  </span><br><span class="line">!**/src/main/**/target/  </span><br><span class="line">!**/src/test/**/target/  </span><br><span class="line">  </span><br><span class="line">### STS ###  </span><br><span class="line">.apt_generated  </span><br><span class="line">.classpath  </span><br><span class="line">.factorypath  </span><br><span class="line">.project  </span><br><span class="line">.settings  </span><br><span class="line">.springBeans  </span><br><span class="line">.sts4-cache  </span><br><span class="line">  </span><br><span class="line">### IntelliJ IDEA ###  </span><br><span class="line">.idea  </span><br><span class="line">*.iws  </span><br><span class="line">*.iml  </span><br><span class="line">*.ipr  </span><br><span class="line">  </span><br><span class="line">### NetBeans ###  </span><br><span class="line">/nbproject/private/  </span><br><span class="line">/nbbuild/  </span><br><span class="line">/dist/  </span><br><span class="line">/nbdist/  </span><br><span class="line">/.nb-gradle/  </span><br><span class="line">build/  </span><br><span class="line">!**/src/main/**/build/  </span><br><span class="line">!**/src/test/**/build/  </span><br><span class="line">  </span><br><span class="line">### VS Code ###  </span><br><span class="line">.vscode/  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">**/mvnw  </span><br><span class="line">**/mvnw.cmd  </span><br><span class="line">  </span><br><span class="line">**/.mvn  </span><br><span class="line">**/target/  </span><br><span class="line">  </span><br><span class="line">**/.gitignore</span><br></pre></td></tr></table></figure><h1 id="2-æ•°æ®åº“è®¾è®¡"><a href="#2-æ•°æ®åº“è®¾è®¡" class="headerlink" title="2.æ•°æ®åº“è®¾è®¡"></a>2.æ•°æ®åº“è®¾è®¡</h1><blockquote><p>æ•°æ®åº“åˆ†ä¸º è®¢å•æ•°æ®åº“ã€ç”¨æˆ·æ•°æ®åº“ã€åº“å­˜æ•°æ®åº“ã€å•†å“æ•°æ®åº“ã€ä¼˜æƒ æ•°æ®åº“<br><a href="../../../../img/gmall_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.pdm">gmall_æ•°æ®åº“è®¾è®¡.pdm</a></p></blockquote><h2 id="è®¢å•æ•°æ®åº“è¡¨"><a href="#è®¢å•æ•°æ®åº“è¡¨" class="headerlink" title="è®¢å•æ•°æ®åº“è¡¨"></a>è®¢å•æ•°æ®åº“è¡¨</h2><blockquote><p>åŒ…å«äº†è®¢å•ä¿¡æ¯ï¼Œé€€è´§ä¿¡æ¯ï¼Œè®¢å•é¡¹ç­‰<br><a href="../../../../img/gulimall_oms.sql">gulimall_oms.sql</a></p></blockquote><h2 id="ç”¨æˆ·æ•°æ®åº“è¡¨"><a href="#ç”¨æˆ·æ•°æ®åº“è¡¨" class="headerlink" title="ç”¨æˆ·æ•°æ®åº“è¡¨"></a>ç”¨æˆ·æ•°æ®åº“è¡¨</h2><blockquote><p>åŒ…å«äº†ç”¨æˆ·ä¿¡æ¯ï¼Œä¼šå‘˜ç§¯åˆ†ï¼Œç”¨æˆ·æ”¶è—ï¼Œæ”¶è´§åœ°å€ç­‰<br><a href="../../../../img/gulimall_ums.sql">gulimall_ums.sql</a></p></blockquote><h2 id="åº“å­˜æ•°æ®åº“è¡¨"><a href="#åº“å­˜æ•°æ®åº“è¡¨" class="headerlink" title="åº“å­˜æ•°æ®åº“è¡¨"></a>åº“å­˜æ•°æ®åº“è¡¨</h2><blockquote><p>åŒ…å«åº“å­˜å·¥ä½œå•ï¼Œé‡‡è´­å•ï¼Œåº“å­˜è¡¨ç­‰<br><a href="../../../../img/gulimall_wms.sql">gulimall_wms.sql</a></p></blockquote><h2 id="å•†å“æ•°æ®åº“è¡¨"><a href="#å•†å“æ•°æ®åº“è¡¨" class="headerlink" title="å•†å“æ•°æ®åº“è¡¨"></a>å•†å“æ•°æ®åº“è¡¨</h2><blockquote><p>åŒ…å«SPUè¡¨ï¼ŒSKUè¡¨ï¼Œå•†å“åˆ†ç±»è¡¨ï¼Œå•†å“è¯„ä»·è¡¨ï¼Œå±æ€§è¡¨ç­‰<br><a href="../../../../img/gulimall_pms.sql">gulimall_pms.sql</a></p></blockquote><h2 id="ä¼˜æƒ æ•°æ®åº“è¡¨"><a href="#ä¼˜æƒ æ•°æ®åº“è¡¨" class="headerlink" title="ä¼˜æƒ æ•°æ®åº“è¡¨"></a>ä¼˜æƒ æ•°æ®åº“è¡¨</h2><blockquote><p>åŒ…å«ä¼˜æƒ åˆ¸ä¿¡æ¯ï¼Œç§¯åˆ†è¡¨ï¼Œç§’æ€ä¿¡æ¯ç­‰ï¼Œå•†å“ä¼˜æƒ ä¿¡æ¯ç­‰<br><a href="../../../../img/gulimall_sms.sql">gulimall_sms.sql</a></p></blockquote><h1 id="3-å¿«é€Ÿå¼€å‘ä»£ç ç”Ÿæˆ"><a href="#3-å¿«é€Ÿå¼€å‘ä»£ç ç”Ÿæˆ" class="headerlink" title="3.å¿«é€Ÿå¼€å‘ä»£ç ç”Ÿæˆ"></a>3.å¿«é€Ÿå¼€å‘ä»£ç ç”Ÿæˆ</h1><blockquote><p>ä¸»è¦ä½¿ç”¨äººäººå¼€æºçš„renren-generatorã€renren-fastã€renren-fast-vue</p></blockquote><h2 id="å¼•å…¥å¿…è¦çš„ä¾èµ–"><a href="#å¼•å…¥å¿…è¦çš„ä¾èµ–" class="headerlink" title="å¼•å…¥å¿…è¦çš„ä¾èµ–"></a>å¼•å…¥å¿…è¦çš„ä¾èµ–</h2><h2 id="åˆ›å»ºå…¬å…±æ¨¡å—"><a href="#åˆ›å»ºå…¬å…±æ¨¡å—" class="headerlink" title="åˆ›å»ºå…¬å…±æ¨¡å—"></a>åˆ›å»ºå…¬å…±æ¨¡å—</h2><p>åˆ›å»ºcommonæ¨¡å—ï¼Œåœ¨å…¶pomæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›å…¬å…±çš„ä¾èµ–,å¦‚mysql-connector-java,mybatisç­‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>  </span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>  </span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.leggasai.gulimall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>å…¬å…±ç±»<span class="tag">&lt;/<span class="name">description</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-plus.version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">mybatis-plus.version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.8<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">httpcore.version</span>&gt;</span>4.4.12<span class="tag">&lt;/<span class="name">httpcore.version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">commons-lang.version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">commons-lang.version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql-connector-java.version</span>&gt;</span>8.0.17<span class="tag">&lt;/<span class="name">mysql-connector-java.version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-api.version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">servlet-api.version</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!--mybatis-plus--&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpcore<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;httpcore.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql-connector-java.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;servlet-api.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–æ¨¡å—åœ¨å…¶pomæ–‡ä»¶ä¸­å¼•å…¥commonæ¨¡å—</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.leggasai.gulimall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®Mybatis-Plus"><a href="#é…ç½®Mybatis-Plus" class="headerlink" title="é…ç½®Mybatis-Plus"></a>é…ç½®Mybatis-Plus</h2><p>å®˜æ–¹é“¾æ¥ï¼š<a href="https://baomidou.com/pages/24112f/">ç®€ä»‹ | MyBatis-Plus (baomidou.com)</a></p><h3 id="1-æ·»åŠ ä¾èµ–"><a href="#1-æ·»åŠ ä¾èµ–" class="headerlink" title="1.æ·»åŠ ä¾èµ–"></a>1.æ·»åŠ ä¾èµ–</h3><p>åœ¨commomæ¨¡å—çš„pomä¸­æ·»åŠ mybatis-plusçš„ä»£ç </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®"><a href="#2-é…ç½®" class="headerlink" title="2.é…ç½®"></a>2.é…ç½®</h3><h4 id="é…ç½®æ•°æ®æº"><a href="#é…ç½®æ•°æ®æº" class="headerlink" title="é…ç½®æ•°æ®æº"></a>é…ç½®æ•°æ®æº</h4><p>åœ¨å„ä¸ªæ¨¡å—çš„application.ymlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span>  </span><br><span class="line">  <span class="attr">datasource:</span>  </span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span>  </span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span>  </span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.241.128:3306/gulimall_pms</span>  </span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®Mybatis-Plus-1"><a href="#é…ç½®Mybatis-Plus-1" class="headerlink" title="é…ç½®Mybatis-Plus"></a>é…ç½®Mybatis-Plus</h4><p>åœ¨å„ä¸ªæ¨¡å—çš„application.ymlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span>  </span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/**/*.xml</span>  </span><br><span class="line">  <span class="attr">global-config:</span>  </span><br><span class="line">    <span class="attr">db-config:</span>  </span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><h1 id="4-åˆ†å¸ƒå¼ç»„ä»¶"><a href="#4-åˆ†å¸ƒå¼ç»„ä»¶" class="headerlink" title="4.åˆ†å¸ƒå¼ç»„ä»¶"></a>4.åˆ†å¸ƒå¼ç»„ä»¶</h1><p><img src="/../../../../img/B$16F60L4QJGAUJ_JG%5DLEAV.png"></p><ul><li><strong>Nacos</strong>ï¼šæ³¨å†Œä¸­å¿ƒï¼ˆæœåŠ¡å‘ç°&#x2F;æ³¨å†Œï¼‰</li><li><strong>Nacos</strong>ï¼šé…ç½®ä¸­å¿ƒï¼ˆåŠ¨æ€é…ç½®ç®¡ç†ï¼‰</li><li>Ribbonï¼šè´Ÿè½½å‡è¡¡</li><li>Feignï¼šå£°æ˜å¼HTTPå®¢æˆ·ç«¯ï¼ŒRPC</li><li>Sentinelï¼šæœåŠ¡å®¹é”™ï¼ˆæœåŠ¡é™æµã€æœåŠ¡é™çº§ã€æœåŠ¡ç†”æ–­ï¼‰</li><li>Gatewayï¼šAPIç½‘å…³</li><li>Sleuthï¼šè°ƒç”¨é“¾ç›‘æ§</li><li>Seataï¼šåˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</li></ul><p>åœ¨commonæ¨¡å—ä¸­å¼•å…¥Spring-cloud-Alibabaä¾èµ–<br><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">ç‰ˆæœ¬è¯´æ˜ Â· alibaba&#x2F;spring-cloud-alibaba Wiki (github.com)</a></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependencyManagement&gt;</span>  </span><br><span class="line">    <span class="string">&lt;dependencies&gt;</span>  </span><br><span class="line">        <span class="string">&lt;dependency&gt;</span>  </span><br><span class="line">            <span class="string">&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span>  </span><br><span class="line">            <span class="string">&lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span>  </span><br><span class="line">            <span class="string">&lt;version&gt;2021.1&lt;/version&gt;</span>  </span><br><span class="line">            <span class="string">&lt;type&gt;pom&lt;/type&gt;</span>  </span><br><span class="line">            <span class="string">&lt;scope&gt;import&lt;/scope&gt;</span>  </span><br><span class="line">        <span class="string">&lt;/dependency&gt;</span>  </span><br><span class="line">    <span class="string">&lt;/dependencies&gt;</span>  </span><br><span class="line"><span class="string">&lt;/dependencyManagement&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>dependencyManagementçš„ç”¨æ³•ï¼š</p><ol><li>å¯¹é¡¹ç›®æ‰€ä¾èµ–jaråŒ…è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„ç®¡ç†å™¨ã€‚</li><li>ä½¿ç”¨pom.xmlä¸­çš„dependencyManagementå…ƒç´¢èƒ½è®©æ‰€æœ‰åœ¨å­æ¨¡å—ä¸­å¼•ç”¨ä¸€ä¸ªä¾èµ–è€Œä¸ç”¨æ˜¾å¼çš„åˆ—å‡ºç‰ˆæœ¬å·ã€‚ä¹Ÿå°±æ˜¯å­æ¨¡å—ä¸éœ€è¦åˆ—å‡ºç‰ˆæœ¬ï¼Œå­æ¨¡å—ä¸­çš„pomä¾èµ–ä¼šæ‰¾åˆ°dependencyManagementæ‰€åœ¨jaråŒ…çš„ç‰ˆæœ¬ï¼Œå¹¶å¼•ç”¨è¿™ä¸ªjarå¯¹åº”çš„ç‰ˆæœ¬å·ã€‚</li><li>dependencyManagementåªæ˜¯å£°æ˜ä¾èµ–ï¼Œ å¹¶ä¸å®ç°å¼•å…¥,å› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾ç¤ºçš„å£°æ˜éœ€è¦ç”¨çš„ä¾èµ–ã€‚</li><li>ä¸€èˆ¬ç”¨äºçˆ¶å·¥ç¨‹ï¼Œå¦‚æœå­é¡¹ç›®ä¸­æŒ‡å®šäº†ç‰ˆæœ¬å·,é‚£ä¹ˆä¼šä½¿ç”¨å­é¡¹ç›®ä¸­æŒ‡å®šçš„jarç‰ˆæœ¬ã€‚</li></ol></blockquote><h2 id="4-1-Nacos"><a href="#4-1-Nacos" class="headerlink" title="4.1 Nacos"></a>4.1 Nacos</h2><p><a href="https://nacos.io/en-us/docs/quick-start-spring-cloud.html">Quick Start for Nacos Spring Cloud Projects</a></p><h3 id="æœ¬åœ°ä¸‹è½½Nacos"><a href="#æœ¬åœ°ä¸‹è½½Nacos" class="headerlink" title="æœ¬åœ°ä¸‹è½½Nacos"></a>æœ¬åœ°ä¸‹è½½Nacos</h3><p>ä¸‹è½½é“¾æ¥ï¼š<a href="../../../../img/nacos-server-1.2.1.zip">Nacos</a><br>æœ¬åœ°å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨bin/è·¯å¾„ä¸‹è¿è¡Œ</span></span><br><span class="line">startup.cmd -m standalone</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸæˆªå›¾<br><img src="/../../../../img/Pasted%20image%2020231001214320.png"><br>è®¿é—®åœ°å€ï¼š<a href="http://localhost:8848/nacos">Nacos</a></p><h3 id="æœåŠ¡å‘ç°"><a href="#æœåŠ¡å‘ç°" class="headerlink" title="æœåŠ¡å‘ç°"></a>æœåŠ¡å‘ç°</h3><p>åœ¨å­æ¨¡å—application.ymlä¸­æ·»åŠ å¦‚ä¸‹ä»£ç </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gulimall-member</span></span><br></pre></td></tr></table></figure><p>åœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥æ³¨è§£@EnableDiscoveryClientä»¥å¼€å¯æœåŠ¡å‘ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.leggasai.gulimall.member.dao&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallCouponApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GulimallCouponApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿œç¨‹è°ƒç”¨"><a href="#è¿œç¨‹è°ƒç”¨" class="headerlink" title="è¿œç¨‹è°ƒç”¨"></a>è¿œç¨‹è°ƒç”¨</h3><p>åœ¨pomæ¨¡å—ä¸­æ·»åŠ openFeignä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸»ç±»ä¸­å¼€å¯ï¼Œæ·»åŠ @EnableFeignClients(basePackages &#x3D; â€œcom.leggasai.gulimall.member.feignâ€)ï¼Œå¯¹åº”ä½ å­˜æ”¾è¿œç¨‹è°ƒç”¨æœåŠ¡çš„åŒ…è·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.leggasai.gulimall.member.dao&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.leggasai.gulimall.member.feign&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallMemberApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GulimallMemberApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–°å»ºè¿œç¨‹è°ƒç”¨æœåŠ¡æ–‡ä»¶ï¼Œè·¯å¾„å¯¹åº”ä¸Šè¿°basePackagesï¼Œå¹¶ç¼–å†™æ¥å£<br>è¿™é‡Œçš„æ¥å£è¦å’Œè¢«è°ƒç”¨ç±»ä¸­å£°æ˜çš„ä¸€è‡´ï¼ŒåŒ…æ‹¬æ¥å£è·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * å£°æ˜è¿œç¨‹è°ƒç”¨  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="meta">@FeignClient(&quot;gulimall-coupon&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CouponFeignService</span> &#123;  </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/coupon/coupon/test&quot;)</span>  </span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">test</span><span class="params">()</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¢«è°ƒç”¨ç±» couponController,å‰é¢æœ‰ä¸€ä¸ª@RequestMapping(&quot;coupon/coupon&quot;)</span></span><br><span class="line"><span class="comment">//å› æ­¤æ¥å£è·¯å¾„ä¸º/coupon/coupon/test</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">test</span><span class="params">()</span>&#123;  </span><br><span class="line">    <span class="type">CouponEntity</span> <span class="variable">couponEntity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CouponEntity</span>();  </span><br><span class="line">    couponEntity.setCouponName(<span class="string">&quot;æ»¡å‡200-100&quot;</span>);  </span><br><span class="line">    <span class="keyword">return</span> R.ok().put(<span class="string">&quot;coupons&quot;</span>, Arrays.asList(couponEntity));  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿œç¨‹è°ƒç”¨ï¼Œæ³¨å…¥è¿œç¨‹è°ƒç”¨æœåŠ¡ï¼Œè°ƒç”¨å…¶ä¸­çš„æ¥å£æ–¹æ³•å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span>  </span><br><span class="line">CouponFeignService couponFeignService;  </span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">test</span><span class="params">()</span>&#123;  </span><br><span class="line">    <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> couponFeignService.test();  </span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();  </span><br><span class="line">    map.put(<span class="string">&quot;member&quot;</span>,<span class="string">&quot;jyc&quot;</span>);  </span><br><span class="line">    map.put(<span class="string">&quot;coupons&quot;</span>,r.get(<span class="string">&quot;coupons&quot;</span>));  </span><br><span class="line">    <span class="keyword">return</span> R.ok(map);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ä¸­å¿ƒ"><a href="#é…ç½®ä¸­å¿ƒ" class="headerlink" title="é…ç½®ä¸­å¿ƒ"></a>é…ç½®ä¸­å¿ƒ</h3><p>å‚è€ƒæ–‡æ¡£<a href="https://github.com/alibaba/spring-cloud-alibaba/blob/2021.x/spring-cloud-alibaba-examples/nacos-example/nacos-config-example/readme-zh.md">Nacos-config-example</a><br>åœ¨pomæ¨¡å—ä¸­æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ä¸­å¿ƒ--&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„æ–°ç‰ˆæœ¬éœ€è¦å¼•å…¥spring-cloud-starter-bootstrapä¾èµ–æ¥åŠ è½½bootstrap.propertiesæ–‡ä»¶</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºbootstrap.propertiesæ–‡ä»¶ï¼Œä¸èƒ½åœ¨application.ymlä¸­å†™ï¼Œå¦åˆ™ä¸èƒ½åŠ¨æ€ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=gulimall-coupon  </span><br><span class="line">spring.cloud.nacos.config.server-addr=127.0.0.1:8848</span><br></pre></td></tr></table></figure><p>æ‰“å¼€Nacosé…ç½®ä¸­å¿ƒï¼Œæ·»åŠ é…ç½®ï¼ŒData IDå¿…é¡»ä¸ºspring.application.nameåŠ properties<br><img src="/../../../../img/Pasted%20image%2020231003111345.png"></p><ul><li>å‘½åç©ºé—´ï¼šç”¨æ¥é…ç½®éš”ç¦»<ul><li>é»˜è®¤ä½¿ç”¨publicï¼ˆä¿ç•™ç©ºé—´ï¼‰ï¼Œé»˜è®¤æ–°å¢çš„æ‰€æœ‰é…ç½®éƒ½åœ¨publicç©ºé—´</li><li>åº”ç”¨ï¼š<ul><li>é…ç½®å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒçš„ä¸åŒå‘½åç©ºé—´</li><li>æ¯ä¸€ä¸ªå¾®æœåŠ¡ç›¸äº’éš”ç¦»ï¼Œåˆ›å»ºä¸åŒçš„å‘½åç©ºé—´</li></ul></li><li>éœ€è¦ä½¿ç”¨spring.cloud.nacos.config.namespace&#x3D;id,æŒ‡å®šå¯¹åº”å‘½åæ§ä»¶ID</li></ul></li><li>é…ç½®é›†ï¼šæ‰€æœ‰é…ç½®çš„é›†åˆ</li><li>é…ç½®é›†IDï¼šData ID</li><li>é…ç½®åˆ†ç»„ï¼šå¯¹é…ç½®è¿›è¡Œåˆ†ç»„<ul><li>é»˜è®¤æ‰€æœ‰çš„é…ç½®é›†éƒ½å±äºDEFAULT_GROUP</li><li>éœ€è¦ä½¿ç”¨spring.cloud.nacos.config.groupæŒ‡å®šå¯¹åº”çš„é…ç½®åˆ†ç»„</li></ul></li></ul><p>æœ¬é¡¹ç›®è§„åˆ™ï¼š</p><ul><li>æ¯ä¸ªå¾®æœåŠ¡åˆ›å»ºè‡ªå·±çš„<code>å‘½åç©ºé—´</code>ï¼Œä½¿ç”¨<code>é…ç½®åˆ†ç»„</code>åŒºåˆ†ç¯å¢ƒï¼Œdevã€propã€test</li><li>å¾®æœåŠ¡ä»»ä½•é…ç½®ä¿¡æ¯ï¼Œä»»ä½•é…ç½®æ–‡ä»¶éƒ½å¯ä»¥æ”¾åœ¨é…ç½®ä¸­å¿ƒä¸­</li><li>é…ç½®ä¸­å¿ƒçš„é…ç½®ä¼šè¢«ä¼˜å…ˆä½¿ç”¨</li></ul><h3 id="ç½‘å…³"><a href="#ç½‘å…³" class="headerlink" title="ç½‘å…³"></a>ç½‘å…³</h3><p>ç½‘å…³æ˜¯æ‰€æœ‰æµé‡çš„å…¥å£ï¼ŒåŠŸèƒ½åŒ…æ‹¬è·¯ç”±è½¬å‘ã€æƒé™æ ¡éªŒã€é™æµæ§åˆ¶ã€‚æœ¬é¡¹ç›®ä½¿ç”¨Spring Cloud Gatewayä½œä¸ºç½‘å…³ã€‚<br><a href="https://docs.spring.io/spring-cloud-gateway/docs/3.0.8/reference/html/">Spring Cloud Gateway</a></p><ol><li><p>æ–°å»ºgulimall-gatewayæ¨¡å—<br><img src="/../../../../img/Pasted%20image%2020231004161619.png"></p></li><li><p>ä¿®æ”¹pomæ–‡ä»¶å’Œæ ¹ç›®å½•ä¸‹çš„pomæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.leggasai.gulimall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>gulimall-gateway<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>API Gateway<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>2020.0.1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.leggasai.gulimall<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gulimall-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ã€‚å…ˆåœ¨Nacosé…ç½®ä¸­å¿ƒå¤„ï¼Œæ–°å»ºä¸€ä¸ªå‘½åç©ºé—´gatewayï¼Œç”¨äºå­˜æ”¾å’Œgatewayç½‘å…³æœ‰å…³çš„é…ç½®é¡¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=gulimall-gateway  </span><br><span class="line">spring.cloud.nacos.config.server-addr=127.0.0.1:8848  </span><br><span class="line">spring.cloud.nacos.config.namespace=6f924aa0-39f6-4a86-9be9-f13562a9af7f</span><br></pre></td></tr></table></figure></li><li><p>æ’é™¤æ•°æ®åº“ç›¸å…³é…ç½®ã€‚åœ¨Application.javaä¸­æ·»åŠ å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦åˆ™è¿è¡Œä¼šæŠ¥é”™<br><img src="/../../../../img/Pasted%20image%2020231004164209.png"></p></blockquote></li><li><p>æ·»åŠ è·¯ç”±è§„åˆ™ï¼Œæ–°å»ºapplication.ymlï¼ˆæ­¤å¤„ä¸ºäº†æœ¬åœ°è°ƒå¼æ–¹ä¾¿ï¼Œä»¥åç»Ÿä¸€å†™åœ¨Nacosé…ç½®ä¸­å¿ƒï¼‰</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.baidu.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,</span> <span class="string">baidu</span></span><br></pre></td></tr></table></figure></li></ol><h1 id="5-å•†å“æœåŠ¡"><a href="#5-å•†å“æœåŠ¡" class="headerlink" title="5.å•†å“æœåŠ¡"></a>5.å•†å“æœåŠ¡</h1><h2 id="ä¸‰çº§åˆ†ç±»"><a href="#ä¸‰çº§åˆ†ç±»" class="headerlink" title="ä¸‰çº§åˆ†ç±»"></a>ä¸‰çº§åˆ†ç±»</h2><h3 id="é€’å½’æŸ¥è¯¢"><a href="#é€’å½’æŸ¥è¯¢" class="headerlink" title="é€’å½’æŸ¥è¯¢"></a>é€’å½’æŸ¥è¯¢</h3><blockquote><p>éœ€è¦å®ç°ç±»ä¼¼<code>äº¬ä¸œ</code>çš„å•†å“åˆ†ç±»æ ‘å½¢ç»“æ„ï¼Œ<code>pms_category</code>è¡¨ä¸­é€šè¿‡<code>cat_id</code>å’Œ<code>parent_cid</code>å»ºç«‹å±‚çº§å…³ç³»ã€‚ä½¿ç”¨é€’å½’æŸ¥è¯¢æ„å»ºæ ‘å½¢ç»“æ„<br><img src="/../../../../img/Pasted%20image%2020231004185021.png"></p></blockquote><p>é€»è¾‘ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CategoryServiceImpl.java</span></span><br><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> List&lt;CategoryEntity&gt; <span class="title function_">listWithTree</span><span class="params">()</span> &#123;  </span><br><span class="line">    List&lt;CategoryEntity&gt; entities = <span class="built_in">this</span>.baseMapper.selectList(<span class="literal">null</span>);  </span><br><span class="line">    List&lt;CategoryEntity&gt; levelOneMenus = entities.stream().filter(categoryEntity -&gt;  </span><br><span class="line">            categoryEntity.getParentCid().equals(<span class="number">0L</span>)  </span><br><span class="line">    ).map((item) -&gt; &#123;  </span><br><span class="line">        item.setChildren(getChildren(item, entities));  </span><br><span class="line">        <span class="keyword">return</span> item;  </span><br><span class="line">    &#125;).sorted((t1,t2)-&gt;&#123;  </span><br><span class="line">        <span class="keyword">return</span> (t1.getSort()==<span class="literal">null</span>?<span class="number">0</span>:t1.getSort())-(t2.getSort()==<span class="literal">null</span>?<span class="number">0</span>:t2.getSort());  </span><br><span class="line">    &#125;).collect(Collectors.toList());  </span><br><span class="line">    <span class="keyword">return</span> levelOneMenus;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> List&lt;CategoryEntity&gt; <span class="title function_">getChildren</span><span class="params">(CategoryEntity root,List&lt;CategoryEntity&gt; list)</span>&#123;  </span><br><span class="line">    List&lt;CategoryEntity&gt; children = list.stream().filter(categoryEntity -&gt;  </span><br><span class="line">            categoryEntity.getParentCid().equals(root.getCatId())  </span><br><span class="line">    ).map((item) -&gt; &#123;  </span><br><span class="line">        item.setChildren(getChildren(item, list));  </span><br><span class="line">        <span class="keyword">return</span> item;  </span><br><span class="line">    &#125;).sorted((t1,t2)-&gt;&#123;  </span><br><span class="line">        <span class="keyword">return</span> (t1.getSort()==<span class="literal">null</span>?<span class="number">0</span>:t1.getSort())-(t2.getSort()==<span class="literal">null</span>?<span class="number">0</span>:t2.getSort());  </span><br><span class="line">    &#125;).collect(Collectors.toList());  </span><br><span class="line">    <span class="keyword">return</span> children;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ç½‘å…³"><a href="#é…ç½®ç½‘å…³" class="headerlink" title="é…ç½®ç½‘å…³"></a>é…ç½®ç½‘å…³</h3><p>å…ˆå°†åå°ç®¡ç†çš„è¯·æ±‚è½¬å‘åˆ°ç½‘å…³<br>ä¿®æ”¹renren-fast-vueä¸­static\config\index.jsä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">SITE_CONFIG</span>[<span class="string">&#x27;baseUrl&#x27;</span>] = <span class="string">&#x27;http://localhost:88/api&#x27;</span>;</span><br></pre></td></tr></table></figure><p>é…ç½®gatewayçš„application.yml</p><blockquote><p>æ‹¦æˆªæ‰€æœ‰<code>/api/**</code>çš„è¯·æ±‚ï¼Œå¹¶è¿›è¡Œè·¯å¾„é‡å†™ï¼Œé‡å†™ä¸º<code>/renren-fast/**</code><br>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-cloud-gateway/docs/3.0.1/reference/html/#the-rewritepath-gatewayfilter-factory">Spring Cloud Gateway</a></p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.baidu.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,</span> <span class="string">baidu</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://renren-fast</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;/?.*),</span> <span class="string">/renren-fast/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure><p>æˆåŠŸæ˜¾ç¤ºéªŒè¯ç <br><img src="/../../../../img/Pasted%20image%2020231006155841.png"></p><h3 id="é…ç½®è·¨åŸŸ"><a href="#é…ç½®è·¨åŸŸ" class="headerlink" title="é…ç½®è·¨åŸŸ"></a>é…ç½®è·¨åŸŸ</h3><p><img src="/../../../../img/Pasted%20image%2020231006163056.png"></p><p>åœ¨gatewayç½‘å…³ä¸­é…ç½®è·¨åŸŸï¼Œæ·»åŠ configæ–‡ä»¶å¤¹<br><a href="https://blog.csdn.net/weixin_45481406/article/details/127573858?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169658266316800213064076%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=169658266316800213064076&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-127573858-null-null.142%5Ev94%5Einsert_down1&utm_term=springcloud%E7%BD%91%E5%85%B3%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F&spm=1018.2226.3001.4187">Spring Cloud Gateway è§£å†³è·¨åŸŸé—®é¢˜_springcloudgatewayè·¨åŸŸé…ç½®-CSDNåšå®¢</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;  </span><br><span class="line">    <span class="meta">@Bean</span>  </span><br><span class="line">    <span class="keyword">public</span> CorsWebFilter <span class="title function_">corsWebFilter</span><span class="params">()</span>&#123;  </span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();  </span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();  </span><br><span class="line">        <span class="comment">//1.é…ç½®è·¨åŸŸ  </span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);  </span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);  </span><br><span class="line">        corsConfiguration.addAllowedOriginPattern(<span class="string">&quot;*&quot;</span>);  </span><br><span class="line">        corsConfiguration.setAllowCredentials(<span class="literal">true</span>);  </span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>,corsConfiguration);  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsWebFilter</span>(source);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èœå•å¢åˆ æ”¹æŸ¥"><a href="#èœå•å¢åˆ æ”¹æŸ¥" class="headerlink" title="èœå•å¢åˆ æ”¹æŸ¥"></a>èœå•å¢åˆ æ”¹æŸ¥</h3><p>é…ç½®ç½‘å…³è·¯ç”±ï¼Œæ³¨æ„é¡ºåºï¼Œæ›´å…·ä½“çš„è·¯ç”±å¿…é¡»åœ¨å‰ï¼Œå¦åˆ™ä¼šè¢«<code>/api/**</code>æ‹¦æˆª</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">id:</span> <span class="string">product_route</span>  </span><br><span class="line">  <span class="attr">uri:</span> <span class="string">lb://gulimall-product</span>  </span><br><span class="line">  <span class="attr">predicates:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">Path=/api/product/**</span>  </span><br><span class="line">  <span class="attr">filters:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;/?.*),</span> <span class="string">/$\&#123;segment&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span>  </span><br><span class="line">  <span class="attr">uri:</span> <span class="string">lb://renren-fast</span>  </span><br><span class="line">  <span class="attr">predicates:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">Path=/api/**</span>  </span><br><span class="line">  <span class="attr">filters:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;/?.*),</span> <span class="string">/renren-fast/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨gulimall-productä¸­å¼€å¯æœåŠ¡å‘ç°</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span>  </span><br><span class="line">  <span class="attr">nacos:</span>  </span><br><span class="line">    <span class="attr">discovery:</span>  </span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span>  </span><br><span class="line">  </span><br><span class="line"><span class="attr">application:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">gulimall-product</span></span><br></pre></td></tr></table></figure><blockquote><p>åˆ é™¤</p></blockquote><p>å¼€å¯é€»è¾‘åˆ é™¤ï¼Œé…ç½®Mybatis-plus</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span>  </span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/**/*.xml</span>  </span><br><span class="line">  <span class="attr">global-config:</span>  </span><br><span class="line">    <span class="attr">db-config:</span>  </span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span>  </span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span>  </span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p>å¦‚æœé€»è¾‘åˆ é™¤å­—æ®µçš„å€¼éœ€è¦å’Œä¸Šè¿°å…¨å±€é…ç½®ä¸åŒï¼Œå¯ä»¥åœ¨å®ä½“ç±»ä¸Šé€šè¿‡æ³¨è§£å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * æ˜¯å¦æ˜¾ç¤º[0-ä¸æ˜¾ç¤ºï¼ˆåˆ é™¤ï¼‰ï¼Œ1æ˜¾ç¤ºï¼ˆåˆ é™¤ï¼‰]  </span></span><br><span class="line"><span class="comment"> */</span><span class="meta">@TableLogic(value = &quot;1&quot;,delval = &quot;0&quot;)</span>  </span><br><span class="line"><span class="keyword">private</span> Integer showStatus;</span><br></pre></td></tr></table></figure><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><h2 id="P16å®‰è£…SASS"><a href="#P16å®‰è£…SASS" class="headerlink" title="P16å®‰è£…SASS"></a>P16å®‰è£…SASS</h2><p>å…ˆæ‰¾å’Œæœ¬åœ°nodeç‰ˆæœ¬å¯¹åº”çš„node-sassçš„ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -version</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å‰ç«¯package.jsonä¸­node-sassç‰ˆæœ¬è‡³å¯¹åº”çš„ç‰ˆæœ¬</p><blockquote><p>æœ¬äººnodeä¸º14.17.1ï¼Œnode-sassä¸º4.14.1</p></blockquote><p>å•ç‹¬å®‰è£…node-sass</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npmÂ iÂ node-sass@4.14.1Â --sass_binary_site=https://npm.taobao.org/mirrors/node-sass/</span><br></pre></td></tr></table></figure><p>è‹¥æ‰§è¡ŒæˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>è‹¥å¤±è´¥,å…ˆæ¸…é™¤node-sassç¼“å­˜ï¼Œå†æŸ¥æ‰¾å…¶ä»–åŸå› ï¼Œå¯ä»¥é™ä½nodeç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm rebuild node-sass</span><br><span class="line">npm uninstall node-sass</span><br></pre></td></tr></table></figure><h2 id="P46éªŒè¯ç åŠ è½½ä¸å‡º"><a href="#P46éªŒè¯ç åŠ è½½ä¸å‡º" class="headerlink" title="P46éªŒè¯ç åŠ è½½ä¸å‡º"></a>P46éªŒè¯ç åŠ è½½ä¸å‡º</h2><p>é¦–å…ˆrenren-fastä¸è¦å¼•å…¥commonä¾èµ–ï¼Œè€Œæ˜¯æ ¹æ®renren-fastçš„springbootç‰ˆæœ¬å•ç‹¬å¼•å…¥å¯¹åº”çš„<code>spring-cloud-alibaba</code>å¹¶è¿›è¡Œä¾èµ–ç®¡ç†ã€‚ç„¶åå¼•å…¥<code>spring-cloud-starter-alibaba-nacos-discovery</code>å’Œ<code>spring-cloud-loadbalancer</code>(å®é™…å‘ç°ä¸å¼•å…¥ä¹Ÿè¡Œï¼Ÿ)<br><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">ç‰ˆæœ¬è¯´æ˜ Â· alibaba&#x2F;spring-cloud-alibaba Wiki (github.com)</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!--æ³¨å†Œå‘ç°--&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="SKUå’ŒSPUæ¦‚å¿µ"><a href="#SKUå’ŒSPUæ¦‚å¿µ" class="headerlink" title="SKUå’ŒSPUæ¦‚å¿µ"></a>SKUå’ŒSPUæ¦‚å¿µ</h2><blockquote><p>SPU:æ ‡å‡†åŒ–äº§å“å•å…ƒ(Standard Product Unit)ï¼Œæ˜¯å•†å“ä¿¡æ¯èšåˆçš„æœ€å°å•ä½ï¼Œæ˜¯ä¸€ç»„å¯å¤ç”¨æ ‡å‡†åŒ–ä¿¡æ¯çš„é›†åˆï¼Œä¸»è¦ä¹Ÿæ˜¯ä¸ºäº†åœ¨äº¤æ˜“ç«¯å¯¹ä¸€ç»„åŒç±»å‹å•†å“åšé¡µé¢çš„èšåˆå±•ç¤ºï¼Œè§£å†³çš„æ˜¯ä¸€å“å¤šå‹å·å¤šè§„æ ¼ç­‰ç­‰å¤šå±æ€§çš„é—®é¢˜ï¼›<br>ä¾‹å¦‚ï¼šiPhone X å¯ä»¥ç¡®å®šä¸€ä¸ªäº§å“å³ä¸ºä¸€ä¸ªSPUã€‚</p></blockquote><blockquote><p>SKU:æœ€å°çš„åº“å­˜å•ä½(StockKeeping Unit)ï¼Œ<code>sku</code>æ˜¯åº“å­˜å­˜è´®çš„æœ€å°å•ä½ï¼Œå•†å“çš„è¿›è´§ã€é”€å”®ã€å”®ä»·ã€åº“å­˜ç­‰æœ€ç»ˆéƒ½æ˜¯æ‰“åœ¨<code>sku</code>èº«ä¸Šçš„ï¼Œæœ€ç»ˆçš„äº¤æ˜“éƒ½å†³å®šåœ¨ä¸€ä¸ª<code>sku</code>ä¸ªä½“ä¸Šï¼›<br>ä¾‹å¦‚ï¼šiPhone X 64G é“¶è‰² åˆ™æ˜¯ä¸€ä¸ªSKUã€‚</p></blockquote><blockquote><p>å¯ä»¥ç†è§£ä¸ºç±»å’Œå¯¹è±¡çš„å…³ç³»ï¼ŒSPUæ˜¯ç±»&#x2F;æ¨¡æ¿ï¼ŒSKUæ˜¯å¯¹è±¡&#x2F;å®ä¾‹ï¼Œæœ‰å¤šç§å±æ€§ã€‚ä¸€ä¸ªSPUå¯¹åº”å¤šä¸ªSKUã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
          <category> Project </category>
          
          <category> è°·ç²’å•†åŸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡¤å‡°æ¶æ„ç¬”è®°</title>
      <link href="/posts/c1c1f0d5/"/>
      <url>/posts/c1c1f0d5/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æ¶æ„å¸ˆçš„è§†è§’"><a href="#1-æ¶æ„å¸ˆçš„è§†è§’" class="headerlink" title="1.æ¶æ„å¸ˆçš„è§†è§’"></a>1.æ¶æ„å¸ˆçš„è§†è§’</h1><h2 id="æœ¬åœ°äº‹åŠ¡"><a href="#æœ¬åœ°äº‹åŠ¡" class="headerlink" title="æœ¬åœ°äº‹åŠ¡"></a>æœ¬åœ°äº‹åŠ¡</h2><ul><li>Aï¼ˆatomicityåŸå­æ€§ï¼‰ï¼šåœ¨åŒä¸€é¡¹ä¸šåŠ¡å¤„ç†è¿‡ç¨‹ä¸­ï¼Œäº‹åŠ¡ä¿è¯äº†å¯¹å¤šä¸ªæ•°æ®çš„ä¿®æ”¹ï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶è¢«æ’¤é”€ã€‚</li><li>Cï¼ˆconsistencyä¸€è‡´æ€§)ï¼šäº‹åŠ¡å¿…é¡»æ˜¯ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚</li><li>I ï¼ˆisolationéš”ç¦»æ€§ï¼‰ï¼šåœ¨ä¸åŒçš„ä¸šåŠ¡å¤„ç†è¿‡ç¨‹ä¸­ï¼Œäº‹åŠ¡ä¿è¯äº†å„è‡ªä¸šåŠ¡æ­£åœ¨è¯»ã€å†™çš„æ•°æ®äº’ç›¸ç‹¬ç«‹ï¼Œä¸ä¼šå½¼æ­¤å½±å“ã€‚</li><li>Dï¼ˆdurabilityæŒä¹…æ€§)ï¼šäº‹åŠ¡åº”å½“ä¿è¯æ‰€æœ‰æˆåŠŸè¢«æäº¤çš„æ•°æ®ä¿®æ”¹éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°è¢«æŒä¹…åŒ–ï¼Œä¸ä¸¢å¤±æ•°æ®ã€‚</li></ul><blockquote><p><code>åŸå­æ€§</code>ã€<code>éš”ç¦»æ€§</code>ã€<code>æŒä¹…æ€§</code>éƒ½æ˜¯ä¸º<code>ä¸€è‡´æ€§</code>æœåŠ¡çš„</p></blockquote><h3 id="å¦‚ä½•ä¿è¯åŸå­æ€§å’ŒæŒä¹…æ€§"><a href="#å¦‚ä½•ä¿è¯åŸå­æ€§å’ŒæŒä¹…æ€§" class="headerlink" title="å¦‚ä½•ä¿è¯åŸå­æ€§å’ŒæŒä¹…æ€§"></a>å¦‚ä½•ä¿è¯åŸå­æ€§å’ŒæŒä¹…æ€§</h3><blockquote><p>å‘ç”Ÿå´©æºƒçš„æƒ…å†µ</p></blockquote><ul><li><strong>æœªæäº¤äº‹åŠ¡ï¼Œå†™å…¥åå´©æºƒ</strong>ï¼šç¨‹åºè¿˜æ²¡ä¿®æ”¹å®Œä¸‰ä¸ªæ•°æ®ï¼Œä½†æ•°æ®åº“å·²ç»å°†å…¶ä¸­ä¸€ä¸ªæˆ–ä¸¤ä¸ªæ•°æ®çš„å˜åŠ¨å†™å…¥ç£ç›˜ï¼Œæ­¤æ—¶å‡ºç°å´©æºƒï¼Œä¸€æ—¦é‡å¯ä¹‹åï¼Œæ•°æ®åº“å¿…é¡»è¦æœ‰åŠæ³•å¾—çŸ¥å´©æºƒå‰å‘ç”Ÿè¿‡ä¸€æ¬¡ä¸å®Œæ•´çš„è´­ç‰©æ“ä½œï¼Œå°†å·²ç»ä¿®æ”¹è¿‡çš„æ•°æ®ä»ç£ç›˜ä¸­æ¢å¤æˆæ²¡æœ‰æ”¹è¿‡çš„æ ·å­ï¼Œä»¥ä¿è¯åŸå­æ€§ã€‚(undo log)</li><li><strong>å·²æäº¤äº‹åŠ¡ï¼Œå†™å…¥å‰å´©æºƒ</strong>ï¼šç¨‹åºå·²ç»ä¿®æ”¹å®Œä¸‰ä¸ªæ•°æ®ï¼Œä½†æ•°æ®åº“è¿˜æœªå°†å…¨éƒ¨ä¸‰ä¸ªæ•°æ®çš„å˜åŠ¨éƒ½å†™å…¥åˆ°ç£ç›˜ï¼Œæ­¤æ—¶å‡ºç°å´©æºƒï¼Œä¸€æ—¦é‡å¯ä¹‹åï¼Œæ•°æ®åº“å¿…é¡»è¦æœ‰åŠæ³•å¾—çŸ¥å´©æºƒå‰å‘ç”Ÿè¿‡ä¸€æ¬¡å®Œæ•´çš„è´­ç‰©æ“ä½œï¼Œå°†è¿˜æ²¡æ¥å¾—åŠå†™å…¥ç£ç›˜çš„é‚£éƒ¨åˆ†æ•°æ®é‡æ–°å†™å…¥ï¼Œä»¥ä¿è¯æŒä¹…æ€§ã€‚ï¼ˆredo logï¼‰</li></ul><blockquote><p>äº‹åŠ¡æäº¤å’Œå†™å…¥æ—¶é—´åˆ†ç±»</p></blockquote><ul><li><strong>FORCE</strong>ï¼šå½“äº‹åŠ¡æäº¤åï¼Œè¦æ±‚å˜åŠ¨æ•°æ®å¿…é¡»åŒæ—¶å®Œæˆå†™å…¥åˆ™ç§°ä¸º FORCEï¼Œå¦‚æœä¸å¼ºåˆ¶å˜åŠ¨æ•°æ®å¿…é¡»åŒæ—¶å®Œæˆå†™å…¥åˆ™ç§°ä¸º NO-FORCEã€‚ç°å®ä¸­ç»å¤§å¤šæ•°æ•°æ®åº“é‡‡ç”¨çš„éƒ½æ˜¯ NO-FORCE ç­–ç•¥ï¼Œå› ä¸ºåªè¦æœ‰äº†æ—¥å¿—ï¼Œå˜åŠ¨æ•°æ®éšæ—¶å¯ä»¥æŒä¹…åŒ–ï¼Œä»ä¼˜åŒ–ç£ç›˜ I&#x2F;O æ€§èƒ½è€ƒè™‘ï¼Œæ²¡æœ‰å¿…è¦å¼ºåˆ¶æ•°æ®å†™å…¥ç«‹å³è¿›è¡Œã€‚</li><li><strong>STEAL</strong>ï¼šåœ¨äº‹åŠ¡æäº¤å‰ï¼Œå…è®¸å˜åŠ¨æ•°æ®æå‰å†™å…¥åˆ™ç§°ä¸º STEALï¼Œä¸å…è®¸åˆ™ç§°ä¸º NO-STEALã€‚ä»ä¼˜åŒ–ç£ç›˜ I&#x2F;O æ€§èƒ½è€ƒè™‘ï¼Œå…è®¸æ•°æ®æå‰å†™å…¥ï¼Œæœ‰åˆ©äºåˆ©ç”¨ç©ºé—² I&#x2F;O èµ„æºï¼Œä¹Ÿæœ‰åˆ©äºèŠ‚çœæ•°æ®åº“ç¼“å­˜åŒºçš„å†…å­˜ã€‚</li></ul><blockquote><p>æ¢å¤å´©æºƒæ—¶çš„æ“ä½œ</p></blockquote><ul><li><strong>åˆ†æé˜¶æ®µ</strong>ï¼ˆAnalysisï¼‰ï¼šè¯¥é˜¶æ®µä»æœ€åä¸€æ¬¡æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼Œå¯ç†è§£ä¸ºåœ¨è¿™ä¸ªç‚¹ä¹‹å‰æ‰€æœ‰åº”è¯¥æŒä¹…åŒ–çš„å˜åŠ¨éƒ½å·²å®‰å…¨è½ç›˜ï¼‰å¼€å§‹æ‰«ææ—¥å¿—ï¼Œæ‰¾å‡ºæ‰€æœ‰æ²¡æœ‰ End Record çš„äº‹åŠ¡ï¼Œç»„æˆå¾…æ¢å¤çš„äº‹åŠ¡é›†åˆï¼Œè¿™ä¸ªé›†åˆè‡³å°‘ä¼šåŒ…æ‹¬ Transaction Table å’Œ Dirty Page Table ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ã€‚</li><li><strong>é‡åšé˜¶æ®µ</strong>ï¼ˆRedoï¼‰ï¼šè¯¥é˜¶æ®µä¾æ®åˆ†æé˜¶æ®µä¸­äº§ç”Ÿçš„å¾…æ¢å¤çš„äº‹åŠ¡é›†åˆæ¥é‡æ¼”å†å²ï¼ˆRepeat Historyï¼‰ï¼Œå…·ä½“æ“ä½œä¸ºï¼šæ‰¾å‡ºæ‰€æœ‰åŒ…å« Commit Record çš„æ—¥å¿—ï¼Œå°†è¿™äº›æ—¥å¿—ä¿®æ”¹çš„æ•°æ®å†™å…¥ç£ç›˜ï¼Œå†™å…¥å®Œæˆååœ¨æ—¥å¿—ä¸­å¢åŠ ä¸€æ¡ End Recordï¼Œç„¶åç§»é™¤å‡ºå¾…æ¢å¤äº‹åŠ¡é›†åˆã€‚</li><li><strong>å›æ»šé˜¶æ®µ</strong>ï¼ˆUndoï¼‰ï¼šè¯¥é˜¶æ®µå¤„ç†ç»è¿‡åˆ†æã€é‡åšé˜¶æ®µåå‰©ä½™çš„æ¢å¤äº‹åŠ¡é›†åˆï¼Œæ­¤æ—¶å‰©ä¸‹çš„éƒ½æ˜¯éœ€è¦å›æ»šçš„äº‹åŠ¡ï¼Œå®ƒä»¬è¢«ç§°ä¸º Loserï¼Œæ ¹æ® Undo Log ä¸­çš„ä¿¡æ¯ï¼Œå°†å·²ç»æå‰å†™å…¥ç£ç›˜çš„ä¿¡æ¯é‡æ–°æ”¹å†™å›å»ï¼Œä»¥è¾¾åˆ°å›æ»šè¿™äº› Loser äº‹åŠ¡çš„ç›®çš„ã€‚</li></ul><p><img src="/../../../img/Pasted%20image%2020230922180552.png"></p><h3 id="å¦‚ä½•ä¿è¯éš”ç¦»æ€§"><a href="#å¦‚ä½•ä¿è¯éš”ç¦»æ€§" class="headerlink" title="å¦‚ä½•ä¿è¯éš”ç¦»æ€§"></a>å¦‚ä½•ä¿è¯éš”ç¦»æ€§</h3><blockquote><p>ç°ä»£æ•°æ®åº“çš„ä¸‰ç§é”</p></blockquote><ul><li><p><strong>å†™é”</strong>ï¼ˆWrite Lockï¼Œä¹Ÿå«ä½œæ’ä»–é”ï¼ŒeXclusive Lockï¼Œç®€å†™ä¸º X-Lockï¼‰ï¼šå¦‚æœæ•°æ®æœ‰åŠ å†™é”ï¼Œå°±åªæœ‰æŒæœ‰å†™é”çš„äº‹åŠ¡æ‰èƒ½å¯¹æ•°æ®è¿›è¡Œå†™å…¥æ“ä½œï¼Œæ•°æ®åŠ æŒç€å†™é”æ—¶ï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½å†™å…¥æ•°æ®ï¼Œä¹Ÿä¸èƒ½æ–½åŠ è¯»é”ã€‚</p></li><li><p><strong>è¯»é”</strong>ï¼ˆRead Lockï¼Œä¹Ÿå«ä½œå…±äº«é”ï¼ŒShared Lockï¼Œç®€å†™ä¸º S-Lockï¼‰ï¼šå¤šä¸ªäº‹åŠ¡å¯ä»¥å¯¹åŒä¸€ä¸ªæ•°æ®æ·»åŠ å¤šä¸ªè¯»é”ï¼Œæ•°æ®è¢«åŠ ä¸Šè¯»é”åå°±ä¸èƒ½å†è¢«åŠ ä¸Šå†™é”ï¼Œæ‰€ä»¥å…¶ä»–äº‹åŠ¡ä¸èƒ½å¯¹è¯¥æ•°æ®è¿›è¡Œå†™å…¥ï¼Œä½†ä»ç„¶å¯ä»¥è¯»å–ã€‚å¯¹äºæŒæœ‰è¯»é”çš„äº‹åŠ¡ï¼Œå¦‚æœè¯¥æ•°æ®åªæœ‰å®ƒè‡ªå·±ä¸€ä¸ªäº‹åŠ¡åŠ äº†è¯»é”ï¼Œå…è®¸ç›´æ¥å°†å…¶å‡çº§ä¸ºå†™é”ï¼Œç„¶åå†™å…¥æ•°æ®ã€‚</p></li><li><p><strong>èŒƒå›´é”</strong>ï¼ˆRange Lockï¼‰ï¼šå¯¹äºæŸä¸ªèŒƒå›´ç›´æ¥åŠ æ’ä»–é”ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…çš„æ•°æ®ä¸èƒ½è¢«å†™å…¥(ä¸å¯æ–°å¢æˆ–åˆ é™¤)ã€‚å¦‚ä¸‹è¯­å¥æ˜¯å…¸å‹çš„åŠ èŒƒå›´é”çš„ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> price <span class="operator">&lt;</span> <span class="number">100</span> <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>å››ç§éš”ç¦»çº§åˆ«</p></blockquote><ul><li>å¯ä¸²è¡ŒåŒ–ï¼šå¯¹æ‰€æœ‰æ“ä½œåŠ å†™é”ï¼Œè¯»é”ï¼ŒèŒƒå›´é”ã€‚æ€§èƒ½å·®ï¼Œéš”ç¦»çº§åˆ«æœ€é«˜ã€‚</li><li>å¯é‡å¤è¯»ï¼ˆå¹»è¯»ï¼‰ï¼šå¯¹äº‹åŠ¡æ‰€æ¶‰åŠçš„æ•°æ®åŠ è¯»é”å’Œå†™é”ï¼Œä¸”ä¸€ç›´æŒæœ‰è‡³äº‹åŠ¡ç»“æŸï¼Œä½†ä¸å†åŠ èŒƒå›´é”ã€‚<blockquote><p>æ³¨æ„ï¼Œè¿™é‡Œçš„æ’å…¥æ“ä½œä¸éœ€è¦åŠ å†™é”ã€‚</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> price <span class="operator">&lt;</span> <span class="number">100</span><span class="comment">/* æ—¶é—´é¡ºåºï¼š1ï¼Œäº‹åŠ¡ï¼š T1 */</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> books(name,price) <span class="keyword">VALUES</span> (<span class="string">&#x27;æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº&#x27;</span>,<span class="number">90</span>)<span class="comment">/* æ—¶é—´é¡ºåºï¼š2ï¼Œäº‹åŠ¡ï¼š T2 */</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> price <span class="operator">&lt;</span> <span class="number">100</span><span class="comment">/* æ—¶é—´é¡ºåºï¼š3ï¼Œäº‹åŠ¡ï¼š T1 */</span></span><br></pre></td></tr></table></figure></li><li>è¯»å·²æäº¤ï¼ˆå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»ï¼‰ï¼šå¯¹äº‹åŠ¡æ¶‰åŠçš„æ•°æ®åŠ çš„å†™é”ä¼šä¸€ç›´æŒç»­åˆ°äº‹åŠ¡ç»“æŸï¼Œä½†åŠ çš„è¯»é”åœ¨æŸ¥è¯¢æ“ä½œå®Œæˆåå°±é©¬ä¸Šä¼šé‡Šæ”¾ã€‚<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;   <span class="comment">/* æ—¶é—´é¡ºåºï¼š1ï¼Œäº‹åŠ¡ï¼š T1 ç«‹åˆ»é‡Šæ”¾è¯»é”ï¼Œå› æ­¤ä¹‹åå¯ä»¥è¿›è¡Œupdateæ“ä½œ*/</span></span><br><span class="line"><span class="keyword">UPDATE</span> books <span class="keyword">SET</span> price <span class="operator">=</span> <span class="number">110</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>; <span class="keyword">COMMIT</span>;<span class="comment">/* æ—¶é—´é¡ºåºï¼š2ï¼Œäº‹åŠ¡ï¼š T2 */</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>; <span class="keyword">COMMIT</span>;   <span class="comment">/* æ—¶é—´é¡ºåºï¼š3ï¼Œäº‹åŠ¡ï¼š T1 */</span></span><br></pre></td></tr></table></figure></li><li>è¯»æœªæäº¤ï¼ˆå¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»ï¼‰ï¼šå¯¹äº‹åŠ¡æ¶‰åŠçš„æ•°æ®åªåŠ å†™é”ï¼Œä¼šä¸€ç›´æŒç»­åˆ°äº‹åŠ¡ç»“æŸï¼Œä½†å®Œå…¨ä¸åŠ è¯»é”ã€‚<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;   <span class="comment">/* æ—¶é—´é¡ºåºï¼š1ï¼Œäº‹åŠ¡ï¼š T1 */</span></span><br><span class="line"><span class="comment">/* æ³¨æ„æ²¡æœ‰COMMIT */</span></span><br><span class="line"><span class="keyword">UPDATE</span> books <span class="keyword">SET</span> price <span class="operator">=</span> <span class="number">90</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;<span class="comment">/* æ—¶é—´é¡ºåºï¼š2ï¼Œäº‹åŠ¡ï¼š T2 */</span></span><br><span class="line"><span class="comment">/* è¿™æ¡SELECTæ¨¡æ‹Ÿè´­ä¹¦çš„æ“ä½œçš„é€»è¾‘ */</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;  <span class="comment">/* æ—¶é—´é¡ºåºï¼š3ï¼Œäº‹åŠ¡ï¼š T1 è¿™é‡Œä¸éœ€è¦åŠ è¯»é”ï¼Œå› æ­¤å¯ä»¥åœ¨æœ‰å†™é”çš„æƒ…å†µä¸‹è¿›è¡Œè¯»æ“ä½œ*/</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å…¨å±€äº‹åŠ¡"><a href="#å…¨å±€äº‹åŠ¡" class="headerlink" title="å…¨å±€äº‹åŠ¡"></a>å…¨å±€äº‹åŠ¡</h2><blockquote><p>åœ¨æœ¬èŠ‚é‡Œï¼Œå…¨å±€äº‹åŠ¡è¢«é™å®šä¸ºä¸€ç§é€‚ç”¨äºå•ä¸ªæœåŠ¡ä½¿ç”¨å¤šä¸ªæ•°æ®æºåœºæ™¯çš„äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹æœ¬ç« çš„<a href="http://icyfenix.cn/architect-perspective/general-architecture/transaction/">åœºæ™¯äº‹ä¾‹</a>åšå¦å¤–ä¸€ç§å‡è®¾ï¼šå¦‚æœä¹¦åº—çš„<code>ç”¨æˆ·</code>ã€<code>å•†å®¶</code>ã€<code>ä»“åº“</code>åˆ†åˆ«å¤„äºä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œå…¶ä»–æ¡ä»¶ä»ä¸ä¹‹å‰ç›¸åŒï¼Œé‚£æƒ…å†µä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿå‡å¦‚ä½ å¹³æ—¶ä»¥å£°æ˜å¼äº‹åŠ¡æ¥ç¼–ç ï¼Œé‚£å®ƒä¸æœ¬åœ°äº‹åŠ¡çœ‹èµ·æ¥å¯èƒ½æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œéƒ½æ˜¯æ ‡ä¸ª<code>@Transactional</code>æ³¨è§£è€Œå·²ï¼Œä½†å¦‚æœä»¥ç¼–ç¨‹å¼äº‹åŠ¡æ¥å®ç°çš„è¯ï¼Œå°±èƒ½åœ¨å†™æ³•ä¸Šçœ‹å‡ºå·®å¼‚ï¼Œä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyBook</span><span class="params">(PaymentBill bill)</span> &#123;</span><br><span class="line">    userTransaction.begin();</span><br><span class="line">    warehouseTransaction.begin();</span><br><span class="line">    businessTransaction.begin();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">        userAccountService.pay(bill.getMoney());</span><br><span class="line">        warehouseService.deliver(bill.getItems());</span><br><span class="line">        businessAccountService.receipt(bill.getMoney());</span><br><span class="line">        userTransaction.commit();</span><br><span class="line">        warehouseTransaction.commit();</span><br><span class="line">        businessTransaction.commit();</span><br><span class="line">&#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">        userTransaction.rollback();</span><br><span class="line">        warehouseTransaction.rollback();</span><br><span class="line">        businessTransaction.rollback();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœbusinessTransaction.commit()æ‰§è¡Œå‡ºé”™ï¼Œåˆ™è¢«å¼‚å¸¸æ•è·ï¼Œæ‰§è¡Œrollbackæ–¹æ³•ï¼Œä½†æ˜¯æ­¤æ—¶userTransactionå’ŒwarehouseTransactionå·²ç»commit(),å›æ»šå·²æ— æµäºäº‹ï¼Œäº‹åŠ¡çš„æ•´ä¸ªä¸€è‡´æ€§è¢«ç ´åã€‚</p></blockquote><h3 id="ä¸¤æ®µå¼æäº¤ï¼ˆ2pc"><a href="#ä¸¤æ®µå¼æäº¤ï¼ˆ2pc" class="headerlink" title="ä¸¤æ®µå¼æäº¤ï¼ˆ2pc)"></a>ä¸¤æ®µå¼æäº¤ï¼ˆ2pc)</h3><ul><li><strong>å‡†å¤‡é˜¶æ®µ</strong>ï¼šåˆå«ä½œæŠ•ç¥¨é˜¶æ®µï¼Œåœ¨è¿™ä¸€é˜¶æ®µï¼Œåè°ƒè€…è¯¢é—®äº‹åŠ¡çš„æ‰€æœ‰å‚ä¸è€…æ˜¯å¦å‡†å¤‡å¥½æäº¤ï¼Œå‚ä¸è€…å¦‚æœå·²ç»å‡†å¤‡å¥½æäº¤åˆ™å›å¤ Preparedï¼Œå¦åˆ™å›å¤ Non-Preparedã€‚è¿™é‡Œæ‰€è¯´çš„å‡†å¤‡æ“ä½œè·Ÿäººç±»è¯­è¨€ä¸­é€šå¸¸ç†è§£çš„å‡†å¤‡å¹¶ä¸ç›¸åŒï¼Œå¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œå‡†å¤‡æ“ä½œæ˜¯åœ¨é‡åšæ—¥å¿—ä¸­è®°å½•å…¨éƒ¨äº‹åŠ¡æäº¤æ“ä½œæ‰€è¦åšçš„å†…å®¹ï¼Œå®ƒä¸æœ¬åœ°äº‹åŠ¡ä¸­çœŸæ­£æäº¤çš„åŒºåˆ«åªæ˜¯æš‚ä¸å†™å…¥æœ€åä¸€æ¡ Commit Record è€Œå·²ï¼Œè¿™æ„å‘³ç€åœ¨åšå®Œæ•°æ®æŒä¹…åŒ–åå¹¶ä¸ç«‹å³é‡Šæ”¾éš”ç¦»æ€§ï¼Œå³ä»ç»§ç»­æŒæœ‰é”ï¼Œç»´æŒæ•°æ®å¯¹å…¶ä»–éäº‹åŠ¡å†…è§‚å¯Ÿè€…çš„éš”ç¦»çŠ¶æ€ã€‚(æŒ‡äº‹åŠ¡æ“ä½œå·²æ‰§è¡Œï¼Œä½†å°šæœªcommit)</li><li><strong>æäº¤é˜¶æ®µ</strong>ï¼šåˆå«ä½œæ‰§è¡Œé˜¶æ®µï¼Œåè°ƒè€…å¦‚æœåœ¨ä¸Šä¸€é˜¶æ®µæ”¶åˆ°æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…å›å¤çš„ Prepared æ¶ˆæ¯ï¼Œåˆ™å…ˆè‡ªå·±åœ¨æœ¬åœ°æŒä¹…åŒ–äº‹åŠ¡çŠ¶æ€ä¸º Commitï¼Œ&lt;æ³¨æ„è¿™ä¸ªæ—¶é—´ç‚¹å¯èƒ½ä¼šå‡ºç°ç½‘ç»œå´©æºƒ&gt;åœ¨æ­¤æ“ä½œå®Œæˆåå‘æ‰€æœ‰å‚ä¸è€…å‘é€ Commit æŒ‡ä»¤ï¼Œæ‰€æœ‰å‚ä¸è€…ç«‹å³æ‰§è¡Œæäº¤æ“ä½œï¼›å¦åˆ™ï¼Œä»»æ„ä¸€ä¸ªå‚ä¸è€…å›å¤äº† Non-Prepared æ¶ˆæ¯ï¼Œæˆ–ä»»æ„ä¸€ä¸ªå‚ä¸è€…è¶…æ—¶æœªå›å¤ï¼Œåè°ƒè€…å°†è‡ªå·±çš„äº‹åŠ¡çŠ¶æ€æŒä¹…åŒ–ä¸º Abort ä¹‹åï¼Œå‘æ‰€æœ‰å‚ä¸è€…å‘é€ Abort æŒ‡ä»¤ï¼Œå‚ä¸è€…ç«‹å³æ‰§è¡Œå›æ»šæ“ä½œã€‚å¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œè¿™ä¸ªé˜¶æ®µçš„æäº¤æ“ä½œåº”æ˜¯å¾ˆè½»é‡çš„ï¼Œä»…ä»…æ˜¯æŒä¹…åŒ–ä¸€æ¡ Commit Record è€Œå·²ï¼Œé€šå¸¸èƒ½å¤Ÿå¿«é€Ÿå®Œæˆï¼Œåªæœ‰æ”¶åˆ° Abort æŒ‡ä»¤æ—¶ï¼Œæ‰éœ€è¦æ ¹æ®å›æ»šæ—¥å¿—æ¸…ç†å·²æäº¤çš„æ•°æ®ï¼Œè¿™å¯èƒ½æ˜¯ç›¸å¯¹é‡è´Ÿè½½çš„æ“ä½œã€‚(å¦‚æœæ‰€æœ‰å‚ä¸è€…çš„äº‹åŠ¡éƒ½æ“ä½œæˆåŠŸï¼Œä¹Ÿå°±æ˜¯éƒ½å‡†å¤‡å¥½äº†ï¼Œåˆ™ä¸€èµ·commitï¼Œå¦åˆ™å…¨éƒ¨å›æ»šï¼ˆå› ä¸ºæ­¤æ—¶å¤§å®¶éƒ½å°šæœªcommitï¼Œå¯ä»¥æ‰§è¡Œrollbackï¼‰)</li></ul><p><img src="/../../../img/Pasted%20image%2020230922192109.png"></p><blockquote><p>ä¸¤æ®µå¼æäº¤çš„ç¼ºé™·</p></blockquote><ul><li>å•ç‚¹é—®é¢˜ï¼Œåè°ƒè€…å®•æœºå½±å“å…¨éƒ¨å‚ä¸è€…ã€‚</li><li>æ€§èƒ½é—®é¢˜ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°ä¸¤æ¬¡è¿œç¨‹æœåŠ¡è°ƒç”¨ï¼Œä¸‰æ¬¡æ•°æ®æŒä¹…åŒ–</li><li>ä¸€è‡´æ€§é£é™©ï¼Œåè°ƒè€…commitåï¼Œç½‘ç»œå´©æºƒï¼Œå‚ä¸è€…æ— æ³•commit</li></ul><h3 id="ä¸‰æ®µå¼æäº¤ï¼ˆ3pcï¼‰"><a href="#ä¸‰æ®µå¼æäº¤ï¼ˆ3pcï¼‰" class="headerlink" title="ä¸‰æ®µå¼æäº¤ï¼ˆ3pcï¼‰"></a>ä¸‰æ®µå¼æäº¤ï¼ˆ3pcï¼‰</h3><p>ä¸‰æ®µå¼æäº¤æŠŠåŸæœ¬çš„ä¸¤æ®µå¼æäº¤çš„å‡†å¤‡é˜¶æ®µå†ç»†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ç§°ä¸º CanCommitã€PreCommitï¼ŒæŠŠæäº¤é˜¶æ®µæ”¹ç§°ä¸º DoCommit é˜¶æ®µã€‚å…¶ä¸­ï¼Œæ–°å¢çš„ CanCommit æ˜¯ä¸€ä¸ªè¯¢é—®é˜¶æ®µï¼Œåè°ƒè€…è®©æ¯ä¸ªå‚ä¸çš„æ•°æ®åº“æ ¹æ®è‡ªèº«çŠ¶æ€ï¼Œè¯„ä¼°è¯¥äº‹åŠ¡æ˜¯å¦æœ‰å¯èƒ½é¡ºåˆ©å®Œæˆã€‚å°†å‡†å¤‡é˜¶æ®µä¸€åˆ†ä¸ºäºŒçš„ç†ç”±æ˜¯è¿™ä¸ªé˜¶æ®µæ˜¯é‡è´Ÿè½½çš„æ“ä½œï¼Œä¸€æ—¦åè°ƒè€…å‘å‡ºå¼€å§‹å‡†å¤‡çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªå‚ä¸è€…éƒ½å°†é©¬ä¸Šå¼€å§‹å†™é‡åšæ—¥å¿—ï¼Œå®ƒä»¬æ‰€æ¶‰åŠçš„æ•°æ®èµ„æºå³è¢«é”ä½ï¼Œå¦‚æœæ­¤æ—¶æŸä¸€ä¸ªå‚ä¸è€…å®£å‘Šæ— æ³•å®Œæˆæäº¤ï¼Œç›¸å½“äºå¤§å®¶éƒ½ç™½åšäº†ä¸€è½®æ— ç”¨åŠŸã€‚æ‰€ä»¥ï¼Œå¢åŠ ä¸€è½®è¯¢é—®é˜¶æ®µï¼Œå¦‚æœéƒ½å¾—åˆ°äº†æ­£é¢çš„å“åº”ï¼Œé‚£äº‹åŠ¡èƒ½å¤ŸæˆåŠŸæäº¤çš„æŠŠæ¡å°±æ¯”è¾ƒå¤§äº†ï¼Œè¿™ä¹Ÿæ„å‘³ç€å› æŸä¸ªå‚ä¸è€…æäº¤æ—¶å‘ç”Ÿå´©æºƒè€Œå¯¼è‡´å¤§å®¶å…¨éƒ¨å›æ»šçš„é£é™©ç›¸å¯¹å˜å°ã€‚å› æ­¤ï¼Œåœ¨äº‹åŠ¡éœ€è¦å›æ»šçš„åœºæ™¯ä¸­ï¼Œä¸‰æ®µå¼çš„æ€§èƒ½é€šå¸¸æ˜¯è¦æ¯”ä¸¤æ®µå¼å¥½å¾ˆå¤šçš„ï¼Œä½†åœ¨äº‹åŠ¡èƒ½å¤Ÿæ­£å¸¸æäº¤çš„åœºæ™¯ä¸­ï¼Œä¸¤è€…çš„æ€§èƒ½éƒ½ä¾ç„¶å¾ˆå·®ï¼Œç”šè‡³ä¸‰æ®µå¼å› ä¸ºå¤šäº†ä¸€æ¬¡è¯¢é—®ï¼Œè¿˜è¦ç¨å¾®æ›´å·®ä¸€äº›ã€‚</p><ul><li>CanCommité˜¶æ®µå¤§å¹…å‡å°‘äº†äºŒæ®µå¼ä¸­å‡†å¤‡é˜¶æ®µå‚ä¸è€…å¯èƒ½å‡ºé”™çš„æƒ…å†µ</li><li>å‚ä¸è€…è¶…æ—¶è‡ªåŠ¨æäº¤æœºåˆ¶ï¼Œè§£å†³äº†äºŒæ®µå¼çš„<code>å•ç‚¹é—®é¢˜</code></li><li>å¦‚æœåè°ƒè€…æƒ³å‘é€AbortæŒ‡ä»¤ï¼Œä½†ç½‘ç»œå´©æºƒï¼Œå‚ä¸è€…è¶…æ—¶åä¼šé”™è¯¯çš„è¿›è¡ŒCommitï¼ŒåŒæ ·å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li></ul><h2 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h2><h3 id="CAPå’ŒACID"><a href="#CAPå’ŒACID" class="headerlink" title="CAPå’ŒACID"></a>CAPå’ŒACID</h3><blockquote><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ¶‰åŠå…±äº«æ•°æ®é—®é¢˜æ—¶ï¼Œä»¥ä¸‹ä¸‰ä¸ªç‰¹å¾æœ€å¤šåŒæ—¶æ»¡è¶³ä¸¤ä¸ªã€‚</p></blockquote><ul><li><p><strong>ä¸€è‡´æ€§</strong>ï¼ˆ<strong>C</strong>onsistencyï¼‰ï¼šä»£è¡¨æ•°æ®åœ¨ä»»ä½•æ—¶åˆ»ã€ä»»ä½•åˆ†å¸ƒå¼èŠ‚ç‚¹ä¸­æ‰€çœ‹åˆ°çš„éƒ½æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚ä¸€è‡´æ€§åœ¨åˆ†å¸ƒå¼ç ”ç©¶ä¸­æ˜¯æœ‰ä¸¥è‚ƒå®šä¹‰ã€æœ‰å¤šç§ç»†åˆ†ç±»å‹çš„æ¦‚å¿µï¼Œä»¥åè®¨è®ºåˆ†å¸ƒå¼å…±è¯†ç®—æ³•æ—¶ï¼Œæˆ‘ä»¬è¿˜ä¼šå†æåˆ°ä¸€è‡´æ€§ï¼Œé‚£ç§é¢å‘å‰¯æœ¬å¤åˆ¶çš„ä¸€è‡´æ€§ä¸è¿™é‡Œé¢å‘æ•°æ®åº“çŠ¶æ€çš„ä¸€è‡´æ€§ä¸¥æ ¼æ¥è¯´å¹¶ä¸å®Œå…¨ç­‰åŒï¼Œå…·ä½“å·®åˆ«æˆ‘ä»¬å°†åœ¨åç»­åˆ†å¸ƒå¼å…±è¯†ç®—æ³•ä¸­å†ä½œæ¢è®¨ã€‚</p></li><li><p><strong>å¯ç”¨æ€§</strong>ï¼ˆ<strong>A</strong>vailabilityï¼‰ï¼šä»£è¡¨ç³»ç»Ÿä¸é—´æ–­åœ°æä¾›æœåŠ¡çš„èƒ½åŠ›ï¼Œç†è§£å¯ç”¨æ€§è¦å…ˆç†è§£ä¸å…¶å¯†åˆ‡ç›¸å…³ä¸¤ä¸ªæŒ‡æ ‡ï¼šå¯é æ€§ï¼ˆReliabilityï¼‰å’Œå¯ç»´æŠ¤æ€§ï¼ˆServiceabilityï¼‰ã€‚å¯é æ€§ä½¿ç”¨å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMean Time Between Failureï¼ŒMTBFï¼‰æ¥åº¦é‡ï¼›å¯ç»´æŠ¤æ€§ä½¿ç”¨å¹³å‡å¯ä¿®å¤æ—¶é—´ï¼ˆMean Time To Repairï¼ŒMTTRï¼‰æ¥åº¦é‡ã€‚å¯ç”¨æ€§è¡¡é‡ç³»ç»Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨çš„æ—¶é—´ä¸æ€»æ—¶é—´ä¹‹æ¯”ï¼Œå…¶è¡¨å¾ä¸ºï¼šA&#x3D;MTBF&#x2F;ï¼ˆMTBF+MTTRï¼‰ï¼Œå³å¯ç”¨æ€§æ˜¯ç”±å¯é æ€§å’Œå¯ç»´æŠ¤æ€§è®¡ç®—å¾—å‡ºçš„æ¯”ä¾‹å€¼ï¼Œè­¬å¦‚ 99.9999%å¯ç”¨ï¼Œå³ä»£è¡¨å¹³å‡å¹´æ•…éšœä¿®å¤æ—¶é—´ä¸º 32 ç§’ã€‚</p></li><li><p><strong>åˆ†åŒºå®¹å¿æ€§</strong>ï¼ˆ<strong>P</strong>artition Toleranceï¼‰ï¼šä»£è¡¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­éƒ¨åˆ†èŠ‚ç‚¹å› ç½‘ç»œåŸå› è€Œå½¼æ­¤å¤±è”åï¼Œå³ä¸å…¶ä»–èŠ‚ç‚¹å½¢æˆâ€œç½‘ç»œåˆ†åŒºâ€æ—¶ï¼Œç³»ç»Ÿä»èƒ½æ­£ç¡®åœ°æä¾›æœåŠ¡çš„èƒ½åŠ›ã€‚</p></li></ul><h3 id="å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´æ€§"><a href="#å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´æ€§" class="headerlink" title="å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´æ€§"></a>å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´æ€§</h3><ul><li>å¼ºä¸€è‡´æ€§ï¼ˆçº¿æ€§ä¸€è‡´æ€§ï¼‰ï¼š<ul><li>å¤åˆ¶æ˜¯åŒæ­¥çš„</li><li>ä»»ä½•ä¸€æ¬¡è¯»éƒ½èƒ½è¯»åˆ°æŸä¸ªæ•°æ®çš„æœ€è¿‘ä¸€æ¬¡å†™çš„æ•°æ®ã€‚</li><li>ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼Œçœ‹åˆ°çš„æ“ä½œé¡ºåºï¼Œéƒ½å’Œå…¨å±€æ—¶é’Ÿä¸‹çš„é¡ºåºä¸€è‡´ã€‚ï¼ˆç®€è¨€ä¹‹ï¼Œåœ¨ä»»æ„æ—¶åˆ»ï¼Œæ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚ï¼‰</li></ul></li><li>å¼±ä¸€è‡´æ€§ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ï¼š<ul><li>å¤åˆ¶æ˜¯å¼‚æ­¥çš„</li><li>æ•°æ®æ›´æ–°åï¼Œå¦‚æœèƒ½å®¹å¿åç»­çš„è®¿é—®åªèƒ½è®¿é—®åˆ°éƒ¨åˆ†æˆ–è€…å…¨éƒ¨è®¿é—®ä¸åˆ°ï¼Œåˆ™æ˜¯å¼±ä¸€è‡´æ€§ã€‚</li><li>æœ€ç»ˆä¸€è‡´æ€§å°±å±äºå¼±ä¸€è‡´æ€§ã€‚</li></ul></li><li>æœ€ç»ˆä¸€è‡´æ€§ï¼š<ul><li>ä¸ä¿è¯åœ¨ä»»æ„æ—¶åˆ»ä»»æ„èŠ‚ç‚¹ä¸Šçš„åŒä¸€ä»½æ•°æ®éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„è¿ç§»ï¼Œä¸åŒèŠ‚ç‚¹ä¸Šçš„åŒä¸€ä»½æ•°æ®æ€»æ˜¯åœ¨å‘è¶‹åŒçš„æ–¹å‘å˜åŒ–ã€‚</li><li>ç®€å•è¯´ï¼Œå°±æ˜¯åœ¨ä¸€æ®µæ—¶é—´åï¼ŒèŠ‚ç‚¹é—´çš„æ•°æ®ä¼šæœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€ã€‚</li></ul></li></ul><h3 id="æŸ”æ€§äº‹åŠ¡å’Œåˆšæ€§äº‹åŠ¡"><a href="#æŸ”æ€§äº‹åŠ¡å’Œåˆšæ€§äº‹åŠ¡" class="headerlink" title="æŸ”æ€§äº‹åŠ¡å’Œåˆšæ€§äº‹åŠ¡"></a>æŸ”æ€§äº‹åŠ¡å’Œåˆšæ€§äº‹åŠ¡</h3><ul><li>åˆšæ€§äº‹åŠ¡ï¼šå¼ºä¸€è‡´æ€§ä¸‹çš„äº‹åŠ¡ï¼Œå¸¸è§äºACID</li><li>æŸ”æ€§äº‹åŠ¡ï¼šå¼±ä¸€è‡´æ€§ä¸‹çš„äº‹åŠ¡ï¼Œå¸¸è§äºBASE</li></ul><blockquote><p>BASE åˆ†åˆ«æ˜¯åŸºæœ¬å¯ç”¨æ€§ï¼ˆ<strong>B</strong>asicallyÂ <strong>A</strong>vailableï¼‰ã€æŸ”æ€§äº‹åŠ¡ï¼ˆ<strong>S</strong>oft Stateï¼‰å’Œæœ€ç»ˆä¸€è‡´æ€§ï¼ˆ<strong>E</strong>ventually Consistentï¼‰çš„ç¼©å†™ã€‚</p></blockquote><h3 id="å¯é äº‹ä»¶é˜Ÿåˆ—"><a href="#å¯é äº‹ä»¶é˜Ÿåˆ—" class="headerlink" title="å¯é äº‹ä»¶é˜Ÿåˆ—"></a>å¯é äº‹ä»¶é˜Ÿåˆ—</h3><p><a href="http://icyfenix.cn/architect-perspective/general-architecture/transaction/distributed.html#%E5%8F%AF%E9%9D%A0%E4%BA%8B%E4%BB%B6%E9%98%9F%E5%88%97">åˆ†å¸ƒå¼äº‹åŠ¡ | å‡¤å‡°æ¶æ„ (icyfenix.cn)</a></p><h3 id="TCCäº‹åŠ¡"><a href="#TCCäº‹åŠ¡" class="headerlink" title="TCCäº‹åŠ¡"></a>TCCäº‹åŠ¡</h3><p><a href="http://icyfenix.cn/architect-perspective/general-architecture/transaction/distributed.html#%E5%8F%AF%E9%9D%A0%E4%BA%8B%E4%BB%B6%E9%98%9F%E5%88%97">åˆ†å¸ƒå¼äº‹åŠ¡ | å‡¤å‡°æ¶æ„ (icyfenix.cn)</a></p><h3 id="SAGAäº‹åŠ¡"><a href="#SAGAäº‹åŠ¡" class="headerlink" title="SAGAäº‹åŠ¡"></a>SAGAäº‹åŠ¡</h3><p><a href="http://icyfenix.cn/architect-perspective/general-architecture/transaction/distributed.html#%E5%8F%AF%E9%9D%A0%E4%BA%8B%E4%BB%B6%E9%98%9F%E5%88%97">åˆ†å¸ƒå¼äº‹åŠ¡ | å‡¤å‡°æ¶æ„ (icyfenix.cn)</a></p><h2 id="é€æ˜å¤šçº§åˆ†æµç³»ç»Ÿ"><a href="#é€æ˜å¤šçº§åˆ†æµç³»ç»Ÿ" class="headerlink" title="é€æ˜å¤šçº§åˆ†æµç³»ç»Ÿ"></a>é€æ˜å¤šçº§åˆ†æµç³»ç»Ÿ</h2><blockquote><p>Transparent Multilevel Cacheï¼Œè¿™ä¸€ç« ä¸»è¦æ˜¯ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„å¤šçº§ç¼“å­˜æœºåˆ¶çš„æ¦‚è¿°ã€‚</p></blockquote><h3 id="å®¢æˆ·ç«¯ç¼“å­˜"><a href="#å®¢æˆ·ç«¯ç¼“å­˜" class="headerlink" title="å®¢æˆ·ç«¯ç¼“å­˜"></a>å®¢æˆ·ç«¯ç¼“å­˜</h3><h3 id="åŸŸåè§£æDNSç³»ç»Ÿ"><a href="#åŸŸåè§£æDNSç³»ç»Ÿ" class="headerlink" title="åŸŸåè§£æDNSç³»ç»Ÿ"></a>åŸŸåè§£æDNSç³»ç»Ÿ</h3><h3 id="ä¼ è¾“é“¾è·¯"><a href="#ä¼ è¾“é“¾è·¯" class="headerlink" title="ä¼ è¾“é“¾è·¯"></a>ä¼ è¾“é“¾è·¯</h3><blockquote><p>HTTP0.Xã€HTTP1.Xã€HTTP2.0çš„ä¼˜åŒ–ç­–ç•¥</p></blockquote><h3 id="å†…å®¹åˆ†å‘ç½‘ç»œ"><a href="#å†…å®¹åˆ†å‘ç½‘ç»œ" class="headerlink" title="å†…å®¹åˆ†å‘ç½‘ç»œ"></a>å†…å®¹åˆ†å‘ç½‘ç»œ</h3><p><img src="/../../../img/Pasted%20image%2020230923142842.png"></p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><blockquote><p>è°ƒåº¦åæ–¹çš„å¤šå°æœºå™¨ï¼Œä»¥ç»Ÿä¸€çš„æ¥å£å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ‰¿æ‹…æ­¤èŒè´£çš„æŠ€æœ¯ç»„ä»¶è¢«ç§°ä¸ºâ€œè´Ÿè½½å‡è¡¡â€ã€‚</p></blockquote><ul><li>æ•°æ®é“¾è·¯å±‚ï¼šä¿®æ”¹<code>æ•°æ®å¸§</code>çš„ç›®æ ‡MACåœ°å€ï¼ŒæœåŠ¡å™¨IPéœ€è¦é…ç½®å’Œå‡è¡¡å™¨çš„ï¼ˆè™šæ‹Ÿï¼‰IPä¸€è‡´ã€‚</li></ul><p><img src="/../../../img/Pasted%20image%2020230923144216.png"></p><ul><li>ç½‘ç»œå±‚ï¼šæ–¹å¼ä¸€ï¼šIPéš§é“ï¼›æ–¹å¼äºŒæ”¹å˜ç›®æ ‡æ•°æ®åŒ…</li></ul><p><img src="/../../../img/Pasted%20image%2020230923144936.png"></p><p><img src="/../../../img/Pasted%20image%2020230923144942.png"></p><hr><blockquote><p>ä»¥ä¸Šå››å±‚çš„è´Ÿè½½å‡è¡¡éƒ½å±äºè½¬å‘ï¼Œå››å±‚ä¹‹åçš„è´Ÿè½½å‡è¡¡æ¨¡å¼åªèƒ½ä»£ç†</p></blockquote><blockquote><p>æ ¹æ®å“ªä¸€æ–¹èƒ½æ„ŸçŸ¥ï¼Œä»£ç†åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»</p></blockquote><ul><li>æ­£å‘ä»£ç†ï¼ˆé»˜è®¤ï¼‰ï¼šå®¢æˆ·ç«¯å¯çŸ¥ï¼Œå¯¹æœåŠ¡ç«¯é€æ˜ã€‚ä»£ç†æœåŠ¡å™¨ä»£æ›¿å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡ã€‚ç¿»å¢™VPNä½¿ç”¨äº†è¯¥ç±»æŠ€æœ¯ã€‚</li></ul><p><img src="/../../../img/Pasted%20image%2020230923150821.png"></p><ul><li>åå‘ä»£ç†ï¼ˆä¸ƒå±‚è´Ÿè½½å‡è¡¡å±äºåå‘ä»£ç†ï¼‰ï¼šæœåŠ¡ç«¯å¯çŸ¥ï¼Œå¯¹å®¢æˆ·ç«¯é€æ˜ã€‚ä»£ç†æœåŠ¡å™¨ä»£æ›¿æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é€šä¿¡ï¼Œè€Œéšè—äº†çœŸå®æœåŠ¡ç«¯ã€‚</li></ul><p><img src="/../../../img/Pasted%20image%2020230923150807.png"></p><ul><li>é€æ˜ä»£ç†ï¼šå¯¹åŒæ–¹éƒ½é€æ˜ã€‚</li></ul><blockquote><p>è´Ÿè½½å‡è¡¡ç­–ç•¥</p></blockquote><ul><li>è½®è¯¢å‡è¡¡</li><li>æƒé‡è½®è¯¢å‡è¡¡</li><li>éšæœºå‡è¡¡</li><li>æƒé‡éšæœºå‡è¡¡</li><li>ä¸€è‡´æ€§å“ˆå¸Œå‡è¡¡</li><li>å“åº”é€Ÿåº¦å‡è¡¡</li><li>æœ€å°è¿æ¥æ•°å‡è¡¡</li></ul><h3 id="æœåŠ¡ç«¯ç¼“å­˜"><a href="#æœåŠ¡ç«¯ç¼“å­˜" class="headerlink" title="æœåŠ¡ç«¯ç¼“å­˜"></a>æœåŠ¡ç«¯ç¼“å­˜</h3><blockquote><p>ç¼“å­˜ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œéœ€è¦è€ƒè™‘å¤±æ•ˆã€ä¸€è‡´æ€§ã€æ›´æ–°ã€å®‰å…¨æ€§ç­‰</p></blockquote><h4 id="è¿›ç¨‹å†…ç¼“å­˜"><a href="#è¿›ç¨‹å†…ç¼“å­˜" class="headerlink" title="è¿›ç¨‹å†…ç¼“å­˜"></a>è¿›ç¨‹å†…ç¼“å­˜</h4><blockquote><p>æœ‰Caffeineã€ConcurrentLinkedHashMapã€LinkedHashMapã€Guava Cacheã€Ehcache å’Œ Infinispan Embedded</p></blockquote><h4 id="æ·˜æ±°ç­–ç•¥"><a href="#æ·˜æ±°ç­–ç•¥" class="headerlink" title="æ·˜æ±°ç­–ç•¥"></a>æ·˜æ±°ç­–ç•¥</h4><blockquote><p>æœ‰LRU,LFU,FIFO,TinyLFU,W-TinyLFU</p></blockquote><h4 id="ç¼“å­˜é£é™©"><a href="#ç¼“å­˜é£é™©" class="headerlink" title="ç¼“å­˜é£é™©"></a>ç¼“å­˜é£é™©</h4><ul><li>ç¼“å­˜ç©¿é€ï¼šæŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®<ul><li>å¯¹è¿”å›ä¸ºç©ºï¼ˆä¸å­˜åœ¨çš„æ•°æ®ï¼‰çš„keyè¿›è¡Œç¼“å­˜ä¸€æ®µæ—¶é—´</li><li>å¸ƒéš†è¿‡æ»¤å™¨</li></ul></li><li>ç¼“å­˜å‡»ç©¿ï¼šçƒ­ç‚¹æ•°æ®çªç„¶å¤±æ•ˆï¼Œå¤§é‡è¯·æ±‚è®¿é—®æ•°æ®åº“<ul><li>çƒ­ç‚¹æ•°æ®æ‰‹åŠ¨ç®¡ç†ï¼Œè®¡åˆ’æ›´æ–°</li><li>åŠ é”åŒæ­¥ï¼Œä»¥è¯·æ±‚è¯¥æ•°æ®çš„keyå€¼ä¸ºé”ï¼Œä½¿å¾—åªæœ‰ç¬¬ä¸€ä¸ªè¯·æ±‚å¯ä»¥è®¿é—®çœŸå®æ•°æ®æºï¼Œå…¶å®ƒçš„æš‚æ—¶é˜»å¡ã€‚</li></ul></li><li>ç¼“å­˜é›ªå´©ï¼šå¤§é‡ç¼“å­˜åŒæ—¶å¤±æ•ˆ<ul><li>è®¾ç½®éšæœºè¿‡æœŸäº‹ä»¶ï¼Œé¿å…åŒæ—¶å¤§æ‰¹é‡å¤±æ•ˆã€‚</li><li>å»ºè®¾åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤ï¼Œæé«˜å¯ç”¨æ€§ï¼›é€æ˜å¤šçº§ç¼“å­˜</li></ul></li><li>ç¼“å­˜æ±¡æŸ“ï¼šæ•°æ®ä¸ä¸€è‡´<ul><li>ç¼“å­˜æ›´æ–°ç­–ç•¥ã€‚</li></ul></li></ul><h2 id="æ¶æ„å®‰å…¨æ€§"><a href="#æ¶æ„å®‰å…¨æ€§" class="headerlink" title="æ¶æ„å®‰å…¨æ€§"></a>æ¶æ„å®‰å…¨æ€§</h2><h3 id="è®¤è¯"><a href="#è®¤è¯" class="headerlink" title="è®¤è¯"></a>è®¤è¯</h3><blockquote><p>ç³»ç»Ÿå¦‚ä½•æ­£ç¡®åˆ†è¾¨ç”¨æˆ·çš„çœŸå®èº«ä»½</p></blockquote><h3 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h3><blockquote><p>ç³»ç»Ÿå¦‚ä½•æ§åˆ¶ä¸€ä¸ªç”¨æˆ·è¯¥çœ‹åˆ°å“ªäº›æ•°æ®ã€èƒ½æ“ä½œå“ªäº›åŠŸèƒ½ï¼Ÿ</p></blockquote><ul><li><strong>ç¡®ä¿æˆæƒçš„è¿‡ç¨‹å¯é </strong>ï¼šOAuth2</li><li><strong>ç¡®ä¿æˆæƒçš„ç»“æœå¯æ§</strong>ï¼šRBAC</li></ul><h4 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h4><blockquote><p><strong>è°</strong>ï¼ˆUserï¼‰æ‹¥æœ‰ä»€ä¹ˆ<strong>æƒé™</strong>ï¼ˆAuthorityï¼‰å»<strong>æ“ä½œ</strong>ï¼ˆOperationï¼‰å“ªäº›<strong>èµ„æº</strong>ï¼ˆResourceï¼‰</p></blockquote><p><img src="/../../../img/Pasted%20image%2020230923184422.png"></p><p><img src="/../../../img/Pasted%20image%2020230923184844.png"></p><h4 id="OAuth2"><a href="#OAuth2" class="headerlink" title="OAuth2"></a>OAuth2</h4><blockquote><p>ç”¨<code>ä»¤ç‰Œ</code>ä»£æ›¿<code>å¯†ç </code>ï¼Œç”¨ä»¥è§£å†³ç¬¬ä¸‰æ–¹åº”ç”¨</p></blockquote><blockquote><p>ä¸ºä»€ä¹ˆè¦ç”¨<code>ä»¤ç‰Œ</code>ä»£æ›¿<code>å¯†ç </code></p></blockquote><ul><li>å¯†ç æ³„éœ²ï¼šå¦‚æœç¬¬ä¸‰æ–¹åº”ç”¨è¢«é»‘å®¢æ”»ç ´ï¼Œé‚£å¯¼è‡´æˆæƒåº”ç”¨æˆ–å…¶ä»–åº”ç”¨çš„å¯†ç åŒæ—¶æ³„éœ²</li><li>è®¿é—®èŒƒå›´ï¼šæ‹¥æœ‰äº†å¯†ç ç›¸å½“äºæ‹¥æœ‰äº†è´¦å·çš„æ•´ä¸ªæƒé™ï¼Œä¸åˆ©äºç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶ã€‚æ¯”å¦‚ä¹‹å¯¹å¤–å¼€æ”¾æŸ¥çœ‹æƒé™ï¼Œå¢åˆ æ”¹æƒé™ä¸å¼€æ”¾</li><li>æˆæƒå›æ”¶ï¼šæ”¶å›æƒé™æ„å‘³ç€åªèƒ½ä¿®æ”¹å¯†ç ï¼Œè¿™æ ·ä¼šå¯¼è‡´å…¶ä»–ä½¿ç”¨åŒæ ·å¯†ç çš„åº”ç”¨å¤±æ•ˆã€‚<code>ä»¤ç‰Œ</code>å¯ä»¥è®¾ç½®æœ‰æ•ˆæœŸï¼Œè¿‡æœŸå¤±æ•ˆã€‚</li></ul><p><img src="/../../../img/Pasted%20image%2020230925123746.png"></p><p>å››ç§è§’è‰²</p><ul><li>æˆæƒæœåŠ¡å™¨ï¼Œè´Ÿè´£é¢å‘ Access Tokenï¼Œæ¯”å¦‚å¾®ä¿¡å¼€æ”¾å¹³å°æˆæƒæœåŠ¡å™¨ã€‚</li><li>èµ„æºæ‰€æœ‰è€…ï¼Œä½ çš„åº”ç”¨çš„ç”¨æˆ·æ˜¯èµ„æºçš„æ‰€æœ‰è€…ï¼Œæˆæƒå…¶ä»–äººè®¿é—®ä»–çš„èµ„æºã€‚æ¯”å¦‚å¾®ä¿¡ç”¨æˆ·æ˜¯èµ„æºæ‰€æœ‰è€…ã€‚</li><li>è°ƒç”¨æ–¹ï¼Œè°ƒç”¨æ–¹è¯·æ±‚è·å– Access Tokenï¼Œç»è¿‡ç”¨æˆ·æˆæƒåï¼Œå¾®ä¿¡å¼€æ”¾å¹³å°ä¸ºå…¶é¢å‘ Access Tokenã€‚è°ƒç”¨æ–¹å¯ä»¥æºå¸¦ Access Token åˆ°èµ„æºæœåŠ¡å™¨è®¿é—®ç”¨æˆ·çš„èµ„æºã€‚æ¯”å¦‚è°ƒç”¨æ–¹æ˜¯ä¸Šæ–‡è¯´çš„ç½‘ç«™Aã€‚</li><li>èµ„æºæœåŠ¡å™¨ï¼Œæ¥å— Access Tokenï¼Œç„¶åéªŒè¯å®ƒçš„è¢«èµ‹äºˆçš„æƒé™é¡¹ç›®ï¼Œæœ€åè¿”å›èµ„æºã€‚æ¯”å¦‚å¾®ä¿¡å¼€æ”¾å¹³å°èµ„æºæœåŠ¡å™¨ã€‚</li></ul><p>å››ç§æˆæƒæ–¹å¼</p><ul><li>æˆæƒç æ¨¡å¼ï¼ˆAuthorization Codeï¼‰</li><li>éšå¼æˆæƒæ¨¡å¼ï¼ˆImplicitï¼‰</li><li>å¯†ç æ¨¡å¼ï¼ˆResource Owner Password Credentialsï¼‰</li><li>å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆClient Credentialsï¼‰</li></ul><h5 id="æˆæƒç æ¨¡å¼"><a href="#æˆæƒç æ¨¡å¼" class="headerlink" title="æˆæƒç æ¨¡å¼"></a>æˆæƒç æ¨¡å¼</h5><blockquote><p>å¾®ä¿¡æ‰«ç æˆæƒåŠŸèƒ½</p></blockquote><p>æˆæƒè¿‡ç¨‹ï¼š</p><ol><li>ç¬¬ä¸‰æ–¹åº”ç”¨å°†èµ„æºæ‰€æœ‰è€…ï¼ˆç”¨æˆ·ï¼‰å¯¼å‘æˆæƒæœåŠ¡å™¨çš„æˆæƒé¡µé¢ï¼Œå¹¶å‘æˆæƒæœåŠ¡å™¨æä¾› ClientID åŠç”¨æˆ·åŒæ„æˆæƒåçš„å›è°ƒ URIï¼Œè¿™æ˜¯ä¸€æ¬¡å®¢æˆ·ç«¯é¡µé¢è½¬å‘ã€‚</li><li>æˆæƒæœåŠ¡å™¨æ ¹æ® ClientID ç¡®è®¤ç¬¬ä¸‰æ–¹åº”ç”¨çš„èº«ä»½ï¼Œç”¨æˆ·åœ¨æˆæƒæœåŠ¡å™¨ä¸­å†³å®šæ˜¯å¦åŒæ„å‘è¯¥èº«ä»½çš„åº”ç”¨è¿›è¡Œæˆæƒï¼Œç”¨æˆ·è®¤è¯çš„è¿‡ç¨‹æœªå®šä¹‰åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œåœ¨æ­¤ä¹‹å‰åº”è¯¥å·²ç»å®Œæˆã€‚</li><li>å¦‚æœç”¨æˆ·åŒæ„æˆæƒï¼ŒæˆæƒæœåŠ¡å™¨å°†è½¬å‘ç¬¬ä¸‰æ–¹åº”ç”¨åœ¨ç¬¬ 1 æ­¥è°ƒç”¨ä¸­æä¾›çš„å›è°ƒ URIï¼Œå¹¶é™„å¸¦ä¸Šä¸€ä¸ªæˆæƒç å’Œè·å–ä»¤ç‰Œçš„åœ°å€ä½œä¸ºå‚æ•°ï¼Œè¿™æ˜¯ç¬¬äºŒæ¬¡å®¢æˆ·ç«¯é¡µé¢è½¬å‘ã€‚</li><li>ç¬¬ä¸‰æ–¹åº”ç”¨é€šè¿‡å›è°ƒåœ°å€æ”¶åˆ°æˆæƒç ï¼Œç„¶åå°†æˆæƒç ä¸è‡ªå·±çš„ ClientSecret ä¸€èµ·ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡æœåŠ¡å™¨å‘æˆæƒæœåŠ¡å™¨æä¾›çš„è·å–ä»¤ç‰Œçš„æœåŠ¡åœ°å€å‘èµ·è¯·æ±‚ï¼Œæ¢å–ä»¤ç‰Œã€‚è¯¥æœåŠ¡å™¨çš„åœ°å€åº”ä¸æ³¨å†Œæ—¶æä¾›çš„åŸŸåå¤„äºåŒä¸€ä¸ªåŸŸä¸­ã€‚</li><li>æˆæƒæœåŠ¡å™¨æ ¸å¯¹æˆæƒç å’Œ ClientSecretï¼Œç¡®è®¤æ— è¯¯åï¼Œå‘ç¬¬ä¸‰æ–¹åº”ç”¨æˆäºˆä»¤ç‰Œã€‚ä»¤ç‰Œå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªï¼Œå…¶ä¸­å¿…å®šè¦æœ‰çš„æ˜¯è®¿é—®ä»¤ç‰Œï¼ˆAccess Tokenï¼‰ï¼Œå¯é€‰çš„æ˜¯åˆ·æ–°ä»¤ç‰Œï¼ˆRefresh Tokenï¼‰ã€‚è®¿é—®ä»¤ç‰Œç”¨äºåˆ°èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œæœ‰æ•ˆæœŸè¾ƒçŸ­ï¼Œåˆ·æ–°ä»¤ç‰Œç”¨äºåœ¨è®¿é—®ä»¤ç‰Œå¤±æ•ˆåé‡æ–°è·å–ï¼Œæœ‰æ•ˆæœŸè¾ƒé•¿ã€‚</li><li>èµ„æºæœåŠ¡å™¨æ ¹æ®è®¿é—®ä»¤ç‰Œæ‰€å…è®¸çš„æƒé™ï¼Œå‘ç¬¬ä¸‰æ–¹åº”ç”¨æä¾›èµ„æºã€‚</li></ol><p><img src="/../../../img/Pasted%20image%2020230925125453.png"></p><p>æ€è€ƒçš„é—®é¢˜ï¼š</p><ol><li>ç¬¬ä¸‰æ–¹åº”ç”¨åœ¨æˆæƒæœåŠ¡å™¨æ³¨å†Œçš„æ—¶å€™éœ€è¦æä¾›ä¸€ä¸ªå›è°ƒåœ°å€URIï¼Œè¿™ä¸ªURIå¿…é¡»è¦å’Œæ­¥éª¤1ä¸­çš„ä¸€è‡´ã€‚</li><li>å…¶ä»–åº”ç”¨å‡å†’ç¬¬ä¸‰æ–¹åº”ç”¨éª—å–æˆæƒ<blockquote><p>å…¶ä»–åº”ç”¨æ²¡æœ‰ClientSecretæ¢å–ä¸åˆ°ä»¤ç‰Œã€‚ä»¤ç‰Œéœ€è¦ClientID,ClientSecret(ç¬¬ä¸‰æ–¹åº”ç”¨ç§æœ‰)ï¼Œæˆæƒç æ‰èƒ½æ¢å–ä»¤ç‰Œã€‚</p></blockquote></li><li>ä¸ºä»€ä¹ˆå…ˆå‘æˆæƒç ï¼Œå†ç”¨æˆæƒç æ¢å–ä»¤ç‰Œ<blockquote><p>æˆæƒç ç›¸å½“äºä¸´æ—¶ä»¤ç‰Œæ˜¯ç»™æµè§ˆå™¨çš„ï¼Œä½†æˆæƒç æ˜¯æš´éœ²çš„ã€‚å› æ­¤éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åº”ç”¨çš„ClientSecretå†å»æ¢å–ä»¤ç‰Œ</p></blockquote></li></ol><h5 id="éšå¼æˆæƒæ¨¡å¼"><a href="#éšå¼æˆæƒæ¨¡å¼" class="headerlink" title="éšå¼æˆæƒæ¨¡å¼"></a>éšå¼æˆæƒæ¨¡å¼</h5><blockquote><p>çœç•¥æ‰äº†é€šè¿‡æˆæƒç æ¢å–ä»¤ç‰Œçš„æ­¥éª¤ï¼Œéœ€è¦åœ¨æ³¨å†Œæ—¶æä¾›å›è°ƒåŸŸåï¼Œæ­¤æ—¶ä¼šè¦æ±‚è¯¥åŸŸåä¸æ¥å—ä»¤ç‰Œçš„æœåŠ¡å¤„äºåŒä¸€ä¸ªåŸŸå†…ã€‚æ­¤å¤–ï¼ŒåŒæ ·åŸºäºå®‰å…¨è€ƒè™‘ï¼Œåœ¨éšå¼æ¨¡å¼ä¸­æ˜ç¡®ç¦æ­¢å‘æ”¾åˆ·æ–°ä»¤ç‰Œã€‚</p></blockquote><p><img src="/../../../img/Pasted%20image%2020230925143756.png"></p><h5 id="å¯†ç æ¨¡å¼"><a href="#å¯†ç æ¨¡å¼" class="headerlink" title="å¯†ç æ¨¡å¼"></a>å¯†ç æ¨¡å¼</h5><p><img src="/../../../img/Pasted%20image%2020230925143837.png"></p><blockquote><p>ç¬¬ä¸‰æ–¹é€šè¿‡ç”¨æˆ·åå’Œå¯†ç æ¢å–ä»¤ç‰Œï¼Œä½†æ— æ³•ä¿éšœç¬¬ä¸‰æ–¹ä¸ä¼šéæ³•ä¿å­˜ç”¨æˆ·çš„å¯†ç ã€‚</p></blockquote><h5 id="å®¢æˆ·æ¨¡å¼"><a href="#å®¢æˆ·æ¨¡å¼" class="headerlink" title="å®¢æˆ·æ¨¡å¼"></a>å®¢æˆ·æ¨¡å¼</h5><blockquote><p>è¯¥æ¨¡å¼ä¸éœ€è¦ç”¨æˆ·åŒæ„æˆæƒï¼Œæ¯”å¦‚è¶…æ—¶è®¢å•è‡ªåŠ¨å–æ¶ˆã€‚<br><img src="/../../../img/Pasted%20image%2020230925144001.png"></p></blockquote><h3 id="å‡­è¯"><a href="#å‡­è¯" class="headerlink" title="å‡­è¯"></a>å‡­è¯</h3><blockquote><p>ç³»ç»Ÿå¦‚ä½•ä¿è¯å®ƒä¸ç”¨æˆ·ä¹‹é—´çš„æ‰¿è¯ºæ˜¯åŒæ–¹å½“æ—¶çœŸå®æ„å›¾çš„ä½“ç°ï¼Œæ˜¯å‡†ç¡®ã€å®Œæ•´ä¸”ä¸å¯æŠµèµ–çš„ï¼Ÿ</p></blockquote><p>æ— çŠ¶æ€å’Œæœ‰çŠ¶æ€</p><ul><li><p>æ— çŠ¶æ€ï¼šå„ä¸ªè¯·æ±‚å¯¹äºæœåŠ¡å™¨æ¥è¯´ç»Ÿä¸€æ— å·®åˆ«å¤„ç†,è¯·æ±‚è‡ªèº«æºå¸¦äº†æ‰€æœ‰æœåŠ¡ç«¯æ‰€éœ€è¦çš„æ‰€æœ‰å‚æ•°(æœåŠ¡ç«¯è‡ªèº«ä¸å­˜å‚¨è·Ÿè¯·æ±‚ç›¸å…³çš„ä»»ä½•æ•°æ®,ä¸åŒ…æ‹¬æ•°æ®åº“å­˜å‚¨ä¿¡æ¯</p></li><li><p>æœ‰çŠ¶æ€ï¼šä¸ä¹‹ç›¸å,æœ‰çŠ¶æ€æœåŠ¡åœ¨æœåŠ¡ç«¯ä¿ç•™ä¹‹å‰è¯·æ±‚çš„ä¿¡æ¯,ç”¨ä»¥å¤„ç†å½“å‰è¯·æ±‚,æ¯”å¦‚sessionç­‰</p></li></ul><h4 id="Cookie-Session"><a href="#Cookie-Session" class="headerlink" title="Cookie-Session"></a>Cookie-Session</h4><p>ç‰¹ç‚¹ï¼š</p><ul><li>å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œæ˜¯æœ‰çŠ¶æ€çš„ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>åœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ï¼Œæ°´å¹³æ‹“å±•å›°éš¾ï¼Œæ ¹æ®CAPç†è®ºï¼Œæ— æ³•åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹å¿æ€§</li></ul><h4 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h4><p>ç‰¹ç‚¹ï¼š</p><ul><li>æ˜¯æœåŠ¡ç«¯å‘é€ç»™å®¢æˆ·ç«¯çš„ï¼Œä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éšè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨</li><li>æ˜¯æ— çŠ¶æ€çš„</li><li>ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆï¼š</li></ul><ol><li><p>ä»¤ç‰Œå¤´ï¼šå¯ä»¥è¢«è§£å¯†</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;alg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HS256&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typ&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>è´Ÿè½½ï¼šå¯ä»¥è¢«è§£å¯†ã€‚ä¸€èˆ¬å­˜æ”¾ç”¨æˆ·éæ•æ„Ÿä¿¡æ¯ï¼Œè¿‡æœŸæ—¶é—´ç­‰ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icyfenix&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;authorities&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;ROLE_USER&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;ROLE_ADMIN&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;ALL&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exp&quot;</span><span class="punctuation">:</span> <span class="number">1584948947</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;jti&quot;</span><span class="punctuation">:</span> <span class="string">&quot;9d77586a-3f4f-4cbb-9924-fe2f77dfa33d&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;client_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bookstore_frontend&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ç­¾åï¼šç”±äºåŠ äº†å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œä¸€èˆ¬ä¸èƒ½è¢«ç ´å¯†ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HMACSHA256(base64UrlEncode(header) + <span class="string">&quot;.&quot;</span> + base64UrlEncode(payload) <span class="punctuation">,</span> secret)</span><br></pre></td></tr></table></figure></li></ol><p>ç¼ºç‚¹ï¼š</p><ul><li><strong>ä»¤ç‰Œéš¾ä»¥ä¸»åŠ¨å¤±æ•ˆ</strong></li><li><strong>ç›¸å¯¹æ›´å®¹æ˜“é­å—é‡æ”¾æ”»å‡»</strong></li><li><strong>ç›¸å¯¹æ›´å®¹æ˜“é­å—é‡æ”¾æ”»å‡»</strong></li><li><strong>å¿…é¡»è€ƒè™‘ä»¤ç‰Œåœ¨å®¢æˆ·ç«¯å¦‚ä½•å­˜å‚¨</strong></li><li><strong>æ— çŠ¶æ€ä¹Ÿä¸æ€»æ˜¯å¥½çš„</strong></li></ul><h3 id="ä¼ è¾“"><a href="#ä¼ è¾“" class="headerlink" title="ä¼ è¾“"></a>ä¼ è¾“</h3><p><a href="https://www.jianshu.com/p/2e20b11eb6e0">åŠ å¯†ã€æ‘˜è¦ã€ç­¾åã€è¯ä¹¦ï¼Œä¸€æ¬¡è¯´æ˜ç™½! - ç®€ä¹¦ (jianshu.com)</a></p><p>å®‰å…¨é£é™©ç±»åˆ«ï¼š</p><ul><li>çªƒå¬é£é™©ï¼šç°ä»£è®¡ç®—æœºç½‘ç»œå»ºç«‹åœ¨ TCP&#x2F;IP åè®®æ—æä¾›ä¼ è¾“èƒ½åŠ›ä¸Šï¼Œæ•°æ®åœ¨ä¼ è¾“çº¿è·¯ä¸Šçš„æ¯ä¸ªç¯èŠ‚éƒ½å¯èƒ½è¢«çªƒå¬ï¼Œä»è€Œå¯¼è‡´æ•æ„Ÿæ•°æ®æ³„éœ²ï¼›</li><li>çº‚æ”¹é£é™©ï¼šæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½è¢«ç¯¡æ”¹ï¼Œä¾‹å¦‚ä¸­é—´äººæ”»å‡»ã€‚æ”»å‡»è€…å¯ä»¥å’Œé€šä¿¡åŒæ–¹åˆ†åˆ«å»ºç«‹ç‹¬ç«‹çš„è¿æ¥ï¼Œä½¿å¾—é€šä¿¡åŒæ–¹è¯¯ä»¥ä¸ºå®ƒä»¬æ­£åœ¨è¿›è¡Œä¸€ä¸ªç§å¯†è¿æ¥ï¼Œä½†å¯Ÿè§‰ä¸åˆ°æ•°æ®è¢«ç¯¡æ”¹ï¼›(ä¸­é—´å•†)</li><li>ä¼ªè£…é£é™©ï¼šæ”»å‡»è€…å¯ä»¥ä¼ªè£…æˆåˆæ³•çš„èº«ä»½ã€‚</li></ul><p>å®ç°ä¼ è¾“å®‰å…¨ï¼š</p><ul><li>åŠ å¯† â€”â€” é˜²çªƒå¬ï¼šå°†æ˜æ–‡è½¬æ¢ä¸ºå¯†æ–‡ï¼Œåªæœ‰æœŸæœ›çš„æ¥æ”¶æ–¹æœ‰èƒ½åŠ›å°†å¯†æ–‡è§£å¯†ä¸ºæ˜æ–‡ï¼Œå³ä½¿å¯†æ–‡è¢«æ”»å‡»è€…çªƒå–ä¹Ÿæ— æ³•ç†è§£æ•°æ®çš„å†…å®¹ï¼›</li><li>éªŒè¯å®Œæ•´æ€§ â€”â€” é˜²æ­¢ç¯¡æ”¹ï¼šå¯¹åŸå§‹æ•°æ®è®¡ç®—æ‘˜è¦ï¼Œå¹¶å°†æ•°æ®å’Œæ‘˜è¦ä¸€èµ·äº¤ä»˜ç»™é€šä¿¡å¯¹æ–¹ã€‚æ¥æ”¶æ–¹æ”¶åˆ°åä¹Ÿå¯¹æ•°æ®è®¡ç®—æ‘˜è¦ï¼Œå¹¶æ¯”è¾ƒæ˜¯å¦å’Œæ¥å—çš„æ‘˜è¦ä¸€è‡´ï¼Œå€Ÿæ­¤åˆ¤æ–­æ¥æ”¶çš„æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹ã€‚ä¸è¿‡ï¼Œå› ä¸ºæ”¶åˆ°çš„æ‘˜è¦ä¹Ÿå¯èƒ½è¢«ç¯¡æ”¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ›´å®‰å…¨çš„æ‰‹æ®µï¼šæ•°å­—ç­¾åï¼›</li><li>è®¤è¯æ•°æ®æ¥æº â€”â€” é˜²æ­¢ä¼ªè£…ï¼š æ•°å­—ç­¾åèƒ½å¤ŸéªŒè¯æ•°æ®å®Œæ•´æ€§ï¼ŒåŒæ—¶ä¹Ÿèƒ½è®¤è¯æ•°æ®æ¥æºï¼Œé˜²æ­¢ä¼ªè£…ã€‚</li></ul><p>æ‘˜è¦ï¼šæ‘˜è¦ç®—æ³•çš„åŸç†æ˜¯æ ¹æ®ä¸€å®šçš„è¿ç®—è§„åˆ™æå–åŸå§‹æ•°æ®ä¸­çš„ä¿¡æ¯ï¼Œè¢«æå–çš„ä¿¡æ¯å°±æ˜¯åŸå§‹æ•°æ®çš„æ¶ˆæ¯æ‘˜è¦ï¼Œä¹Ÿç§°ä¸ºæ•°æ®æŒ‡çº¹ã€‚</p><ul><li>ä¸€è‡´æ€§ï¼š ç›¸åŒæ•°æ®å¤šæ¬¡è®¡ç®—çš„æ‘˜è¦æ˜¯ç›¸åŒçš„ï¼Œä¸åŒçš„æ•°æ®ï¼ˆåœ¨ä¸è€ƒè™‘ç¢°æ’æ—¶ï¼‰çš„æ‘˜è¦æ˜¯ä¸åŒçš„ï¼›</li><li>ä¸å¯é€†æ€§ï¼š åªèƒ½æ­£å‘æå–åŸå§‹æ•°æ®çš„æ‘˜è¦ï¼Œæ— æ³•ä»æ‘˜è¦åæ¨å‡ºåŸå§‹æ•°æ®ï¼›</li><li>é«˜æ•ˆæ€§ï¼š æ‘˜è¦çš„ç”Ÿæˆè¿‡ç¨‹é«˜æ•ˆå¿«é€Ÿï¼›</li></ul><p>åŠ å¯†ï¼šåŠ å¯†ï¼ˆEncryptionï¼‰æ˜¯å°†æ˜æ–‡ï¼ˆPlaintextï¼‰è½¬æ¢ä¸ºå¯†æ–‡ï¼ˆCiphertextï¼‰çš„è¿‡ç¨‹ï¼Œåªæœ‰æœŸæœ›çš„æ¥æ”¶æ–¹æœ‰èƒ½åŠ›å°†å¯†æ–‡è§£å¯†ä¸ºæ˜æ–‡ï¼Œå³ä½¿å¯†æ–‡è¢«æ”»å‡»è€…çªƒå–ä¹Ÿæ— æ³•ç†è§£æ•°æ®çš„å†…å®¹ã€‚</p><ul><li>å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥</li><li>éå¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥<br>1ã€å¯†é’¥ç®¡ç†ï¼š å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­éœ€è¦å°†å¯†é’¥å‘é€ç»™é€šä¿¡å¯¹æ–¹ï¼Œå­˜åœ¨å¯†é’¥æ³„æ¼é£é™©ï¼›éå¯¹ç§°åŠ å¯†å…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œç§é’¥æ˜¯ä¿å¯†çš„ï¼Œé˜²æ­¢äº†ç§é’¥å¤–ä¼ ï¼›</li></ul><p>2ã€å¯†é’¥åŠŸèƒ½ï¼š å…¬é’¥åŠ å¯†çš„æ•°æ®ï¼Œåªå¯ä½¿ç”¨ç§é’¥å¯¹å…¶è§£å¯†ã€‚åä¹‹ï¼Œç§é’¥åŠ å¯†çš„æ•°æ®ï¼Œåªå¯ä½¿ç”¨å…¬é’¥å¯¹å…¶è§£å¯†ï¼ˆæ³¨æ„ï¼šå…¬é’¥åŠ å¯†çš„æ•°æ®æ— æ³•ä½¿ç”¨å…¬é’¥è§£å¯†ï¼Œå› ä¸ºå…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œå¦‚æœå…¬é’¥å¯ä»¥è§£å¯†çš„è¯ï¼Œå°±å¤±å»äº†åŠ å¯†çš„å®‰å…¨æ€§ï¼‰ï¼›</p><p>3ã€è®¡ç®—æ€§èƒ½ï¼š éå¯¹ç§°åŠ å¯†ç®—æ³•çš„è®¡ç®—æ•ˆç‡ä½ï¼Œå› æ­¤å®é™…ä¸­å¾€å¾€é‡‡ç”¨ä¸¤ç§ç®—æ³•ç»“åˆçš„å¤åˆç®—æ³•ï¼šå…ˆä½¿ç”¨éå¯¹ç§°åŠ å¯†å»ºç«‹å®‰å…¨ä¿¡é“ä¼ è¾“å¯¹ç§°å¯†é’¥ï¼Œå†ä½¿ç”¨è¯¥å¯†é’¥è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼›</p><p>4ã€è®¤è¯åŠŸèƒ½ï¼š éå¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œç§é’¥åªæœ‰ä¸€æ–¹æŒæœ‰ï¼Œå…·å¤‡è®¤è¯æ€§å’ŒæŠ—æŠµèµ–æ€§ï¼ˆç¬¬ 3 èŠ‚ æ•°å­—ç­¾åç®—æ³• åº”ç”¨äº†æ­¤ç‰¹æ€§ï¼‰ã€‚</p><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><blockquote><p>ç³»ç»Ÿå¦‚ä½•ç¡®ä¿æäº¤åˆ°æ¯é¡¹æœåŠ¡ä¸­çš„æ•°æ®æ˜¯åˆä¹è§„åˆ™çš„ï¼Œä¸ä¼šå¯¹ç³»ç»Ÿç¨³å®šæ€§ã€æ•°æ®ä¸€è‡´æ€§ã€æ­£ç¡®æ€§äº§ç”Ÿé£é™©ï¼Ÿ</p></blockquote><h1 id="2-åˆ†å¸ƒå¼çš„åŸºçŸ³"><a href="#2-åˆ†å¸ƒå¼çš„åŸºçŸ³" class="headerlink" title="2.åˆ†å¸ƒå¼çš„åŸºçŸ³"></a>2.åˆ†å¸ƒå¼çš„åŸºçŸ³</h1><h2 id="åˆ†å¸ƒå¼å…±è¯†ç®—æ³•"><a href="#åˆ†å¸ƒå¼å…±è¯†ç®—æ³•" class="headerlink" title="åˆ†å¸ƒå¼å…±è¯†ç®—æ³•"></a>åˆ†å¸ƒå¼å…±è¯†ç®—æ³•</h2><h4 id="Paxos"><a href="#Paxos" class="headerlink" title="Paxos"></a>Paxos</h4><p>ç®—æ³•ä¸­çš„ä¸‰ç±»èŠ‚ç‚¹ï¼ˆä»»ä½•èŠ‚ç‚¹éƒ½å¯ä»¥å……å½“ä¸€ä¸‹ä¸‰ä¸ªè§’è‰²ä¹‹ä¸€ï¼‰</p><ul><li><strong>ææ¡ˆèŠ‚ç‚¹</strong>ï¼šç§°ä¸º Proposerï¼Œæå‡ºå¯¹æŸä¸ªå€¼è¿›è¡Œè®¾ç½®æ“ä½œçš„èŠ‚ç‚¹ï¼Œè®¾ç½®å€¼è¿™ä¸ªè¡Œä¸ºå°±è¢«ç§°ä¹‹ä¸º<strong>ææ¡ˆ</strong>ï¼ˆProposalï¼‰ï¼Œå€¼ä¸€æ—¦è®¾ç½®æˆåŠŸï¼Œå°±æ˜¯ä¸ä¼šä¸¢å¤±ä¹Ÿä¸å¯å˜çš„ã€‚è¯·æ³¨æ„ï¼ŒPaxos æ˜¯å…¸å‹çš„åŸºäºæ“ä½œè½¬ç§»æ¨¡å‹è€ŒéçŠ¶æ€è½¬ç§»æ¨¡å‹æ¥è®¾è®¡çš„ç®—æ³•ï¼Œè¿™é‡Œçš„â€œè®¾ç½®å€¼â€ä¸è¦ç±»æ¯”æˆç¨‹åºä¸­å˜é‡èµ‹å€¼æ“ä½œï¼Œåº”è¯¥ç±»æ¯”æˆæ—¥å¿—è®°å½•æ“ä½œï¼Œåœ¨åé¢ä»‹ç»çš„ Raft ç®—æ³•ä¸­å°±ç›´æ¥æŠŠâ€œææ¡ˆâ€å«ä½œâ€œæ—¥å¿—â€äº†ã€‚</li><li><strong>å†³ç­–èŠ‚ç‚¹</strong>ï¼šç§°ä¸º Acceptorï¼Œæ˜¯åº”ç­”ææ¡ˆçš„èŠ‚ç‚¹ï¼Œå†³å®šè¯¥ææ¡ˆæ˜¯å¦å¯è¢«æŠ•ç¥¨ã€æ˜¯å¦å¯è¢«æ¥å—ã€‚ææ¡ˆä¸€æ—¦å¾—åˆ°è¿‡åŠæ•°å†³ç­–èŠ‚ç‚¹çš„æ¥å—ï¼Œå³ç§°è¯¥ææ¡ˆè¢«<strong>æ‰¹å‡†</strong>ï¼ˆAcceptï¼‰ï¼Œææ¡ˆè¢«æ‰¹å‡†å³æ„å‘³ç€è¯¥å€¼ä¸èƒ½å†è¢«æ›´æ”¹ï¼Œä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œä¸”æœ€ç»ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šæ¥å—è¯¥å®ƒã€‚ï¼ˆå¥‡æ•°ä¸ªï¼‰</li><li><strong>è®°å½•èŠ‚ç‚¹</strong>ï¼šè¢«ç§°ä¸º Learnerï¼Œä¸å‚ä¸ææ¡ˆï¼Œä¹Ÿä¸å‚ä¸å†³ç­–ï¼Œåªæ˜¯å•çº¯åœ°ä»ææ¡ˆã€å†³ç­–èŠ‚ç‚¹ä¸­å­¦ä¹ å·²ç»è¾¾æˆå…±è¯†çš„ææ¡ˆï¼Œè­¬å¦‚å°‘æ•°æ´¾èŠ‚ç‚¹ä»ç½‘ç»œåˆ†åŒºä¸­æ¢å¤æ—¶ï¼Œå°†ä¼šè¿›å…¥è¿™ç§çŠ¶æ€ã€‚</li></ul><p><strong>Prepare</strong>é˜¶æ®µï¼šææ¡ˆèŠ‚ç‚¹å¹¿æ’­æ–°çš„ææ¡ˆID(n)ï¼Œå†³ç­–èŠ‚ç‚¹æ”¶åˆ°åï¼Œåšå‡ºâ€ä¸¤ä¸ªæ‰¿è¯ºâ€œå’Œâ€ä¸€ä¸ªåº”ç­”â€œï¼Œå¦‚æœè‡ªå·±æ²¡æœ‰æ¥æ”¶å…¶ä»–äººçš„ææ¡ˆï¼Œåˆ™è¿”å›Promise(n,null)ï¼Œå¦‚æœå·²ç»æ¥å—äº†ç¼–å·æ›´å¤§çš„ææ¡ˆï¼Œåˆ™è¿”å›Promise(acceptedID,acceptValue)<br><strong>Accept</strong>é˜¶æ®µï¼šåœ¨è¯¥é˜¶æ®µï¼Œææ¡ˆèŠ‚ç‚¹ä¼šæ ¹æ®å†³ç­–èŠ‚ç‚¹çš„Promiseæ¥å†³å®šè¡Œä¸ºã€‚</p><ul><li>å¦‚æœä¸Šä¸€é˜¶æ®µè¶…è¿‡åŠæ•°çš„æœºå™¨å›å¤è¯´æ¥å—ææ¡ˆï¼Œé‚£ä¹ˆProposerå°±æ­£å¼é€šçŸ¥æ‰€æœ‰æœºå™¨å»ç”Ÿæ•ˆè¿™ä¸ªæ“ä½œï¼›</li><li>å¦‚æœä¸Šä¸€é˜¶æ®µè¶…è¿‡åŠæ•°çš„æœºå™¨å›å¤è¯´ä»–ä»¬å·²ç»å…ˆæ¥å—äº†å…¶ä»–ç¼–å·æ›´å¤§çš„ææ¡ˆï¼Œé‚£ä¹ˆProposerä¼šæ›´æ–°ä¸€ä¸ªæ›´å¤§çš„ç¼–å·å»é‡è¯•ï¼ˆéšæœºå»¶æ—¶ï¼‰ï¼›</li><li>å¦‚æœä¸Šä¸€é˜¶æ®µçš„æœºå™¨å›å¤è¯´ä»–ä»¬å·²ç»ç”Ÿæ•ˆäº†å…¶ä»–ç¼–å·çš„ææ¡ˆï¼Œé‚£ä¹ˆProposerå°±ä¹Ÿåªèƒ½æ¥å—è¿™ä¸ªå…¶ä»–äººçš„ææ¡ˆï¼Œå¹¶å‘ŠçŸ¥æ‰€æœ‰æœºå™¨ç›´æ¥æ¥å—è¿™ä¸ªæ–°çš„ææ¡ˆï¼›</li><li>å¦‚æœä¸Šä¸€é˜¶æ®µéƒ½æ²¡æ”¶åˆ°åŠæ•°çš„æœºå™¨å›å¤ï¼Œé‚£ä¹ˆææ¡ˆå–æ¶ˆã€‚</li></ul><p><img src="/../../../img/Pasted%20image%2020230925210751.png"><br><a href="https://zhuanlan.zhihu.com/p/489796705">åˆ†å¸ƒå¼å…±è¯†ç®—æ³•ä¹‹Paxosè¯¦è§£ - çŸ¥ä¹ (zhihu.com)</a></p><h4 id="Multi-Paxos"><a href="#Multi-Paxos" class="headerlink" title="Multi Paxos"></a>Multi Paxos</h4><blockquote><p>Basic-Paxoså­˜åœ¨â€œæ´»é”â€ç°è±¡ï¼Œå¦‚ä¸‹å›¾ï¼Œåˆ™æ‰€æœ‰ææ¡ˆèŠ‚ç‚¹ä¼šä¸æ–­å¢å¤§è‡ªå·±çš„ç¼–å·ï¼Œå¯¼è‡´é™·å…¥æŒç»­ç­‰å¾…ã€‚</p></blockquote><p><img src="/../../../img/Pasted%20image%2020230925212641.png"></p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºäº†Multi-Paxosç®—æ³•<br>Multi Paxos å¯¹ Basic Paxos çš„æ ¸å¿ƒæ”¹è¿›æ˜¯å¢åŠ äº†â€œé€‰ä¸»â€çš„è¿‡ç¨‹ï¼Œææ¡ˆèŠ‚ç‚¹ä¼šé€šè¿‡å®šæ—¶è½®è¯¢ï¼ˆå¿ƒè·³ï¼‰ï¼Œç¡®å®šå½“å‰ç½‘ç»œä¸­çš„æ‰€æœ‰èŠ‚ç‚¹é‡Œæ˜¯å¦å­˜åœ¨æœ‰ä¸€ä¸ªä¸»ææ¡ˆèŠ‚ç‚¹ï¼Œä¸€æ—¦æ²¡æœ‰å‘ç°ä¸»èŠ‚ç‚¹å­˜åœ¨ï¼ŒèŠ‚ç‚¹å°±ä¼šåœ¨å¿ƒè·³è¶…æ—¶åä½¿ç”¨ Basic Paxos ä¸­å®šä¹‰çš„å‡†å¤‡ã€æ‰¹å‡†çš„ä¸¤è½®ç½‘ç»œäº¤äº’è¿‡ç¨‹ï¼Œå‘æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹å¹¿æ’­è‡ªå·±å¸Œæœ›ç«é€‰ä¸»èŠ‚ç‚¹çš„è¯·æ±‚ï¼Œå¸Œæœ›æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¯¹â€œç”±æˆ‘ä½œä¸ºä¸»èŠ‚ç‚¹â€è¿™ä»¶äº‹æƒ…åå•†è¾¾æˆä¸€è‡´å…±è¯†ï¼Œå¦‚æœå¾—åˆ°äº†å†³ç­–èŠ‚ç‚¹ä¸­å¤šæ•°æ´¾çš„æ‰¹å‡†ï¼Œä¾¿å®£å‘Šç«é€‰æˆåŠŸã€‚å½“é€‰ä¸»å®Œæˆä¹‹åï¼Œé™¤éä¸»èŠ‚ç‚¹å¤±è”ä¹‹åå‘èµ·é‡æ–°ç«é€‰ï¼Œå¦åˆ™ä»æ­¤å¾€åï¼Œå°±åªæœ‰ä¸»èŠ‚ç‚¹æœ¬èº«æ‰èƒ½å¤Ÿæå‡ºææ¡ˆã€‚<br><img src="/../../../img/Pasted%20image%2020230925212755.png"></p><p><img src="/../../../img/Pasted%20image%2020230925212759.png"></p><h4 id="Gossipåè®®"><a href="#Gossipåè®®" class="headerlink" title="Gossipåè®®"></a>Gossipåè®®</h4><p>å¼ºä¸€è‡´æ€§åè®®ï¼šPaxosã€Raftã€ZAB<br>æœ€ç»ˆä¸€è‡´æ€§ï¼šDNSã€Gossip</p><p>Gossipè¿‡ç¨‹</p><ul><li><p>å¦‚æœæœ‰æŸä¸€é¡¹ä¿¡æ¯éœ€è¦åœ¨æ•´ä¸ªç½‘ç»œä¸­æ‰€æœ‰èŠ‚ç‚¹ä¸­ä¼ æ’­ï¼Œé‚£ä»ä¿¡æ¯æºå¼€å§‹ï¼Œé€‰æ‹©ä¸€ä¸ªå›ºå®šçš„ä¼ æ’­å‘¨æœŸï¼ˆè­¬å¦‚ 1 ç§’ï¼‰ï¼Œéšæœºé€‰æ‹©å®ƒç›¸è¿æ¥çš„ k ä¸ªèŠ‚ç‚¹ï¼ˆç§°ä¸º Fan-Outï¼‰æ¥ä¼ æ’­æ¶ˆæ¯ã€‚</p></li><li><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°æ¶ˆæ¯åï¼Œå¦‚æœè¿™ä¸ªæ¶ˆæ¯æ˜¯å®ƒä¹‹å‰æ²¡æœ‰æ”¶åˆ°è¿‡çš„ï¼Œå°†åœ¨ä¸‹ä¸€ä¸ªå‘¨æœŸå†…ï¼Œé€‰æ‹©é™¤äº†å‘é€æ¶ˆæ¯ç»™å®ƒçš„é‚£ä¸ªèŠ‚ç‚¹å¤–çš„å…¶ä»–ç›¸é‚» k ä¸ªèŠ‚ç‚¹å‘é€ç›¸åŒçš„æ¶ˆæ¯ï¼Œç›´åˆ°æœ€ç»ˆç½‘ç»œä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œå°½ç®¡è¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¸€å®šæ—¶é—´ï¼Œä½†æ˜¯ç†è®ºä¸Šæœ€ç»ˆç½‘ç»œçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šæ‹¥æœ‰ç›¸åŒçš„æ¶ˆæ¯ã€‚<br><img src="/../../../img/gossip.0eb19e80.gif"></p></li></ul><h2 id="ä»ç±»åº“åˆ°æœåŠ¡"><a href="#ä»ç±»åº“åˆ°æœåŠ¡" class="headerlink" title="ä»ç±»åº“åˆ°æœåŠ¡"></a>ä»ç±»åº“åˆ°æœåŠ¡</h2><h3 id="æœåŠ¡å‘ç°"><a href="#æœåŠ¡å‘ç°" class="headerlink" title="æœåŠ¡å‘ç°"></a>æœåŠ¡å‘ç°</h3><hr><p>è¿œç¨‹æœåŠ¡è°ƒç”¨ä¸‰è¦ç´ ï¼šå…¨é™å®šåã€ç«¯å£å·ã€æœåŠ¡æ ‡è¯†<br>ç›¸å…³çš„ç»„ä»¶ï¼šZooKeeperã€Eurekaã€Nacos</p><p>æœåŠ¡å‘ç°çš„æ­¥éª¤</p><ul><li><strong>æœåŠ¡çš„æ³¨å†Œ</strong>ï¼ˆService Registrationï¼‰ï¼šå½“æœåŠ¡å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒåº”è¯¥é€šè¿‡æŸäº›å½¢å¼ï¼ˆå¦‚è°ƒç”¨ APIã€äº§ç”Ÿäº‹ä»¶æ¶ˆæ¯ã€åœ¨ ZooKeeper&#x2F;Etcd çš„æŒ‡å®šä½ç½®è®°å½•ã€å­˜å…¥æ•°æ®åº“ï¼Œç­‰ç­‰ï¼‰å°†è‡ªå·±çš„åæ ‡ä¿¡æ¯é€šçŸ¥åˆ°<code>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</code>ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ç”±åº”ç”¨ç¨‹åºæœ¬èº«æ¥å®Œæˆï¼Œç§°ä¸ºè‡ªæ³¨å†Œæ¨¡å¼ï¼Œè­¬å¦‚ Spring Cloud çš„@EnableEurekaClient æ³¨è§£ï¼›ä¹Ÿå¯èƒ½ç”±å®¹å™¨ç¼–æ’æ¡†æ¶æˆ–ç¬¬ä¸‰æ–¹æ³¨å†Œå·¥å…·æ¥å®Œæˆï¼Œç§°ä¸ºç¬¬ä¸‰æ–¹æ³¨å†Œæ¨¡å¼ï¼Œè­¬å¦‚ Kubernetes å’Œ Registratorã€‚</li><li><strong>æœåŠ¡çš„ç»´æŠ¤</strong>ï¼ˆService Maintainingï¼‰ï¼šå°½ç®¡æœåŠ¡å‘ç°æ¡†æ¶é€šå¸¸éƒ½æœ‰æä¾›ä¸‹çº¿æœºåˆ¶ï¼Œä½†å¹¶æ²¡æœ‰ä»€ä¹ˆåŠæ³•ä¿è¯æ¯æ¬¡æœåŠ¡éƒ½èƒ½<a href="https://whatis.techtarget.com/definition/graceful-shutdown-and-hard-shutdown">ä¼˜é›…åœ°ä¸‹çº¿</a>ï¼ˆGraceful Shutdownï¼‰è€Œä¸æ˜¯ç”±äºå®•æœºã€æ–­ç½‘ç­‰åŸå› çªç„¶å¤±è”ã€‚æ‰€ä»¥æœåŠ¡å‘ç°æ¡†æ¶å¿…é¡»è¦è‡ªå·±å»ä¿è¯æ‰€ç»´æŠ¤çš„æœåŠ¡åˆ—è¡¨çš„æ­£ç¡®æ€§ï¼Œä»¥é¿å…å‘ŠçŸ¥æ¶ˆè´¹è€…æœåŠ¡çš„åæ ‡åï¼Œå¾—åˆ°çš„æœåŠ¡å´ä¸èƒ½ä½¿ç”¨çš„å°´å°¬æƒ…å†µã€‚ç°åœ¨çš„æœåŠ¡å‘ç°æ¡†æ¶ï¼Œå¾€å¾€éƒ½èƒ½æ”¯æŒå¤šç§åè®®ï¼ˆHTTPã€TCP ç­‰ï¼‰ã€å¤šç§æ–¹å¼ï¼ˆé•¿è¿æ¥ã€å¿ƒè·³ã€æ¢é’ˆã€è¿›ç¨‹çŠ¶æ€ç­‰ï¼‰å»ç›‘æ§æœåŠ¡æ˜¯å¦å¥åº·å­˜æ´»ï¼Œå°†ä¸å¥åº·çš„æœåŠ¡è‡ªåŠ¨ä»æœåŠ¡æ³¨å†Œè¡¨ä¸­å‰”é™¤ã€‚</li><li><strong>æœåŠ¡çš„å‘ç°</strong>ï¼ˆService Discoveryï¼‰ï¼šè¿™é‡Œçš„å‘ç°æ˜¯ç‰¹æŒ‡ç‹­ä¹‰ä¸Šæ¶ˆè´¹è€…ä»æœåŠ¡å‘ç°æ¡†æ¶ä¸­ï¼ŒæŠŠä¸€ä¸ªç¬¦å·ï¼ˆè­¬å¦‚ Eureka ä¸­çš„ ServiceIDã€Nacos ä¸­çš„æœåŠ¡åã€æˆ–è€…é€šç”¨çš„ FQDNï¼‰è½¬æ¢ä¸ºæœåŠ¡å®é™…åæ ‡çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç°åœ¨ä¸€èˆ¬æ˜¯é€šè¿‡ HTTP API è¯·æ±‚æˆ–è€…é€šè¿‡ DNS Lookup æ“ä½œæ¥å®Œæˆï¼Œä¹Ÿè¿˜æœ‰ä¸€äº›ç›¸å¯¹å°‘ç”¨çš„æ–¹å¼ï¼Œè­¬å¦‚ Kubernetes ä¹Ÿæ”¯æŒæ³¨å…¥ç¯å¢ƒå˜é‡æ¥åšæœåŠ¡å‘ç°ã€‚</li></ul><h4 id="æ³¨å†Œä¸­å¿ƒå®ç°"><a href="#æ³¨å†Œä¸­å¿ƒå®ç°" class="headerlink" title="æ³¨å†Œä¸­å¿ƒå®ç°"></a>æ³¨å†Œä¸­å¿ƒå®ç°</h4><hr><ul><li>åœ¨åˆ†å¸ƒå¼ K&#x2F;V å­˜å‚¨æ¡†æ¶ä¸Šè‡ªå·±å¼€å‘çš„æœåŠ¡å‘ç°ï¼Œè¿™ç±»çš„ä»£è¡¨æ˜¯ ZooKeeperã€Doozerdã€Etcdã€‚</li><li>ä»¥åŸºç¡€è®¾æ–½ï¼ˆä¸»è¦æ˜¯æŒ‡ DNS æœåŠ¡å™¨ï¼‰æ¥å®ç°æœåŠ¡å‘ç°ï¼Œè¿™ç±»çš„ä»£è¡¨æ˜¯ SkyDNSã€CoreDNSã€‚</li><li>ä¸“é—¨ç”¨äºæœåŠ¡å‘ç°çš„æ¡†æ¶å’Œå·¥å…·ï¼Œè¿™ç±»çš„ä»£è¡¨æ˜¯ Eurekaã€Consul å’Œ Nacosã€‚</li></ul><h3 id="ç½‘å…³è·¯ç”±"><a href="#ç½‘å…³è·¯ç”±" class="headerlink" title="ç½‘å…³è·¯ç”±"></a>ç½‘å…³è·¯ç”±</h3><p>ç½‘å…³ &#x3D; è·¯ç”±å™¨ï¼ˆåŸºç¡€èŒèƒ½ï¼‰ + è¿‡æ»¤å™¨ï¼ˆå¯é€‰èŒèƒ½ï¼‰</p><p>ç½‘ç»œIOæ¨¡å‹<br>ä¸¤ç±»äº”ç§</p><p>ä¸¤ç±»æ˜¯æŒ‡åŒæ­¥ I&#x2F;Oä¸å¼‚æ­¥ I&#x2F;Oï¼Œäº”ç§æ˜¯æŒ‡åœ¨åŒæ­¥ IO ä¸­åˆåˆ†æœ‰åˆ’åˆ†å‡ºé˜»å¡ I&#x2F;Oã€éé˜»å¡ I&#x2F;Oã€å¤šè·¯å¤ç”¨ I&#x2F;Oå’Œä¿¡å·é©±åŠ¨ I&#x2F;Oå››ç§ç»†åˆ†æ¨¡å‹ã€‚</p><ul><li><strong>å¼‚æ­¥ I&#x2F;O</strong>ï¼ˆAsynchronous I&#x2F;Oï¼‰ï¼šå¥½æ¯”ä½ åœ¨ç¾å›¢å¤–å–è®¢äº†ä¸ªç›’é¥­ï¼Œä»˜æ¬¾ä¹‹åä½ è‡ªå·±è¯¥å¹²å˜›è¿˜å¹²å˜›å»ï¼Œé¥­åšå¥½äº†éª‘æ‰‹è‡ªç„¶ä¼šåˆ°é—¨å£æ‰“ç”µè¯é€šçŸ¥ä½ ã€‚å¼‚æ­¥ I&#x2F;O ä¸­æ•°æ®åˆ°è¾¾ç¼“å†²åŒºåï¼Œä¸éœ€è¦ç”±è°ƒç”¨è¿›ç¨‹ä¸»åŠ¨è¿›è¡Œä»ç¼“å†²åŒºå¤åˆ¶æ•°æ®çš„æ“ä½œï¼Œè€Œæ˜¯å¤åˆ¶å®Œæˆåç”±æ“ä½œç³»ç»Ÿå‘çº¿ç¨‹å‘é€ä¿¡å·ï¼Œæ‰€ä»¥å®ƒä¸€å®šæ˜¯éé˜»å¡çš„ã€‚</li><li><strong>åŒæ­¥ I&#x2F;O</strong>ï¼ˆSynchronous I&#x2F;Oï¼‰ï¼šå¥½æ¯”ä½ è‡ªå·±å»é¥­å ‚æ‰“é¥­ï¼Œè¿™æ—¶å¯èƒ½æœ‰å¦‚ä¸‹æƒ…å½¢å‘ç”Ÿï¼š<ul><li><strong>é˜»å¡ I&#x2F;O</strong>ï¼ˆBlocking I&#x2F;Oï¼‰ï¼šä½ å»åˆ°é¥­å ‚ï¼Œå‘ç°é¥­è¿˜æ²¡åšå¥½ï¼Œä½ ä¹Ÿå¹²ä¸äº†åˆ«çš„ï¼Œåªèƒ½æ‰“ä¸ªçŒç¡ï¼ˆçº¿ç¨‹ä¼‘çœ ï¼‰ï¼Œç›´åˆ°é¥­åšå¥½ï¼Œè¿™å°±æ˜¯è¢«é˜»å¡äº†ã€‚é˜»å¡ I&#x2F;O æ˜¯æœ€ç›´è§‚çš„ I&#x2F;O æ¨¡å‹ï¼Œé€»è¾‘æ¸…æ™°ï¼Œä¹Ÿæ¯”è¾ƒèŠ‚çœ CPU èµ„æºï¼Œä½†ç¼ºç‚¹å°±æ˜¯çº¿ç¨‹ä¼‘çœ æ‰€å¸¦æ¥çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™æ˜¯ä¸€ç§éœ€è¦åˆ‡æ¢åˆ°å†…æ ¸æ€çš„é‡è´Ÿè½½æ“ä½œï¼Œä¸åº”å½“é¢‘ç¹è¿›è¡Œã€‚</li><li><strong>éé˜»å¡ I&#x2F;O</strong>ï¼ˆNon-Blocking I&#x2F;Oï¼‰ï¼šä½ å»åˆ°é¥­å ‚ï¼Œå‘ç°é¥­è¿˜æ²¡åšå¥½ï¼Œä½ å°±å›å»äº†ï¼Œç„¶åæ¯éš” 3 åˆ†é’Ÿæ¥ä¸€æ¬¡é¥­å ‚çœ‹é¥­åšå¥½äº†æ²¡ï¼Œç›´åˆ°é¥­åšå¥½ã€‚éé˜»å¡ I&#x2F;O èƒ½å¤Ÿé¿å…çº¿ç¨‹ä¼‘çœ ï¼Œå¯¹äºä¸€äº›å¾ˆå¿«å°±èƒ½è¿”å›ç»“æœçš„è¯·æ±‚ï¼Œéé˜»å¡ I&#x2F;O å¯ä»¥èŠ‚çœåˆ‡æ¢ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¶ˆè€—ï¼Œä½†æ˜¯å¯¹äºè¾ƒé•¿æ—¶é—´æ‰èƒ½è¿”å›çš„è¯·æ±‚ï¼Œéé˜»å¡ I&#x2F;O åè€Œç™½ç™½æµªè´¹äº† CPU èµ„æºï¼Œæ‰€ä»¥ç›®å‰å¹¶ä¸å¸¸ç”¨ã€‚</li><li><strong>å¤šè·¯å¤ç”¨ I&#x2F;O</strong>ï¼ˆMultiplexing I&#x2F;Oï¼‰ï¼šå¤šè·¯å¤ç”¨ I&#x2F;O æœ¬è´¨ä¸Šæ˜¯é˜»å¡ I&#x2F;O çš„ä¸€ç§ï¼Œä½†æ˜¯å®ƒçš„å¥½å¤„æ˜¯å¯ä»¥åœ¨åŒä¸€æ¡é˜»å¡çº¿ç¨‹ä¸Šå¤„ç†å¤šä¸ªä¸åŒç«¯å£çš„ç›‘å¬ã€‚ç±»æ¯”çš„æƒ…æ™¯æ˜¯ä½ åå­—å«é›·é”‹ï¼Œä»£è¡¨æ•´ä¸ªå®¿èˆå»é¥­å ‚æ‰“é¥­ï¼Œå»åˆ°é¥­å ‚ï¼Œå‘ç°é¥­è¿˜æ²¡åšå¥½ï¼Œè¿˜æ˜¯ç»§ç»­æ‰“çŒç¡ï¼Œä½†å“ªä¸ªèˆå‹çš„é¥­å¥½äº†ï¼Œä½ å°±é©¬ä¸ŠæŠŠé‚£ä»½é¥­é€å›å»ï¼Œç„¶åç»§ç»­æ‰“ç€çŒç¡å“¼ç€æ­Œç­‰å¾…å…¶ä»–çš„é¥­åšå¥½ã€‚å¤šè·¯å¤ç”¨ I&#x2F;O æ˜¯ç›®å‰çš„é«˜å¹¶å‘ç½‘ç»œåº”ç”¨çš„ä¸»æµï¼Œå®ƒä¸‹é¢è¿˜å¯ä»¥ç»†åˆ† selectã€epollã€kqueue ç­‰ä¸åŒå®ç°ï¼Œè¿™é‡Œå°±ä¸ä½œå±•å¼€äº†ã€‚</li><li><strong>ä¿¡å·é©±åŠ¨ I&#x2F;O</strong>ï¼ˆSignal-Driven I&#x2F;Oï¼‰ï¼šä½ å»åˆ°é¥­å ‚ï¼Œå‘ç°é¥­è¿˜æ²¡åšå¥½ï¼Œä½†ä½ è·Ÿå¨å¸ˆç†Ÿï¼Œè·Ÿä»–è¯´é¥­åšå¥½äº†å«ä½ ï¼Œç„¶åå›å»è¯¥å¹²å˜›å¹²å˜›ï¼Œç­‰æ”¶åˆ°å¨å¸ˆé€šçŸ¥åï¼Œä½ æŠŠé¥­ä»é¥­å ‚æ‹¿å›å®¿èˆã€‚è¿™é‡Œå¨å¸ˆçš„é€šçŸ¥å°±æ˜¯é‚£ä¸ªâ€œä¿¡å·â€ï¼Œä¿¡å·é©±åŠ¨ I&#x2F;O ä¸å¼‚æ­¥ I&#x2F;O çš„åŒºåˆ«æ˜¯â€œä»ç¼“å†²åŒºè·å–æ•°æ®â€è¿™ä¸ªæ­¥éª¤çš„å¤„ç†ï¼Œå‰è€…æ”¶åˆ°çš„é€šçŸ¥æ˜¯å¯ä»¥å¼€å§‹è¿›è¡Œå¤åˆ¶æ“ä½œäº†ï¼Œå³è¦ä½ è‡ªå·±ä»é¥­å ‚æ‹¿å›å®¿èˆï¼Œåœ¨å¤åˆ¶å®Œæˆä¹‹å‰çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ‰€ä»¥å®ƒä»å±äºåŒæ­¥ I&#x2F;O æ“ä½œï¼Œè€Œåè€…æ”¶åˆ°çš„é€šçŸ¥æ˜¯å¤åˆ¶æ“ä½œå·²ç»å®Œæˆï¼Œå³å¤–å–å°å“¥å·²ç»æŠŠé¥­é€åˆ°äº†ã€‚</li></ul></li></ul><h3 id="å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡"><a href="#å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡" class="headerlink" title="å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡"></a>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</h3><p><strong>æ¡ˆä¾‹åœºæ™¯ï¼š</strong></p><p>å‡è®¾ä½ èº«å¤„å¹¿ä¸œï¼Œè¦ä¸Š Fenixâ€™s Bookstore è´­ä¹°ä¸€æœ¬ä¹¦ï¼Œåœ¨ç¨‹åºä¸šåŠ¡é€»è¾‘é‡Œï¼Œè´­ä¹¦å…¶ä¸­ä¸€ä¸ªå…³é”®æ­¥éª¤æ˜¯è°ƒç”¨å•†å“å‡ºåº“æœåŠ¡æ¥å®Œæˆè´§ç‰©å‡†å¤‡ï¼Œåœ¨ä»£ç ä¸­è¯¥æœåŠ¡çš„è°ƒç”¨è¯·æ±‚ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PATCH https://warehouse:8080/restful/stockpile/3</span><br><span class="line"></span><br><span class="line">&#123;amount: -1&#125;</span><br></pre></td></tr></table></figure><p>åˆå‡è®¾ Fenixâ€™s Bookstore æ˜¯ä¸ªå¤§ä¹¦åº—ï¼Œåœ¨åŒ—äº¬ã€æ­¦æ±‰ã€å¹¿å·çš„æœºæˆ¿å‡éƒ¨ç½²æœ‰æœåŠ¡é›†ç¾¤ï¼Œä½ çš„è´­ç‰©è¯·æ±‚ä»æµè§ˆå™¨å‘å‡ºåï¼ŒæœåŠ¡ç«¯æŒ‰é¡ºåºå‘ç”Ÿäº†å¦‚ä¸‹äº‹ä»¶ï¼š</p><ol><li><p>é¦–å…ˆæ˜¯å°†<code>warehouse</code>è¿™ä¸ªæœåŠ¡åç§°è½¬æ¢ä¸ºæ°å½“çš„æœåŠ¡åœ°å€ï¼Œâ€œæ°å½“â€æ˜¯ä¸ªå®½æ³›çš„æè¿°ï¼Œä¸€ç§å…¸å‹çš„â€œæ°å½“â€ä¾¿æ˜¯å› è°ƒç”¨è¯·æ±‚æ¥è‡ªå¹¿ä¸œï¼Œä¼˜å…ˆåˆ†é…ç»™ä¼ è¾“è·ç¦»æœ€çŸ­çš„å¹¿å·æœºæˆ¿æ¥åº”ç­”ã€‚å…¶å®æŒ‰å¸¸ç†æ¥è¯´è¿™æ¬¡å‡ºåº“æœåŠ¡çš„è°ƒç”¨åº”è¯¥æ˜¯é›†ç¾¤å†…çš„æµé‡ï¼Œè€Œä¸æ˜¯ç”¨æˆ·æµè§ˆå™¨ç›´æ¥å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥å°½ç®¡ç»“æœæ²¡æœ‰ä¸åŒï¼Œä½†æ›´æ¥è¿‘å®é™…çš„çš„æƒ…å†µæ˜¯ç”¨æˆ·è®¿é—®é¦–é¡µæ—¶å·²ç»è¢« DNS æœåŠ¡å™¨åˆ†é…åˆ°äº†å¹¿å·æœºæˆ¿ï¼Œè¯·æ±‚å‡ºåº“æœåŠ¡æ—¶ï¼Œåº”ä¼˜å…ˆé€‰æ‹©åŒæœºæˆ¿çš„æœåŠ¡è¿›è¡Œè°ƒç”¨ï¼Œæ­¤æ—¶è¯·æ±‚å˜ä¸ºï¼š</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCH https://guangzhou-ip-wan:8080/restful/stockpile/3</span><br></pre></td></tr></table></figure></li><li><p>å¹¿å·æœºæˆ¿çš„æœåŠ¡ç½‘å…³å°†è¯¥è¯·æ±‚ä¸é…ç½®ä¸­çš„ç‰¹å¾è¿›è¡Œæ¯”å¯¹ï¼Œç”± URL ä¸­çš„<code>/restful/stockpile/**</code>å¾—çŸ¥è¯¥è¯·æ±‚è®¿é—®çš„æ˜¯å•†å“å‡ºåº“æœåŠ¡ï¼Œå› æ­¤ï¼Œå°†è¯·æ±‚çš„ IP åœ°å€è½¬æ¢ä¸ºå†…ç½‘ä¸­ warehouse æœåŠ¡é›†ç¾¤çš„å…¥å£åœ°å€ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCH https://warehouse-gz-lan:8080/restful/stockpile/3</span><br></pre></td></tr></table></figure></li><li><p>é›†ç¾¤ä¸­éƒ¨ç½²æœ‰å¤šä¸ª warehouse æœåŠ¡ï¼Œæ”¶åˆ°è°ƒç”¨è¯·æ±‚åï¼Œè´Ÿè½½å‡è¡¡å™¨è¦åœ¨å¤šä¸ªæœåŠ¡ä¸­æ ¹æ®æŸç§æ ‡å‡†â€”â€”å¯èƒ½æ˜¯éšæœºæŒ‘é€‰ï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‰é¡ºåºè½®è¯¢ï¼ŒæŠ‘æˆ–æ˜¯é€‰æ‹©æ­¤å‰è°ƒç”¨æ¬¡æ•°æœ€å°‘é‚£ä¸ªï¼Œç­‰ç­‰ã€‚æ ¹æ®å‡è¡¡ç­–ç•¥æ‰¾å‡ºè¦å“åº”æœ¬æ¬¡è°ƒç”¨çš„æœåŠ¡ï¼Œç§°å…¶ä¸º<code>warehouse-gz-lan-node1</code>ã€‚</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCH https://warehouse-gz-lan-node1:8080/restful/stockpile/3</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœè®¿é—®<code>warehouse-gz-lan-node1</code>æœåŠ¡ï¼Œæ²¡æœ‰è¿”å›éœ€è¦çš„ç»“æœï¼Œè€Œæ˜¯æŠ›å‡º 500 é”™ã€‚</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 500 Internal Server Error</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®é¢„ç½®çš„<a href="http://icyfenix.cn/distribution/traffic-management/failure.html">æ•…éšœè½¬ç§»</a>ï¼ˆFailoverï¼‰ç­–ç•¥ï¼Œé‡è¯•å°†è°ƒç”¨åˆ†é…ç»™èƒ½å¤Ÿæä¾›è¯¥æœåŠ¡çš„å…¶ä»–èŠ‚ç‚¹ï¼Œç§°å…¶ä¸º<code>warehouse-gz-lan-node2</code>ã€‚</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCH https://warehouse-gz-lan-node2:8080/restful/stockpile/3</span><br></pre></td></tr></table></figure></li><li><p><code>warehouse-gz-lan-node2</code>æœåŠ¡è¿”å›å•†å“å‡ºåº“æˆåŠŸã€‚</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br></pre></td></tr></table></figure></li></ol><p>ä»¥ä¸Šè¿‡ç¨‹ä»æ•´ä½“ä¸Šçœ‹ï¼Œæ­¥éª¤ 1ã€2ã€3ã€5ï¼Œåˆ†åˆ«å¯¹åº”äº†<strong>æœåŠ¡å‘ç°</strong>ã€<strong>ç½‘å…³è·¯ç”±</strong>ã€<strong>è´Ÿè½½å‡è¡¡</strong>å’Œ<strong>æœåŠ¡å®¹é”™</strong></p><h4 id="å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨"><a href="#å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨" class="headerlink" title="å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨"></a>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨</h4><p>è®¿é—®è¯·æ±‚æ˜¯ç”±é›†ç¾¤å†…éƒ¨çš„æŸä¸ªæœåŠ¡å‘èµ·ï¼Œç”±é›†ç¾¤å†…éƒ¨çš„å¦ä¸€ä¸ªæœåŠ¡è¿›è¡Œå“åº”çš„ã€‚ä¸€ç§å…¨æ–°çš„ã€ç‹¬ç«‹ä½äºæ¯ä¸ªæœåŠ¡å‰ç«¯çš„ã€åˆ†æ•£å¼çš„è´Ÿè½½å‡è¡¡æ–¹å¼æ­£é€æ¸å˜å¾—æµè¡Œèµ·æ¥ï¼Œè¿™å°±æ˜¯æœ¬èŠ‚æˆ‘ä»¬è¦è®¨è®ºçš„ä¸»è§’ï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨ã€‚<br><img src="/../../../img/Pasted%20image%2020230927092158.png"></p><ul><li>å®¢æˆ·ç«¯å‡è¡¡å™¨æ˜¯å’ŒæœåŠ¡å®ä¾‹ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸æœåŠ¡å®ä¾‹åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¹‹å†…ã€‚</li><li>å‡è¡¡å™¨ä¸æœåŠ¡ä¹‹é—´ä¿¡æ¯äº¤æ¢æ˜¯è¿›ç¨‹å†…çš„æ–¹æ³•è°ƒç”¨ï¼Œä¸å­˜åœ¨ä»»ä½•é¢å¤–çš„ç½‘ç»œå¼€é”€ã€‚</li></ul><ul><li>ä¸ä¾èµ–é›†ç¾¤è¾¹ç¼˜çš„è®¾æ–½ï¼Œæ‰€æœ‰å†…éƒ¨æµé‡éƒ½ä»…åœ¨æœåŠ¡é›†ç¾¤çš„å†…éƒ¨å¾ªç¯ï¼Œé¿å…äº†å‡ºç°å‰æ–‡é‚£æ ·ï¼Œé›†ç¾¤å†…éƒ¨æµé‡è¦â€œç»•åœºä¸€å‘¨â€çš„å°´å°¬å±€é¢ã€‚</li><li>åˆ†æ•£å¼çš„å‡è¡¡å™¨æ„å‘³ç€å¤©ç„¶é¿å…äº†é›†ä¸­å¼çš„å•ç‚¹é—®é¢˜ï¼Œå®ƒçš„å¸¦å®½èµ„æºå°†ä¸ä¼šåƒé›†ä¸­å¼å‡è¡¡å™¨é‚£æ ·æ•æ„Ÿï¼Œè¿™åœ¨ä»¥ä¸ƒå±‚å‡è¡¡å™¨ä¸ºä¸»æµã€ä¸èƒ½é€šè¿‡ IP éš§é“å’Œä¸‰è§’ä¼ è¾“è¿™æ ·æ–¹å¼èŠ‚çœå¸¦å®½çš„å¾®æœåŠ¡ç¯å¢ƒä¸­æ˜¾å¾—æ›´å…·ä¼˜åŠ¿ã€‚</li><li>å®¢æˆ·ç«¯å‡è¡¡å™¨è¦æ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿé’ˆå¯¹æ¯ä¸€ä¸ªæœåŠ¡å®ä¾‹å•ç‹¬è®¾ç½®å‡è¡¡ç­–ç•¥ç­‰å‚æ•°ï¼Œè®¿é—®æŸä¸ªæœåŠ¡ï¼Œæ˜¯ä¸æ˜¯éœ€è¦å…·å¤‡äº²å’Œæ€§ï¼Œé€‰æ‹©æœåŠ¡çš„ç­–ç•¥æ˜¯éšæœºã€è½®è¯¢ã€åŠ æƒè¿˜æ˜¯æœ€å°è¿æ¥ç­‰ç­‰ï¼Œéƒ½å¯ä»¥å•ç‹¬è®¾ç½®è€Œä¸å½±å“å…¶å®ƒæœåŠ¡ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>åŒä¸€ä¸ªè¿›ç¨‹ï¼Œæ„å‘³ç€éš¾ä»¥è¿›è¡ŒæŠ€æœ¯å¼‚æ„ï¼Œä½¿ç”¨åŒä¸€è¯­è¨€å¼€å‘ã€‚</li><li>å…±ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼Œå‡è¡¡å™¨çš„ç¨³å®šæ€§ä¼šç›´æ¥å½±å“æ•´ä¸ªæœåŠ¡è¿›ç¨‹çš„ç¨³å®šæ€§ï¼ŒåŒæ ·æ¶ˆè€—èµ„æºã€‚</li><li>å†…éƒ¨ç½‘ç»œå®‰å…¨æ€§</li><li>æœåŠ¡é›†ç¾¤çš„æ‹“æ‰‘å…³ç³»åŠ¨æ€å˜åŒ–ï¼Œåˆ™å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨éœ€è¦ä¸€ç›´è½®è¯¢æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚</li></ul><h4 id="ä»£ç†è´Ÿè½½å‡è¡¡å™¨"><a href="#ä»£ç†è´Ÿè½½å‡è¡¡å™¨" class="headerlink" title="ä»£ç†è´Ÿè½½å‡è¡¡å™¨"></a>ä»£ç†è´Ÿè½½å‡è¡¡å™¨</h4><p>ä½¿ç”¨<code>è¾¹è½¦ä»£ç†</code>æ¨¡å¼ï¼Œä¸æ˜¯è¿›ç¨‹å†…é€šä¿¡ï¼Œé€šè¿‡ç½‘ç»œè¿›è¡Œ</p><p><img src="/../../../img/Pasted%20image%2020230927092651.png"><br>ä¼˜ç‚¹ï¼š</p><ul><li>æ”¯æŒäº†æŠ€æœ¯å¼‚æ„ï¼Œç‹¬ç«‹äºæœåŠ¡è¿›ç¨‹çš„å‡è¡¡å™¨ä¹Ÿä¸ä¼šç”±äºè‡ªèº«çš„ç¨³å®šæ€§å½±å“åˆ°æœåŠ¡è¿›ç¨‹çš„ç¨³å®šã€‚</li><li>åœ¨æœåŠ¡æ‹“æ‰‘æ„ŸçŸ¥æ–¹é¢ä»£ç†å‡è¡¡å™¨ä¹Ÿè¦æ›´æœ‰ä¼˜åŠ¿ã€‚ç”±äºè¾¹è½¦ä»£ç†æ¥å—æ§åˆ¶å¹³é¢çš„ç»Ÿä¸€ç®¡ç†ï¼Œå½“æœåŠ¡èŠ‚ç‚¹æ‹“æ‰‘å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ§åˆ¶å¹³é¢å°±ä¼šä¸»åŠ¨å‘è¾¹è½¦ä»£ç†å‘é€æ›´æ–°æœåŠ¡æ¸…å•çš„æ§åˆ¶æŒ‡ä»¤ï¼Œè¿™é¿å…äº†æ­¤å‰å®¢æˆ·ç«¯å‡è¡¡å™¨å¿…é¡»é•¿æœŸä¸»åŠ¨è½®è¯¢æœåŠ¡æ³¨å†Œä¸­å¿ƒæ‰€é€ æˆçš„æµªè´¹ã€‚</li><li>åœ¨å®‰å…¨æ€§ã€å¯è§‚æµ‹æ€§ä¸Šï¼Œç”±äºè¾¹è½¦ä»£ç†éƒ½æ˜¯ä¸€è‡´çš„å®ç°ï¼Œæœ‰åˆ©äºåœ¨æœåŠ¡é—´å»ºç«‹åŒå‘ TLS é€šä¿¡ï¼Œä¹Ÿæœ‰åˆ©äºå¯¹æ•´ä¸ªè°ƒç”¨é“¾è·¯ç»™å‡ºæ›´è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul><h4 id="åœ°åŸŸä¸åŒºåŸŸ"><a href="#åœ°åŸŸä¸åŒºåŸŸ" class="headerlink" title="åœ°åŸŸä¸åŒºåŸŸ"></a>åœ°åŸŸä¸åŒºåŸŸ</h4><ul><li>Regionï¼š<strong>åœ°åŸŸ</strong>ï¼Œå¦‚ååŒ—ï¼Œåä¸œï¼Œåå—ã€‚å¤§å‹ç³»ç»Ÿå°±æ˜¯é€šè¿‡ä¸åŒåœ°åŸŸçš„æœºæˆ¿æ¥ç¼©çŸ­ç”¨æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç‰©ç†è·ç¦»ã€‚ä¸åŒåœ°åŸŸä¹‹é—´é€šè¿‡å…¬ä¼—äº’è”ç½‘è¿æ¥ï¼Œè€Œä¸æ˜¯å†…ç½‘ï¼ŒæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡å™¨é»˜è®¤ä¸æ”¯æŒè·¨åœ°åŸŸçš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ã€‚</li><li>Zoneï¼š<strong>åŒºåŸŸ</strong>ï¼Œä½äºåŒä¸€<strong>åœ°åŸŸ</strong>ï¼Œå¦‚åœ¨åä¸œçš„ä¸Šæµ·ã€æ­å·ã€è‹å·çš„ä¸åŒæœºæˆ¿ï¼Œä½¿ç”¨ä¸åŒçš„ç”µåŠ›ç³»ç»Ÿå’Œç½‘ç»œç³»ç»Ÿã€‚åŒä¸€ä¸ªåŒºåŸŸä½¿ç”¨å†…ç½‘è¿æ¥ã€‚</li></ul><h2 id="æµé‡æ²»ç†"><a href="#æµé‡æ²»ç†" class="headerlink" title="æµé‡æ²»ç†"></a>æµé‡æ²»ç†</h2><blockquote><p>å®¹é”™æ€§è®¾è®¡æ˜¯å¾®æœåŠ¡ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œé€šè¿‡æœåŠ¡å®¹é”™å’Œæµé‡æ§åˆ¶ç­‰è§£å†³æ–¹æ¡ˆæ¥å°½å¯èƒ½é¿å…ã€‚</p></blockquote><h3 id="æœåŠ¡å®¹é”™"><a href="#æœåŠ¡å®¹é”™" class="headerlink" title="æœåŠ¡å®¹é”™"></a>æœåŠ¡å®¹é”™</h3><h4 id="å®¹é”™ç­–ç•¥"><a href="#å®¹é”™ç­–ç•¥" class="headerlink" title="å®¹é”™ç­–ç•¥"></a>å®¹é”™ç­–ç•¥</h4><ul><li>æ•…éšœè½¬ç§»ï¼šæœåŠ¡æœ‰å¤šä¸ªå‰¯æœ¬ï¼Œå¤±è´¥åˆ™åˆ‡æ¢åˆ°å…¶ä»–å‰¯æœ¬å°è¯•ï¼Œä½†æœ‰æ¬¡æ•°ä¸Šé™ï¼Œä¸ä¼šæ— é™åˆ¶é‡è¯•ã€‚</li><li>å¿«é€Ÿå¤±è´¥ï¼šéå¹‚ç­‰æ€§æœåŠ¡ï¼Œéœ€è¦é¿å…é‡å¤è°ƒç”¨å¯¼è‡´è„æ•°æ®ï¼Œå¦‚æ‰£æ¬¾ã€‚å› æ­¤ç›´æ¥è¿”å›å¤±è´¥ã€‚</li><li>å®‰å…¨å¤±è´¥ï¼šæœåŠ¡æœ‰ä¸»æ¬¡ä¹‹åˆ†ï¼Œå¦‚æ‹“å±•ç‚¹ã€äº‹ä»¶ã€AOPæ³¨å…¥çš„æ—¥å¿—ã€è°ƒè¯•ã€å®¡è®¡ç­‰åŠŸèƒ½ï¼Œå‡å¦‚è¿™äº›ä¸å½±å“ä¸»ä¸šåŠ¡çš„æœåŠ¡å¤±è´¥äº†ï¼Œåˆ™ä¸»ä¸šåŠ¡åº”å½“æ­£ç¡®è¿”å›ï¼Œæ¬¡æœåŠ¡è®°å½•ä¸€æ¬¡å‡ºé”™æ—¥å¿—å³å¯ã€‚</li><li>æ²‰é»˜å¤±è´¥ï¼šè‹¥å¤§é‡æœåŠ¡è¶…æ—¶ï¼Œä¼šå¯¼è‡´çº¿ç¨‹å †ç§¯ã€‚è¿™ç§æƒ…å†µå°±åº”è¯¥å…ˆéš”ç¦»è¯¥æœåŠ¡ï¼Œé¿å…å¯¹å…¶ä»–æœåŠ¡çš„å½±å“ã€‚</li><li>æ•…éšœæ¢å¤ï¼šä¸€èˆ¬æ˜¯å¿«é€Ÿå¤±è´¥+æ•…éšœæ¢å¤ã€‚å®ƒæ˜¯æŒ‡å½“æœåŠ¡è°ƒç”¨å‡ºé”™äº†ä»¥åï¼Œå°†è¯¥æ¬¡è°ƒç”¨å¤±è´¥çš„ä¿¡æ¯å­˜å…¥ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åç”±ç³»ç»Ÿè‡ªåŠ¨å¼€å§‹å¼‚æ­¥é‡è¯•è°ƒç”¨ã€‚å¾ˆæ˜¾ç„¶ä¹Ÿæ˜¯å¹‚ç­‰æ€§æœåŠ¡ï¼Œç”±äºæ˜¯åå°å¼‚æ­¥é‡è¯•ï¼Œé€‚åˆå®æ—¶æ€§ä¸é«˜çš„ä¸»è·¯é€»è¾‘æˆ–æ—è·¯é€»è¾‘ã€‚</li><li>å¹¶è¡Œè°ƒç”¨ï¼šè·å¾—æœ€å¤§æˆåŠŸç‡ï¼ŒåŒé‡ä¿é™©ç­–ç•¥ã€‚å‘å¤šä¸ªæœåŠ¡å‰¯æœ¬å‘é€è¯·æ±‚ï¼Œä»»ä½•ä¸€ä¸ªè¿”å›æˆåŠŸå³å¯ã€‚ï¼ˆæ„Ÿè§‰è¿™ä¸ªä¹Ÿéœ€è¦å¹‚ç­‰æœåŠ¡ï¼‰</li><li>å¹¿æ’­è°ƒç”¨ï¼šä¸å¹¶è¡Œè°ƒç”¨ç›¸å¯¹ï¼ŒæŒ‡çš„æ˜¯ç­‰æ‰€æœ‰è¯·æ±‚éƒ½æˆåŠŸï¼Œæ‰è¿”å›ã€‚é€‚ç”¨äºâ€œåˆ·æ–°åˆ†å¸ƒå¼ç¼“å­˜â€ã€‚</li></ul><table><thead><tr><th>å®¹é”™ç­–ç•¥</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ•…éšœè½¬ç§»</strong></td><td>ç³»ç»Ÿè‡ªåŠ¨å¤„ç†ï¼Œè°ƒç”¨è€…å¯¹å¤±è´¥çš„ä¿¡æ¯ä¸å¯è§</td><td>å¢åŠ è°ƒç”¨æ—¶é—´ï¼Œé¢å¤–çš„èµ„æºå¼€é”€</td><td>è°ƒç”¨å¹‚ç­‰æœåŠ¡  <br>å¯¹è°ƒç”¨æ—¶é—´ä¸æ•æ„Ÿçš„åœºæ™¯</td></tr><tr><td><strong>å¿«é€Ÿå¤±è´¥</strong></td><td>è°ƒç”¨è€…æœ‰å¯¹å¤±è´¥çš„å¤„ç†å®Œå…¨æ§åˆ¶æƒ  <br>ä¸ä¾èµ–æœåŠ¡çš„å¹‚ç­‰æ€§</td><td>è°ƒç”¨è€…å¿…é¡»æ­£ç¡®å¤„ç†å¤±è´¥é€»è¾‘ï¼Œå¦‚æœä¸€å‘³åªæ˜¯å¯¹å¤–æŠ›å¼‚å¸¸ï¼Œå®¹æ˜“å¼•èµ·é›ªå´©</td><td>è°ƒç”¨éå¹‚ç­‰çš„æœåŠ¡  <br>è¶…æ—¶é˜ˆå€¼è¾ƒä½çš„åœºæ™¯</td></tr><tr><td><strong>å®‰å…¨å¤±è´¥</strong></td><td>ä¸å½±å“ä¸»è·¯é€»è¾‘</td><td>åªé€‚ç”¨äºæ—è·¯è°ƒç”¨</td><td>è°ƒç”¨é“¾ä¸­çš„æ—è·¯æœåŠ¡</td></tr><tr><td><strong>æ²‰é»˜å¤±è´¥</strong></td><td>æ§åˆ¶é”™è¯¯ä¸å½±å“å…¨å±€</td><td>å‡ºé”™çš„åœ°æ–¹å°†åœ¨ä¸€æ®µæ—¶é—´å†…ä¸å¯ç”¨</td><td>é¢‘ç¹è¶…æ—¶çš„æœåŠ¡</td></tr><tr><td><strong>æ•…éšœæ¢å¤</strong></td><td>è°ƒç”¨å¤±è´¥åè‡ªåŠ¨é‡è¯•ï¼Œä¹Ÿä¸å½±å“ä¸»è·¯é€»è¾‘</td><td>é‡è¯•ä»»åŠ¡å¯èƒ½äº§ç”Ÿå †ç§¯ï¼Œé‡è¯•ä»ç„¶å¯èƒ½å¤±è´¥</td><td>è°ƒç”¨é“¾ä¸­çš„æ—è·¯æœåŠ¡  <br>å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„ä¸»è·¯é€»è¾‘ä¹Ÿå¯ä»¥ä½¿ç”¨</td></tr><tr><td><strong>å¹¶è¡Œè°ƒç”¨</strong></td><td>å°½å¯èƒ½åœ¨æœ€çŸ­æ—¶é—´å†…è·å¾—æœ€é«˜çš„æˆåŠŸç‡</td><td>é¢å¤–æ¶ˆè€—æœºå™¨èµ„æºï¼Œå¤§éƒ¨åˆ†è°ƒç”¨å¯èƒ½éƒ½æ˜¯æ— ç”¨åŠŸ</td><td>èµ„æºå……è¶³ä¸”å¯¹å¤±è´¥å®¹å¿åº¦ä½çš„åœºæ™¯</td></tr><tr><td><strong>å¹¿æ’­è°ƒç”¨</strong></td><td>æ”¯æŒåŒæ—¶å¯¹æ‰¹é‡çš„æœåŠ¡æä¾›è€…å‘èµ·è°ƒç”¨</td><td>èµ„æºæ¶ˆè€—å¤§ï¼Œå¤±è´¥æ¦‚ç‡é«˜</td><td>åªé€‚ç”¨äºæ‰¹é‡æ“ä½œçš„åœºæ™¯</td></tr></tbody></table><h4 id="å®¹é”™è®¾è®¡æ¨¡å¼"><a href="#å®¹é”™è®¾è®¡æ¨¡å¼" class="headerlink" title="å®¹é”™è®¾è®¡æ¨¡å¼"></a>å®¹é”™è®¾è®¡æ¨¡å¼</h4><hr><p><strong>æ–­è·¯å™¨æ¨¡å¼</strong>ï¼šè®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“æœåŠ¡å¤±è´¥æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œæ‹’ç»åç»­æ‰€æœ‰æœåŠ¡ï¼Œç›´æ¥è¿”å›å¤±è´¥ï¼Œä»¥é¿å…é›ªå´©æ•ˆåº”ã€‚ï¼ˆ<code>æœåŠ¡ç†”æ–­</code>ï¼‰<br><img src="/../../../img/Pasted%20image%2020230929101833.png"></p><p>æ–­è·¯å™¨æ˜¯æœ‰é™çŠ¶æ€æœºï¼š</p><ul><li>Closedï¼šå…³é—­çŠ¶æ€ï¼Œæ„å‘³ç€æ‰€æœ‰æœåŠ¡ä¼šè¢«æ­£å¸¸æ‰§è¡Œå’Œè¿”å›ã€‚æ˜¯<strong>åˆå§‹çŠ¶æ€</strong></li><li>Openï¼šå¼€å¯çŠ¶æ€ï¼Œæ‹¦æˆªæœåŠ¡ï¼Œç›´æ¥è¿”å›å¤±è´¥ï¼Œå®ç°å¿«é€Ÿå¤±è´¥ã€‚</li><li>Half Openï¼šä¸­é—´çŠ¶æ€ï¼Œè¡¨ç¤ºè‡ªåŠ¨æ•…éšœä¿®å¤èƒ½åŠ›ï¼Œå½“æ–­è·¯å™¨å¤„äº<code>Open</code>çŠ¶æ€ä¸€æ®µæ—¶é—´åï¼Œå°†ç”±ä¸‹ä¸€æ¬¡è¯·æ±‚å°†å…¶è§¦å‘ä¸º<code>Half Open</code>çŠ¶æ€ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸåˆ™æ¢å¤è‡³<code>Closed</code>çŠ¶æ€ï¼Œå¦åˆ™ç»§ç»­ä¿æŒ<code>Open</code></li></ul><p><img src="/../../../img/Pasted%20image%2020230929102237.png"></p><p>é˜ˆå€¼è¯´æ˜ï¼š</p><ul><li>ä¸€æ®µæ—¶é—´å†…ï¼ˆ10sï¼‰ï¼Œè¯·æ±‚æ•°é‡è¾¾åˆ°è®¾å®šé˜ˆå€¼ï¼ˆå¦‚20ä¸ªï¼‰ï¼Œå¿…é¡»è¾¾åˆ°æŸä¸ªå€¼ï¼Œä¸ç„¶æ— éœ€æ–­è·¯å™¨ä»‹å…¥ã€‚</li><li>ä¸€æ®µæ—¶é—´å†…ï¼ˆ10sï¼‰ï¼Œiè¯·æ±‚çš„æ•…éšœç‡è¾¾åˆ°è®¾å®šé˜ˆå€¼ï¼ˆ50%ï¼‰ï¼Œæ•…éšœç‡è¾ƒé«˜ï¼Œåˆ™è¯´æ˜éœ€è¦æ–­è·¯å™¨ã€‚</li></ul><p><strong>èˆ±å£éš”ç¦»æ¨¡å¼</strong><br>èˆ±å£éš”ç¦»æ¨¡å¼æ˜¯å¸¸ç”¨çš„å®ç°æœåŠ¡éš”ç¦»çš„è®¾è®¡æ¨¡å¼ï¼Œèˆ±å£è¿™ä¸ªè¯æ˜¯æ¥è‡ªé€ èˆ¹ä¸šçš„èˆ¶æ¥å“ï¼Œå®ƒåŸæœ¬çš„æ„æ€æ˜¯è®¾è®¡èˆ°èˆ¹æ—¶ï¼Œè¦åœ¨æ¯ä¸ªåŒºåŸŸè®¾è®¡ç‹¬ç«‹çš„æ°´å¯†èˆ±å®¤ï¼Œä¸€æ—¦æŸä¸ªèˆ±å®¤è¿›æ°´ï¼Œä¹Ÿåªæ˜¯å½±å“è¿™ä¸ªèˆ±å®¤ä¸­çš„è´§ç‰©ï¼Œè€Œä¸è‡³äºè®©æ•´è‰˜èˆ°è‰‡æ²‰æ²¡ã€‚è¿™ç§æ€æƒ³å°±å¾ˆç¬¦åˆå®¹é”™ç­–ç•¥ä¸­<code>å¤±è´¥é™é»˜</code>ç­–ç•¥ã€‚</p><p>è‹¥ç³»ç»Ÿä¸­æœåŠ¡Aå‘é€äº†è¶…æ—¶ï¼Œç”±äºç›®å‰ä¸»æµçš„ç½‘ç»œè®¿é—®å¤§å¤šæ˜¯åŸºäº TPR å¹¶å‘æ¨¡å‹ï¼ˆThread per Requestï¼‰æ¥å®ç°çš„ï¼Œå› æ­¤è¯¥è¯·æ±‚ä¼šä¸€ç›´å ç”¨è¯¥çº¿ç¨‹ã€‚ä¸€æ—¦è¾¾åˆ°ä¾‹å¦‚Tomcatçš„æœ€å¤§å…¨å±€çº¿ç¨‹æ•°é‡ï¼Œåˆ™æ‰€æœ‰å…¶ä»–æœåŠ¡ä¹Ÿä¼šå› ä¸ºæ²¡æœ‰ç©ºä½™çš„çº¿ç¨‹æœåŠ¡è€Œå¯¼è‡´ä¸å¯ç”¨ï¼Œäº§ç”Ÿé›ªå´©ã€‚</p><p>å› æ­¤ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªæœåŠ¡å•ç‹¬çš„è®¾ç½®çº¿ç¨‹æ± ï¼Œå¦‚æ¯ä¸ªæœåŠ¡è®¾ç½®5ä¸ªæœ€å¤§çº¿ç¨‹æ•°ï¼Œè¿™æ ·è¯¥æœåŠ¡è¶…æ—¶ï¼Œæœ€å¤šé˜»å¡5æ¡çº¿ç¨‹æ•°ï¼Œä¸ä¼šå¯¼è‡´åˆ«çš„æœåŠ¡ä¹Ÿæ²¡æ³•ç”¨ã€‚ä½†å±€éƒ¨çº¿ç¨‹æ± ä¼šå¢å¤§CPUçš„å¼€é”€ï¼Œå¯¼è‡´å¢åŠ 3-10msçš„è¯·æ±‚å¤„ç†æ—¶é—´ã€‚å¯ä»¥è¿›ä¸€æ­¥é‡‡ç”¨ä¿¡å·é‡æœºåˆ¶å–ä»£å±€éƒ¨çº¿ç¨‹æ± ï¼Œä¸ºæ¯ä¸ªæœåŠ¡è®¾ç½®ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„è®¡æ•°å™¨å³å¯ã€‚</p><p><strong>é‡è¯•æ¨¡å¼</strong><br><code>æ•…éšœè½¬ç§»</code>å’Œ<code>æ•…éšœæ¢å¤</code>ç­–ç•¥éƒ½éœ€è¦å¯¹æœåŠ¡è¿›è¡Œé‡å¤è°ƒç”¨ï¼Œå·®åˆ«æ˜¯è¿™äº›é‡å¤è°ƒç”¨æœ‰å¯èƒ½æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯åå°å¼‚æ­¥è¿›è¡Œï¼›æœ‰å¯èƒ½ä¼šé‡å¤è°ƒç”¨åŒä¸€ä¸ªæœåŠ¡ï¼Œä¹Ÿå¯èƒ½ä¼šè°ƒç”¨åˆ°æœåŠ¡çš„å…¶ä»–å‰¯æœ¬ã€‚æ— è®ºå…·ä½“æ˜¯é€šè¿‡æ€æ ·çš„æ–¹å¼è°ƒç”¨ã€è°ƒç”¨çš„æœåŠ¡å®ä¾‹æ˜¯å¦ç›¸åŒï¼Œéƒ½å¯ä»¥å½’ç»“ä¸ºé‡è¯•è®¾è®¡æ¨¡å¼çš„åº”ç”¨èŒƒç•´ã€‚é€‚ç”¨äºæœ‰å¯èƒ½è‡ªå·±æ¢å¤çš„ä¸´æ—¶æ€§å¤±çµï¼Œç½‘ç»œæŠ–åŠ¨ï¼Œä¸´æ—¶è¿‡è½½ç­‰ã€‚</p><ul><li>ä»…ä¸»è·¯é€»è¾‘çš„å…³é”®æœåŠ¡è¿›è¡ŒåŒæ­¥é‡è¯•ã€‚</li><li>ä»…å¯¹ç¬æ—¶æ•…éšœåˆ°çš„å¤±è´¥ï¼ˆå¯æ ¹æ®çŠ¶æ€ç åˆ¤æ–­ï¼‰ï¼Œå³å¯è‡ªæ„ˆçš„æœåŠ¡ã€‚</li><li>ä»…å¯¹å¹‚ç­‰æ€§æœåŠ¡é‡è¯•ã€‚</li><li>å¿…é¡»æœ‰ç»ˆæ­¢æ¡ä»¶ã€‚<ul><li>è¶…æ—¶ç»ˆæ­¢ï¼Œé¿å…æ— é™æœŸç­‰å¾…</li><li>æ¬¡æ•°ç»ˆæ­¢ï¼Œæœ€å¤šé‡è¯•2-5æ¬¡ï¼Œä¸å¯ä»¥æ— é™æ¬¡é‡è¯•ã€‚</li></ul></li></ul><h2 id="å¯é é€šè®¯"><a href="#å¯é é€šè®¯" class="headerlink" title="å¯é é€šè®¯"></a>å¯é é€šè®¯</h2><h3 id="é›¶ä¿¡ä»»ç½‘ç»œ"><a href="#é›¶ä¿¡ä»»ç½‘ç»œ" class="headerlink" title="é›¶ä¿¡ä»»ç½‘ç»œ"></a>é›¶ä¿¡ä»»ç½‘ç»œ</h3><p>è¡¨ 9-1 ä¼ ç»Ÿç½‘ç»œå®‰å…¨æ¨¡å‹ä¸äº‘åŸç”Ÿæ—¶ä»£é›¶ä¿¡ä»»æ¨¡å‹å¯¹æ¯”</p><table><thead><tr><th>ä¼ ç»Ÿã€è¾¹ç•Œå®‰å…¨æ¨¡å‹</th><th>äº‘åŸç”Ÿã€é›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹</th><th>å…·ä½“éœ€æ±‚</th></tr></thead><tbody><tr><td>åŸºäºé˜²ç«å¢™ç­‰è®¾æ–½ï¼Œè®¤ä¸ºè¾¹ç•Œå†…å¯ä¿¡</td><td>æœåŠ¡åˆ°æœåŠ¡é€šä¿¡éœ€è®¤è¯ï¼Œç¯å¢ƒå†…çš„æœåŠ¡ä¹‹é—´é»˜è®¤æ²¡æœ‰ä¿¡ä»»</td><td>ä¿æŠ¤ç½‘ç»œè¾¹ç•Œï¼ˆä»ç„¶æœ‰æ•ˆï¼‰ï¼›æœåŠ¡ä¹‹é—´é»˜è®¤æ²¡æœ‰äº’ä¿¡</td></tr><tr><td>ç”¨äºç‰¹å®šçš„ IP å’Œç¡¬ä»¶ï¼ˆæœºå™¨ï¼‰</td><td>èµ„æºåˆ©ç”¨ç‡ã€é‡ç”¨ã€å…±äº«æ›´å¥½ï¼ŒåŒ…æ‹¬ IP å’Œç¡¬ä»¶</td><td>å—ä¿¡ä»»çš„æœºå™¨è¿è¡Œæ¥æºå·²çŸ¥çš„ä»£ç </td></tr><tr><td>åŸºäº IP çš„èº«ä»½</td><td>åŸºäºæœåŠ¡çš„èº«ä»½</td><td>åŒä¸Š</td></tr><tr><td>æœåŠ¡è¿è¡Œåœ¨å·²çŸ¥çš„ã€å¯é¢„æœŸçš„æœåŠ¡å™¨ä¸Š</td><td>æœåŠ¡å¯è¿è¡Œåœ¨ç¯å¢ƒä¸­çš„ä»»ä½•åœ°æ–¹ï¼ŒåŒ…æ‹¬ç§æœ‰äº‘&#x2F;å…¬æœ‰äº‘æ··åˆéƒ¨ç½²</td><td>åŒä¸Š</td></tr><tr><td>å®‰å…¨ç›¸å…³çš„éœ€æ±‚ç”±åº”ç”¨æ¥å®ç°ï¼Œæ¯ä¸ªåº”ç”¨å•ç‹¬å®ç°</td><td>ç”±åŸºç¡€è®¾æ–½æ¥å®ç°ï¼ŒåŸºç¡€è®¾æ–½ä¸­é›†æˆäº†å…±äº«çš„å®‰å…¨æ€§è¦æ±‚ã€‚</td><td>é›†ä¸­ç­–ç•¥å®æ–½ç‚¹ï¼ˆChoke Pointsï¼‰ï¼Œä¸€è‡´åœ°åº”ç”¨åˆ°æ‰€æœ‰æœåŠ¡</td></tr><tr><td>å¯¹æœåŠ¡å¦‚ä½•æ„å»ºã€è¯„å®¡ã€å®æ–½çš„å®‰å…¨éœ€æ±‚çš„çº¦æŸåŠ›è¾ƒå¼±</td><td>å®‰å…¨ç›¸å…³çš„éœ€æ±‚ä¸€è‡´åœ°åº”ç”¨åˆ°æ‰€æœ‰æœåŠ¡</td><td>åŒä¸Š</td></tr><tr><td>å®‰å…¨ç»„ä»¶çš„å¯è§‚æµ‹æ€§è¾ƒå¼±</td><td>æœ‰å®‰å…¨ç­–ç•¥åŠå…¶æ˜¯å¦ç”Ÿæ•ˆçš„å…¨å±€è§†å›¾</td><td>åŒä¸Š</td></tr><tr><td>å‘å¸ƒä¸æ ‡å‡†ï¼Œå‘å¸ƒé¢‘ç‡è¾ƒä½</td><td>æ ‡å‡†åŒ–çš„æ„å»ºå’Œå‘å¸ƒæµç¨‹ï¼Œæ¯ä¸ªå¾®æœåŠ¡å˜æ›´ç‹¬ç«‹ï¼Œå˜æ›´æ›´é¢‘ç¹</td><td>ç®€å•ã€è‡ªåŠ¨ã€æ ‡å‡†åŒ–çš„å˜æ›´å‘å¸ƒæµç¨‹</td></tr><tr><td>å·¥ä½œè´Ÿè½½é€šå¸¸ä½œä¸ºè™šæ‹Ÿæœºéƒ¨ç½²æˆ–éƒ¨ç½²åˆ°ç‰©ç†ä¸»æœºï¼Œå¹¶ä½¿ç”¨ç‰©ç†æœºæˆ–ç®¡ç†ç¨‹åºè¿›è¡Œéš”ç¦»</td><td>å°è£…çš„å·¥ä½œè´Ÿè½½åŠå…¶è¿›ç¨‹åœ¨å…±äº«çš„æ“ä½œç³»ç»Ÿä¸­è¿è¡Œï¼Œå¹¶æœ‰ç®¡ç†å¹³å°æä¾›çš„æŸç§æœºåˆ¶æ¥è¿›è¡Œéš”ç¦»</td><td>åœ¨å…±äº«çš„æ“ä½œç³»ç»Ÿçš„å·¥ä½œè´Ÿè½½ä¹‹é—´è¿›è¡Œéš”ç¦»</td></tr></tbody></table><h3 id="æœåŠ¡å®‰å…¨"><a href="#æœåŠ¡å®‰å…¨" class="headerlink" title="æœåŠ¡å®‰å…¨"></a>æœåŠ¡å®‰å…¨</h3><h4 id="å»ºç«‹ä¿¡ä»»"><a href="#å»ºç«‹ä¿¡ä»»" class="headerlink" title="å»ºç«‹ä¿¡ä»»"></a>å»ºç«‹ä¿¡ä»»</h4><p>é›¶ä¿¡ä»»ç½‘ç»œä¸å­˜åœ¨é»˜è®¤çš„ä¿¡ä»»å…³ç³»ï¼Œåªå¯é€šè¿‡æƒå¨å…¬è¯äººï¼šå…¬å¼€å¯†é’¥åŸºç¡€è®¾æ–½PKIã€‚é€šè¿‡PKIæ„å»ºä¼ è¾“å®‰å…¨å±‚ï¼ˆTLSï¼‰ã€‚åœ¨é›¶ä¿¡ä»»ç½‘ç»œå®‰å…¨ä¸­ï¼Œå¸¸å¸¸ä½¿ç”¨åŒå‘TSLè®¤è¯ã€‚</p><ul><li><p><strong>å•å‘ TLS è®¤è¯</strong>ï¼šåªéœ€è¦æœåŠ¡ç«¯æä¾›è¯ä¹¦ï¼Œå®¢æˆ·ç«¯é€šè¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œä½†æœåŠ¡å™¨å¹¶ä¸éªŒè¯å®¢æˆ·ç«¯çš„èº«ä»½ã€‚å•å‘ TLS ç”¨äºå…¬å¼€çš„æœåŠ¡ï¼Œå³ä»»ä½•å®¢æˆ·ç«¯éƒ½è¢«å…è®¸è¿æ¥åˆ°æœåŠ¡è¿›è¡Œè®¿é—®ï¼Œå®ƒä¿æŠ¤çš„é‡ç‚¹æ˜¯å®¢æˆ·ç«¯å…é­å†’ç‰ŒæœåŠ¡å™¨çš„æ¬ºéª—ã€‚</p></li><li><p><strong>åŒå‘ TLS è®¤è¯</strong>ï¼šå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åŒæ–¹éƒ½è¦æä¾›è¯ä¹¦ï¼ŒåŒæ–¹å„è‡ªé€šè¿‡å¯¹æ–¹æä¾›çš„è¯ä¹¦æ¥éªŒè¯å¯¹æ–¹çš„èº«ä»½ã€‚åŒå‘ TLS ç”¨äºç§å¯†çš„æœåŠ¡ï¼Œå³æœåŠ¡åªå…è®¸ç‰¹å®šèº«ä»½çš„å®¢æˆ·ç«¯è®¿é—®ï¼Œå®ƒé™¤äº†ä¿æŠ¤å®¢æˆ·ç«¯ä¸è¿æ¥åˆ°å†’ç‰ŒæœåŠ¡å™¨å¤–ï¼Œä¹Ÿä¿æŠ¤æœåŠ¡ç«¯ä¸é­åˆ°éæ³•ç”¨æˆ·çš„è¶Šæƒè®¿é—®ã€‚</p></li></ul><h4 id="è®¤è¯-1"><a href="#è®¤è¯-1" class="headerlink" title="è®¤è¯"></a>è®¤è¯</h4><p>å‚è€ƒSpring Security</p><h4 id="æˆæƒ-1"><a href="#æˆæƒ-1" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h4><blockquote><p>è°æ‹¥æœ‰ä»€ä¹ˆæƒé™ï¼ŒRBACæ¨¡å‹</p></blockquote><p>åœ¨Spring Securityä¸­å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼é…ç½®ï¼Œä¸€ç§æ˜¯åœ¨é…ç½®ç±»ä¸­ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡æ³¨è§£æ ‡æ˜åˆ°æ–¹æ³•ä½“ä¸Š</p><h2 id="å¯è§‚æµ‹æ€§"><a href="#å¯è§‚æµ‹æ€§" class="headerlink" title="å¯è§‚æµ‹æ€§"></a>å¯è§‚æµ‹æ€§</h2><blockquote><p>å­¦æœ¯ç•Œä¸€èˆ¬ä¼šå°†å¯è§‚æµ‹æ€§åˆ†è§£ä¸ºä¸‰ä¸ªæ›´å…·ä½“æ–¹å‘è¿›è¡Œç ”ç©¶ï¼Œåˆ†åˆ«æ˜¯ï¼šäº‹ä»¶æ—¥å¿—ã€é“¾è·¯è¿½è¸ªå’Œèšåˆåº¦é‡</p></blockquote><p><img src="/../../../img/Pasted%20image%2020230929121530.png"></p><ul><li>æ—¥å¿—ï¼ˆLoggingï¼‰ï¼šè®°å½•äº‹ä»¶ï¼Œåˆ†æå‡ºç¨‹åºçš„è¡Œä¸ºï¼Œè­¬å¦‚æ›¾ç»è°ƒç”¨è¿‡ä»€ä¹ˆæ–¹æ³•ï¼Œæ›¾ç»æ“ä½œè¿‡å“ªäº›æ•°æ®ï¼Œç­‰ç­‰ã€‚</li><li>è¿½è¸ªï¼ˆTracingï¼‰ï¼šå…¨é“¾è·¯è¿½è¸ªï¼Œè¿½è¸ªçš„ä¸»è¦ç›®çš„æ˜¯æ’æŸ¥æ•…éšœï¼Œå¦‚åˆ†æè°ƒç”¨é“¾çš„å“ªä¸€éƒ¨åˆ†ã€å“ªä¸ªæ–¹æ³•å‡ºç°é”™è¯¯æˆ–é˜»å¡ï¼Œè¾“å…¥è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li><li>åº¦é‡ï¼ˆMetricsï¼‰ï¼šå¯¹ç³»ç»Ÿä¸­æŸä¸€ç±»ä¿¡æ¯çš„ç»Ÿè®¡èšåˆã€‚åº¦é‡çš„ä¸»è¦ç›®çš„æ˜¯ç›‘æ§ï¼ˆMonitoringï¼‰å’Œé¢„è­¦ï¼ˆAlertï¼‰ï¼Œå¦‚æŸäº›åº¦é‡æŒ‡æ ‡è¾¾åˆ°é£é™©é˜ˆå€¼æ—¶è§¦å‘äº‹ä»¶ï¼Œä»¥ä¾¿è‡ªåŠ¨å¤„ç†æˆ–è€…æé†’ç®¡ç†å‘˜ä»‹å…¥ã€‚</li></ul><h3 id="äº‹ä»¶æ—¥å¿—"><a href="#äº‹ä»¶æ—¥å¿—" class="headerlink" title="äº‹ä»¶æ—¥å¿—"></a>äº‹ä»¶æ—¥å¿—</h3><ul><li><strong>é¿å…æ‰“å°æ•æ„Ÿä¿¡æ¯</strong>ã€‚</li><li><strong>é¿å…å¼•ç”¨æ…¢æ“ä½œ</strong>ã€‚</li><li><strong>é¿å…æ‰“å°è¿½è¸ªè¯Šæ–­ä¿¡æ¯</strong></li><li><strong>é¿å…è¯¯å¯¼ä»–äºº</strong></li><li><strong>è®°å½•è¯·æ±‚æ—¶çš„TraceID</strong></li><li><strong>ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­çš„å…³é”®äº‹ä»¶</strong></li><li><strong>å¯åŠ¨æ—¶è¾“å‡ºé…ç½®ä¿¡æ¯</strong></li></ul><table><thead><tr><th>æ•°æ®é¡¹</th><th>å€¼</th></tr></thead><tbody><tr><td>IP</td><td>14.123.255.234</td></tr><tr><td>Username</td><td>null</td></tr><tr><td>Datetime</td><td>19&#x2F;Feb&#x2F;2020:00:12:11 +0800</td></tr><tr><td>Method</td><td>GET</td></tr><tr><td>URL</td><td>&#x2F;index.html</td></tr><tr><td>Protocol</td><td>HTTP&#x2F;1.1</td></tr><tr><td>Status</td><td>200</td></tr><tr><td>Size</td><td>1314</td></tr><tr><td>Refer</td><td><a href="https://icyfenix.cn/">https://icyfenix.cn</a></td></tr><tr><td>Agent</td><td>Mozilla&#x2F;5.0 (Windows NT 10.0; WOW64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;80.0.3987.163 Safari&#x2F;537.36</td></tr></tbody></table><h3 id="é“¾è·¯è¿½è¸ª"><a href="#é“¾è·¯è¿½è¸ª" class="headerlink" title="é“¾è·¯è¿½è¸ª"></a>é“¾è·¯è¿½è¸ª</h3><h3 id="èšåˆåº¦é‡"><a href="#èšåˆåº¦é‡" class="headerlink" title="èšåˆåº¦é‡"></a>èšåˆåº¦é‡</h3><h4 id="æŒ‡æ ‡æ”¶é›†"><a href="#æŒ‡æ ‡æ”¶é›†" class="headerlink" title="æŒ‡æ ‡æ”¶é›†"></a>æŒ‡æ ‡æ”¶é›†</h4><ul><li><strong>è®¡æ•°åº¦é‡å™¨</strong>ï¼ˆCounterï¼‰ï¼šè¿™æ˜¯æœ€å¥½ç†è§£ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æŒ‡æ ‡å½¢å¼ï¼Œè®¡æ•°å™¨å°±æ˜¯å¯¹æœ‰ç›¸åŒé‡çº²ã€å¯åŠ å‡æ•°å€¼çš„åˆè®¡é‡ï¼Œè­¬å¦‚ä¸šåŠ¡æŒ‡æ ‡åƒé”€å”®é¢ã€è´§ç‰©åº“å­˜é‡ã€èŒå·¥äººæ•°ç­‰ç­‰ï¼›æŠ€æœ¯æŒ‡æ ‡åƒæœåŠ¡è°ƒç”¨æ¬¡æ•°ã€ç½‘ç«™è®¿é—®äººæ•°ç­‰éƒ½å±äºè®¡æ•°å™¨æŒ‡æ ‡ã€‚</li><li><strong>ç¬æ€åº¦é‡å™¨</strong>ï¼ˆGaugeï¼‰ï¼šç¬æ€åº¦é‡å™¨æ¯”è®¡æ•°å™¨æ›´ç®€å•ï¼Œå®ƒå°±è¡¨ç¤ºæŸä¸ªæŒ‡æ ‡åœ¨æŸä¸ªæ—¶ç‚¹çš„æ•°å€¼ï¼Œè¿åŠ å‡ç»Ÿè®¡éƒ½ä¸éœ€è¦ã€‚è­¬å¦‚å½“å‰ Java è™šæ‹Ÿæœºå †å†…å­˜çš„ä½¿ç”¨é‡ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç¬æ€åº¦é‡å™¨ï¼›åˆè­¬å¦‚ï¼Œç½‘ç«™è®¿é—®äººæ•°æ˜¯è®¡æ•°å™¨ï¼Œè€Œç½‘ç«™åœ¨çº¿äººæ•°åˆ™æ˜¯ç¬æ€åº¦é‡å™¨ã€‚</li><li><strong>ååç‡åº¦é‡å™¨</strong>ï¼ˆMeterï¼‰ï¼šååç‡åº¦é‡å™¨é¡¾åæ€ä¹‰æ˜¯ç”¨äºç»Ÿè®¡å•ä½æ—¶é—´çš„ååé‡ï¼Œå³å•ä½æ—¶é—´å†…æŸä¸ªäº‹ä»¶çš„å‘ç”Ÿæ¬¡æ•°ã€‚è­¬å¦‚äº¤æ˜“ç³»ç»Ÿä¸­å¸¸ä»¥ TPS è¡¡é‡äº‹åŠ¡ååç‡ï¼Œå³æ¯ç§’å‘ç”Ÿäº†å¤šå°‘ç¬”äº‹åŠ¡äº¤æ˜“ï¼›åˆè­¬å¦‚æ¸¯å£çš„è´§è¿ååç‡å¸¸ä»¥â€œå¨&#x2F;æ¯å¤©â€ä¸ºå•ä½è®¡ç®—ï¼Œ10 ä¸‡å¨&#x2F;å¤©çš„æ¸¯å£é€šå¸¸è¦æ¯” 1 ä¸‡å¨&#x2F;å¤©çš„æ¸¯å£çš„è´§è¿è§„æ¨¡æ›´å¤§ã€‚</li><li><strong>ç›´æ–¹å›¾åº¦é‡å™¨</strong>ï¼ˆHistogramï¼‰ï¼šç›´æ–¹å›¾æ˜¯å¸¸è§çš„äºŒç»´ç»Ÿè®¡å›¾ï¼Œå®ƒçš„ä¸¤ä¸ªåæ ‡åˆ†åˆ«æ˜¯ç»Ÿè®¡æ ·æœ¬å’Œè¯¥æ ·æœ¬å¯¹åº”çš„æŸä¸ªå±æ€§çš„åº¦é‡ï¼Œä»¥é•¿æ¡å›¾çš„å½¢å¼è¡¨ç¤ºå…·ä½“æ•°å€¼ã€‚è­¬å¦‚ç»æµæŠ¥å‘Šä¸­è¦è¡¡é‡æŸä¸ªåœ°åŒºå†å¹´çš„ GDP å˜åŒ–æƒ…å†µï¼Œå¸¸ä¼šä»¥ GDP ä¸ºçºµåæ ‡ï¼Œæ—¶é—´ä¸ºæ¨ªåæ ‡æ„æˆç›´æ–¹å›¾æ¥å‘ˆç°ã€‚</li><li><strong>é‡‡æ ·ç‚¹åˆ†ä½å›¾åº¦é‡å™¨</strong>ï¼ˆQuantile Summaryï¼‰ï¼šåˆ†ä½å›¾æ˜¯ç»Ÿè®¡å­¦ä¸­é€šè¿‡æ¯”è¾ƒå„åˆ†ä½æ•°çš„åˆ†å¸ƒæƒ…å†µçš„å·¥å…·ï¼Œç”¨äºéªŒè¯å®é™…å€¼ä¸ç†è®ºå€¼çš„å·®è·ï¼Œè¯„ä¼°ç†è®ºå€¼ä¸å®é™…å€¼ä¹‹é—´çš„æ‹Ÿåˆåº¦ã€‚è­¬å¦‚ï¼Œæˆ‘ä»¬è¯´â€œé«˜è€ƒæˆç»©ä¸€èˆ¬ç¬¦åˆæ­£æ€åˆ†å¸ƒâ€ï¼Œè¿™å¥è¯çš„æ„æ€æ˜¯ï¼šé«˜è€ƒæˆç»©é«˜ä½åˆ†çš„äººæ•°éƒ½è¾ƒå°‘ï¼Œä¸­ç­‰æˆç»©çš„è¾ƒå¤šï¼Œå°†äººæ•°æŒ‰ä¸åŒåˆ†æ•°æ®µç»Ÿè®¡ï¼Œå¾—å‡ºçš„ç»Ÿè®¡ç»“æœä¸€èˆ¬èƒ½å¤Ÿä¸æ­£æ€åˆ†å¸ƒçš„æ›²çº¿è¾ƒå¥½åœ°æ‹Ÿåˆã€‚</li><li>é™¤äº†ä»¥ä¸Šå¸¸è§çš„åº¦é‡å™¨ä¹‹å¤–ï¼Œè¿˜æœ‰ Timerã€Setã€Fast Compassã€Cluster Histogram ç­‰å…¶ä»–å„ç§åº¦é‡å™¨ï¼Œé‡‡ç”¨ä¸åŒçš„åº¦é‡ç³»ç»Ÿï¼Œæ”¯æŒåº¦é‡å™¨ç±»å‹çš„èŒƒå›´è‚¯å®šä¼šæœ‰å·®åˆ«ï¼Œè­¬å¦‚ Prometheus æ”¯æŒäº†ä¸Šé¢æåˆ°äº”ç§åº¦é‡å™¨ä¸­çš„ Counterã€Gaugeã€Histogram å’Œ Summary å››ç§ã€‚</li></ul><p>è¡¨ 10-2 å¸¸ç”¨ Exporter</p><table><thead><tr><th>èŒƒå›´</th><th>å¸¸ç”¨ Exporter</th></tr></thead><tbody><tr><td>æ•°æ®åº“</td><td>MySQL Exporterã€Redis Exporterã€MongoDB Exporterã€MSSQL Exporter ç­‰</td></tr><tr><td>ç¡¬ä»¶</td><td>Apcupsd Exporterï¼ŒIoT Edison Exporterï¼Œ IPMI Exporterã€Node Exporter ç­‰</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>Beanstalkd Exporterã€Kafka Exporterã€NSQ Exporterã€RabbitMQ Exporter ç­‰</td></tr><tr><td>å­˜å‚¨</td><td>Ceph Exporterã€Gluster Exporterã€HDFS Exporterã€ScaleIO Exporter ç­‰</td></tr><tr><td>HTTP æœåŠ¡</td><td>Apache Exporterã€HAProxy Exporterã€Nginx Exporter ç­‰</td></tr><tr><td>API æœåŠ¡</td><td>AWS ECS Exporterï¼Œ Docker Cloud Exporterã€Docker Hub Exporterã€GitHub Exporter ç­‰</td></tr><tr><td>æ—¥å¿—</td><td>Fluentd Exporterã€Grok Exporter ç­‰</td></tr><tr><td>ç›‘æ§ç³»ç»Ÿ</td><td>Collectd Exporterã€Graphite Exporterã€InfluxDB Exporterã€Nagios Exporterã€SNMP Exporter ç­‰</td></tr><tr><td>å…¶å®ƒ</td><td>Blockbox Exporterã€JIRA Exporterã€Jenkins Exporterï¼Œ Confluence Exporter ç­‰</td></tr></tbody></table><h4 id="å­˜å‚¨æŸ¥è¯¢"><a href="#å­˜å‚¨æŸ¥è¯¢" class="headerlink" title="å­˜å‚¨æŸ¥è¯¢"></a>å­˜å‚¨æŸ¥è¯¢</h4><blockquote><p>é¿å…æ—¥å¿—è¿‡äºåºå¤§ï¼Œå¼•å…¥<code>æ—¶åºæ•°æ®åº“</code>ã€‚</p></blockquote><ul><li>ä»¥<a href="https://en.wikipedia.org/wiki/Log-structured_merge-tree">æ—¥å¿—ç»“æ„çš„åˆå¹¶æ ‘</a>ï¼ˆLog Structured Merge Treeï¼ŒLSM-Treeï¼‰ä»£æ›¿ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ä¸­çš„<a href="https://en.wikipedia.org/wiki/B%2B_tree">B+Tree</a>ä½œä¸ºå­˜å‚¨ç»“æ„ï¼ŒLSM é€‚åˆçš„åº”ç”¨åœºæ™¯å°±æ˜¯å†™å¤šè¯»å°‘ï¼Œä¸”å‡ ä¹ä¸åˆ æ”¹çš„æ•°æ®ã€‚</li><li>è®¾ç½®æ¿€è¿›çš„æ•°æ®ä¿ç•™ç­–ç•¥ï¼Œè­¬å¦‚æ ¹æ®è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰è‡ªåŠ¨åˆ é™¤ç›¸å…³æ•°æ®ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼ŒåŒæ—¶æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚å¯¹äºæ™®é€šæ•°æ®åº“æ¥è¯´ï¼Œæ•°æ®ä¼šå­˜å‚¨ä¸€æ®µæ—¶é—´åå°±ä¼šè¢«è‡ªåŠ¨åˆ é™¤è¿™ç§äº‹æƒ…æ˜¯ä¸å¯æƒ³è±¡çš„ã€‚</li><li>å¯¹æ•°æ®è¿›è¡Œå†é‡‡æ ·ï¼ˆResamplingï¼‰ä»¥èŠ‚çœç©ºé—´ï¼Œè­¬å¦‚æœ€è¿‘å‡ å¤©çš„æ•°æ®å¯èƒ½éœ€è¦ç²¾ç¡®åˆ°ç§’ï¼Œè€ŒæŸ¥è¯¢ä¸€ä¸ªæœˆå‰çš„æ•°æ®æ—¶ï¼Œåªéœ€è¦ç²¾ç¡®åˆ°å¤©ï¼ŒæŸ¥è¯¢ä¸€å¹´å‰çš„æ•°æ®æ—¶ï¼Œåªè¦ç²¾ç¡®åˆ°å‘¨å°±å¤Ÿäº†ï¼Œè¿™æ ·å°†æ•°æ®é‡æ–°é‡‡æ ·æ±‡æ€»å°±å¯ä»¥æå¤§èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</li></ul><h4 id="ç›‘æ§é¢„è­¦"><a href="#ç›‘æ§é¢„è­¦" class="headerlink" title="ç›‘æ§é¢„è­¦"></a>ç›‘æ§é¢„è­¦</h4>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
          <category> å¾®æœåŠ¡å’Œåˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> è½¯ä»¶æ¶æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vite</title>
      <link href="/posts/feaf56e8/"/>
      <url>/posts/feaf56e8/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h1><blockquote><p>Viteæ˜¯ä¸€ç§æ–°å‹å‰ç«¯æ„å»ºå·¥å…·(ç±»ä¼¼webpack)ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å‰ç«¯å¼€å‘ä½“éªŒã€‚å®ƒä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p></blockquote><ul><li>ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œå®ƒåŸºäº åŸç”Ÿ ES æ¨¡å— æä¾›äº† ä¸°å¯Œçš„å†…å»ºåŠŸèƒ½ï¼Œå¦‚é€Ÿåº¦å¿«åˆ°æƒŠäººçš„ æ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰ã€‚</li><li>ä¸€å¥—æ„å»ºæŒ‡ä»¤ï¼Œå®ƒä½¿ç”¨ Rollup æ‰“åŒ…ä½ çš„ä»£ç ï¼Œå¹¶ä¸”å®ƒæ˜¯é¢„é…ç½®çš„ï¼Œå¯è¾“å‡ºç”¨äºç”Ÿäº§ç¯å¢ƒçš„é«˜åº¦ä¼˜åŒ–è¿‡çš„é™æ€èµ„æºã€‚</li></ul><h2 id="æ­å»ºç¬¬ä¸€ä¸ªViteé¡¹ç›®"><a href="#æ­å»ºç¬¬ä¸€ä¸ªViteé¡¹ç›®" class="headerlink" title="æ­å»ºç¬¬ä¸€ä¸ªViteé¡¹ç›®"></a>æ­å»ºç¬¬ä¸€ä¸ªViteé¡¹ç›®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br><span class="line">npm create vite@latest my-vue-app -- --template &lt;template_name&gt;</span><br><span class="line"></span><br><span class="line">yarn create vite</span><br><span class="line">yarn create vite my-vue-app --template &lt;template_name&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">template_nameå¯ä»¥æ˜¯</span></span><br><span class="line">vanillaï¼Œvanilla-ts, vue, vue-tsï¼Œreactï¼Œreact-tsï¼Œreact-swcï¼Œreact-swc-tsï¼Œpreactï¼Œpreact-tsï¼Œlitï¼Œlit-tsï¼Œsvelteï¼Œsvelte-tsï¼Œsolidï¼Œsolid-tsï¼Œqwikï¼Œqwik-ts</span><br></pre></td></tr></table></figure><h1 id="2-é…ç½®"><a href="#2-é…ç½®" class="headerlink" title="2.é…ç½®"></a>2.é…ç½®</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="comment">// https://cn.vitejs.dev/config/#resolve-alias</span></span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="comment">// è®¾ç½®è·¯å¾„</span></span><br><span class="line">      <span class="string">&#x27;~&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./&#x27;</span>),</span><br><span class="line">      <span class="comment">// è®¾ç½®åˆ«å</span></span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./src&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// https://cn.vitejs.dev/config/#resolve-extensions</span></span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&#x27;.mjs&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>WebStormè·¯å¾„æ ‡çº¢è§£å†³æ–¹æ¡ˆ<br>åœ¨tsconfig.jsonä¸­æ·»åŠ å¦‚ä¸‹ä»£ç </p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;baseUrl&quot;: &quot;.&quot;,  </span><br><span class="line">&quot;paths&quot;: &#123;  </span><br><span class="line">  &quot;@/*&quot;: [&quot;src/*&quot;]  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> Vue3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> æ„å»ºå·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/4a17b156/"/>
      <url>/posts/4a17b156/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2016-2019 äººäººå¼€æº All rights reserved.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * https://www.renren.io</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ç‰ˆæƒæ‰€æœ‰ï¼Œä¾µæƒå¿…ç©¶ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.leggasai.common.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mark sunlightcs@gmail.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RRException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> <span class="number">500</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RRException</span><span class="params">(String msg)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(msg);</span><br><span class="line"><span class="built_in">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">RRException</span><span class="params">(String msg, Throwable e)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(msg, e);</span><br><span class="line"><span class="built_in">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">RRException</span><span class="params">(String msg, <span class="type">int</span> code)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(msg);</span><br><span class="line"><span class="built_in">this</span>.msg = msg;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">RRException</span><span class="params">(String msg, <span class="type">int</span> code, Throwable e)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>(msg, e);</span><br><span class="line"><span class="built_in">this</span>.msg = msg;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> code;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = hello;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>RocketMQ</title>
      <link href="/posts/69e6bbe1/"/>
      <url>/posts/69e6bbe1/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å…ƒç´ æ¦‚å¿µ"><a href="#1-å…ƒç´ æ¦‚å¿µ" class="headerlink" title="1.å…ƒç´ æ¦‚å¿µ"></a>1.å…ƒç´ æ¦‚å¿µ</h1><p><img src="/../../../img/Pasted%20image%2020230919203517.png"></p><h2 id="é€šä¿¡æ–¹å¼"><a href="#é€šä¿¡æ–¹å¼" class="headerlink" title="é€šä¿¡æ–¹å¼"></a>é€šä¿¡æ–¹å¼</h2><blockquote><p>åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„æ€æƒ³ä¸‹ï¼Œå°†å¤æ‚ç³»ç»Ÿæ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å­æ¨¡å—ï¼Œä¾‹å¦‚å¾®æœåŠ¡æ¨¡å—ã€‚æ­¤æ—¶å°±éœ€è¦è€ƒè™‘å­æ¨¡å—é—´çš„è¿œç¨‹é€šä¿¡ï¼Œå…¸å‹çš„é€šä¿¡æ¨¡å¼åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥çš„RPCè¿œç¨‹è°ƒç”¨ï¼›ä¸€ç§æ˜¯åŸºäºä¸­é—´ä»¶ä»£ç†çš„å¼‚æ­¥é€šä¿¡æ–¹å¼ã€‚</p></blockquote><h3 id="åŒæ­¥RPCè°ƒç”¨æ¨¡å‹"><a href="#åŒæ­¥RPCè°ƒç”¨æ¨¡å‹" class="headerlink" title="åŒæ­¥RPCè°ƒç”¨æ¨¡å‹"></a>åŒæ­¥RPCè°ƒç”¨æ¨¡å‹</h3><p><img src="/../../../img/Pasted%20image%2020230919203701.png"></p><blockquote><p>åŒæ­¥RPCè°ƒç”¨æ¨¡å‹ä¸‹ï¼Œä¸åŒç³»ç»Ÿä¹‹é—´ç›´æ¥è¿›è¡Œè°ƒç”¨é€šä¿¡ï¼Œæ¯ä¸ªè¯·æ±‚ç›´æ¥ä»è°ƒç”¨æ–¹å‘é€åˆ°è¢«è°ƒç”¨æ–¹ï¼Œç„¶åè¦æ±‚è¢«è°ƒç”¨æ–¹ç«‹å³è¿”å›å“åº”ç»“æœç»™è°ƒç”¨æ–¹ï¼Œä»¥ç¡®å®šæœ¬æ¬¡è°ƒç”¨ç»“æœæ˜¯å¦æˆåŠŸã€‚Â <strong>æ³¨æ„</strong>Â æ­¤å¤„çš„åŒæ­¥å¹¶ä¸ä»£è¡¨RPCçš„ç¼–ç¨‹æ¥å£æ–¹å¼ï¼ŒRPCä¹Ÿå¯ä»¥æœ‰å¼‚æ­¥éé˜»å¡è°ƒç”¨çš„ç¼–ç¨‹æ–¹å¼ï¼Œä½†æœ¬è´¨ä¸Šä»ç„¶æ˜¯éœ€è¦åœ¨æŒ‡å®šæ—¶é—´å†…å¾—åˆ°ç›®æ ‡ç«¯çš„ç›´æ¥å“åº”</p></blockquote><h3 id="å¼‚æ­¥é€šä¿¡æ¨¡å‹"><a href="#å¼‚æ­¥é€šä¿¡æ¨¡å‹" class="headerlink" title="å¼‚æ­¥é€šä¿¡æ¨¡å‹"></a>å¼‚æ­¥é€šä¿¡æ¨¡å‹</h3><p><img src="/../../../img/Pasted%20image%2020230919203730.png"></p><blockquote><p>å¼‚æ­¥æ¶ˆæ¯é€šä¿¡æ¨¡å¼ä¸‹ï¼Œå„å­ç³»ç»Ÿä¹‹é—´æ— éœ€å¼ºè€¦åˆç›´æ¥è¿æ¥ï¼Œè°ƒç”¨æ–¹åªéœ€è¦å°†è¯·æ±‚è½¬åŒ–æˆå¼‚æ­¥äº‹ä»¶ï¼ˆæ¶ˆæ¯ï¼‰å‘é€ç»™ä¸­é—´ä»£ç†ï¼Œå‘é€æˆåŠŸå³å¯è®¤ä¸ºè¯¥å¼‚æ­¥é“¾è·¯è°ƒç”¨å®Œæˆï¼Œå‰©ä¸‹çš„å·¥ä½œä¸­é—´ä»£ç†ä¼šè´Ÿè´£å°†äº‹ä»¶å¯é é€šçŸ¥åˆ°ä¸‹æ¸¸çš„è°ƒç”¨ç³»ç»Ÿï¼Œç¡®ä¿ä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚è¯¥ä¸­é—´ä»£ç†ä¸€èˆ¬å°±æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</p></blockquote><blockquote><p>å¼‚æ­¥é€šä¿¡çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p></blockquote><ul><li><p>ç³»ç»Ÿæ‹“æ‰‘ç®€å•ã€‚ç”±äºè°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹ç»Ÿä¸€å’Œä¸­é—´ä»£ç†é€šä¿¡ï¼Œç³»ç»Ÿæ˜¯æ˜Ÿå‹ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œç®¡ç†ã€‚</p></li><li><p>ä¸Šä¸‹æ¸¸è€¦åˆæ€§å¼±ã€‚ä¸Šä¸‹æ¸¸ç³»ç»Ÿä¹‹é—´å¼±è€¦åˆï¼Œç»“æ„æ›´çµæ´»ï¼Œç”±ä¸­é—´ä»£ç†è´Ÿè´£ç¼“å†²å’Œå¼‚æ­¥æ¢å¤ã€‚ ä¸Šä¸‹æ¸¸ç³»ç»Ÿé—´å¯ä»¥ç‹¬ç«‹å‡çº§å’Œå˜æ›´ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚</p></li><li><p>å®¹é‡å‰Šå³°å¡«è°·ã€‚åŸºäºæ¶ˆæ¯çš„ä¸­é—´ä»£ç†å¾€å¾€å…·å¤‡å¾ˆå¼ºçš„æµé‡ç¼“å†²å’Œæ•´å½¢èƒ½åŠ›ï¼Œä¸šåŠ¡æµé‡é«˜å³°åˆ°æ¥æ—¶ä¸ä¼šå‡»å®ä¸‹æ¸¸ã€‚</p></li></ul><h2 id="æ¶ˆæ¯ä¼ è¾“æ¨¡å‹ä»‹ç»"><a href="#æ¶ˆæ¯ä¼ è¾“æ¨¡å‹ä»‹ç»" class="headerlink" title="æ¶ˆæ¯ä¼ è¾“æ¨¡å‹ä»‹ç»"></a>æ¶ˆæ¯ä¼ è¾“æ¨¡å‹ä»‹ç»</h2><blockquote><p>ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶çš„ä¼ è¾“æ¨¡å‹ä¸»è¦ä¸ºç‚¹å¯¹ç‚¹æ¨¡å‹å’Œå‘å¸ƒè®¢é˜…æ¨¡å‹ã€‚</p></blockquote><h3 id="ç‚¹å¯¹ç‚¹æ¨¡å‹"><a href="#ç‚¹å¯¹ç‚¹æ¨¡å‹" class="headerlink" title="ç‚¹å¯¹ç‚¹æ¨¡å‹"></a>ç‚¹å¯¹ç‚¹æ¨¡å‹</h3><p><img src="/../../../img/Pasted%20image%2020230919203903.png"><br>ç‚¹å¯¹ç‚¹æ¨¡å‹ä¹Ÿå«é˜Ÿåˆ—æ¨¡å‹ï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><p>æ¶ˆè´¹åŒ¿åï¼šæ¶ˆæ¯ä¸Šä¸‹æ¸¸æ²Ÿé€šçš„å”¯ä¸€çš„èº«ä»½å°±æ˜¯é˜Ÿåˆ—ï¼Œä¸‹æ¸¸æ¶ˆè´¹è€…ä»é˜Ÿåˆ—è·å–æ¶ˆæ¯æ— æ³•ç”³æ˜ç‹¬ç«‹èº«ä»½ã€‚</p></li><li><p>ä¸€å¯¹ä¸€é€šä¿¡ï¼šåŸºäºæ¶ˆè´¹åŒ¿åç‰¹ç‚¹ï¼Œä¸‹æ¸¸æ¶ˆè´¹è€…å³ä½¿æœ‰å¤šä¸ªï¼Œä½†éƒ½æ²¡æœ‰è‡ªå·±ç‹¬ç«‹çš„èº«ä»½ï¼Œå› æ­¤å…±äº«é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½åªä¼šè¢«å”¯ä¸€ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†ã€‚å› æ­¤ç‚¹å¯¹ç‚¹æ¨¡å‹åªèƒ½å®ç°ä¸€å¯¹ä¸€é€šä¿¡ã€‚</p></li></ul><h3 id="å‘å¸ƒè®¢é˜…æ¨¡å‹"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å‹" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å‹"></a>å‘å¸ƒè®¢é˜…æ¨¡å‹</h3><p><img src="/../../../img/Pasted%20image%2020230919203925.png"><br>å‘å¸ƒè®¢é˜…æ¨¡å‹å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><p>æ¶ˆè´¹ç‹¬ç«‹ï¼šç›¸æ¯”é˜Ÿåˆ—æ¨¡å‹çš„åŒ¿åæ¶ˆè´¹æ–¹å¼ï¼Œå‘å¸ƒè®¢é˜…æ¨¡å‹ä¸­æ¶ˆè´¹æ–¹éƒ½ä¼šå…·å¤‡çš„èº«ä»½ï¼Œä¸€èˆ¬å«åšè®¢é˜…ç»„ï¼ˆè®¢é˜…å…³ç³»ï¼‰ï¼Œä¸åŒè®¢é˜…ç»„ä¹‹é—´ç›¸äº’ç‹¬ç«‹ä¸ä¼šç›¸äº’å½±å“ã€‚</p></li><li><p>ä¸€å¯¹å¤šé€šä¿¡ï¼šåŸºäºç‹¬ç«‹èº«ä»½çš„è®¾è®¡ï¼ŒåŒä¸€ä¸ªä¸»é¢˜å†…çš„æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªè®¢é˜…ç»„å¤„ç†ï¼Œæ¯ä¸ªè®¢é˜…ç»„éƒ½å¯ä»¥æ‹¿åˆ°å…¨é‡æ¶ˆæ¯ã€‚å› æ­¤å‘å¸ƒè®¢é˜…æ¨¡å‹å¯ä»¥å®ç°ä¸€å¯¹å¤šé€šä¿¡ã€‚</p></li></ul><p>ä¼ è¾“æ¨¡å‹å¯¹æ¯”</p><p>ç‚¹å¯¹ç‚¹æ¨¡å‹å’Œå‘å¸ƒè®¢é˜…æ¨¡å‹å„æœ‰ä¼˜åŠ¿ï¼Œç‚¹å¯¹ç‚¹æ¨¡å‹æ›´ä¸ºç®€å•ï¼Œè€Œå‘å¸ƒè®¢é˜…æ¨¡å‹çš„æ‰©å±•æ€§æ›´é«˜ã€‚ Apache RocketMQ ä½¿ç”¨çš„ä¼ è¾“æ¨¡å‹ä¸ºå‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œå› æ­¤ä¹Ÿå…·æœ‰å‘å¸ƒè®¢é˜…æ¨¡å‹çš„ç‰¹ç‚¹ã€‚</p><h2 id="ç”Ÿäº§è€…"><a href="#ç”Ÿäº§è€…" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h2>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
          <category> RocketMQ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¶ˆæ¯é˜Ÿåˆ— </tag>
            
            <tag> ä¸­é—´ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot</title>
      <link href="/posts/6f2612a2/"/>
      <url>/posts/6f2612a2/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å¸¸ç”¨æ³¨è§£"><a href="#1-å¸¸ç”¨æ³¨è§£" class="headerlink" title="1.å¸¸ç”¨æ³¨è§£"></a>1.å¸¸ç”¨æ³¨è§£</h1><h2 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a>@Bean</h2><blockquote><p>Springçš„@Beanæ³¨è§£ç”¨äºå‘Šè¯‰æ–¹æ³•ï¼Œäº§ç”Ÿä¸€ä¸ª<code>Bean</code>å¯¹è±¡ï¼Œç„¶åè¿™ä¸ª<code>Bean</code>å¯¹è±¡äº¤ç»™<code>Spring</code>ç®¡ç†ã€‚äº§ç”Ÿè¿™ä¸ª<code>Bean</code>å¯¹è±¡çš„æ–¹æ³•<code>Spring</code>åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œéšåè¿™ä¸ª<code>Spring</code>å°†ä¼šå°†è¿™ä¸ª<code>Bean</code>å¯¹è±¡æ”¾åœ¨è‡ªå·±çš„<code>IOCå®¹å™¨</code>ä¸­ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue Router</title>
      <link href="/posts/49bed910/"/>
      <url>/posts/49bed910/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h1><blockquote><p>ç”¨ Vue + Vue Router åˆ›å»ºå•é¡µåº”ç”¨éå¸¸ç®€å•ï¼šé€šè¿‡ Vue.jsï¼Œæˆ‘ä»¬å·²ç»ç”¨ç»„ä»¶ç»„æˆäº†æˆ‘ä»¬çš„åº”ç”¨ã€‚å½“åŠ å…¥ Vue Router æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†æˆ‘ä»¬çš„ç»„ä»¶æ˜ å°„åˆ°è·¯ç”±ä¸Šï¼Œè®© Vue Router çŸ¥é“åœ¨å“ªé‡Œæ¸²æŸ“å®ƒä»¬ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ä¾‹å­ï¼š</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue-router@4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello App!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨ router-link ç»„ä»¶è¿›è¡Œå¯¼èˆª --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é€šè¿‡ä¼ é€’ `to` æ¥æŒ‡å®šé“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--`&lt;router-link&gt;` å°†å‘ˆç°ä¸€ä¸ªå¸¦æœ‰æ­£ç¡® `href` å±æ€§çš„ `&lt;a&gt;` æ ‡ç­¾--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>Go to Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>Go to About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="2-åŠ¨æ€è·¯ç”±åŒ¹é…"><a href="#2-åŠ¨æ€è·¯ç”±åŒ¹é…" class="headerlink" title="2.åŠ¨æ€è·¯ç”±åŒ¹é…"></a>2.åŠ¨æ€è·¯ç”±åŒ¹é…</h1><table><thead><tr><th>åŒ¹é…æ¨¡å¼</th><th>åŒ¹é…è·¯å¾„</th><th>$route.params</th></tr></thead><tbody><tr><td>&#x2F;users&#x2F;:username</td><td>&#x2F;users&#x2F;eduardo</td><td><code>&#123; username: &#39;eduardo&#39; &#125;</code></td></tr><tr><td>&#x2F;users&#x2F;:username&#x2F;posts&#x2F;:postId</td><td>&#x2F;users&#x2F;eduardo&#x2F;posts&#x2F;123</td><td><code>&#123; username: &#39;eduardo&#39;, postId: &#39;123&#39; &#125;</code></td></tr></tbody></table><h2 id="å“åº”è·¯ç”±å‚æ•°å˜åŒ–"><a href="#å“åº”è·¯ç”±å‚æ•°å˜åŒ–" class="headerlink" title="å“åº”è·¯ç”±å‚æ•°å˜åŒ–"></a>å“åº”è·¯ç”±å‚æ•°å˜åŒ–</h2><blockquote><p>ä½¿ç”¨å¸¦æœ‰å‚æ•°çš„è·¯ç”±æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ç”¨æˆ·ä» &#x2F;users&#x2F;johnny å¯¼èˆªåˆ° &#x2F;users&#x2F;jolyne æ—¶ï¼Œç›¸åŒçš„ç»„ä»¶å®ä¾‹å°†è¢«é‡å¤ä½¿ç”¨ã€‚å› ä¸ºä¸¤ä¸ªè·¯ç”±éƒ½æ¸²æŸ“åŒä¸ªç»„ä»¶ï¼Œæ¯”èµ·é”€æ¯å†åˆ›å»ºï¼Œå¤ç”¨åˆ™æ˜¾å¾—æ›´åŠ é«˜æ•ˆã€‚ä¸è¿‡ï¼Œè¿™ä¹Ÿæ„å‘³ç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸ä¼šè¢«è°ƒç”¨ã€‚</p></blockquote><blockquote><p>æ–¹å¼ä¸€ï¼šä½¿ç”¨watchç›‘æ§å‚æ•°<br>æ–¹å¼äºŒï¼šä½¿ç”¨å¯¼èˆªå®ˆå«<strong>beforeRouteUpdate</strong></p></blockquote><h2 id="æ•è·æ‰€æœ‰è·¯ç”±ï¼ˆç”¨äº404ï¼‰"><a href="#æ•è·æ‰€æœ‰è·¯ç”±ï¼ˆç”¨äº404ï¼‰" class="headerlink" title="æ•è·æ‰€æœ‰è·¯ç”±ï¼ˆç”¨äº404ï¼‰"></a>æ•è·æ‰€æœ‰è·¯ç”±ï¼ˆç”¨äº404ï¼‰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// å°†åŒ¹é…æ‰€æœ‰å†…å®¹å¹¶å°†å…¶æ”¾åœ¨ `$route.params.pathMatch` ä¸‹</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;NotFound&#x27;</span>, <span class="attr">component</span>: <span class="title class_">NotFound</span> &#125;,</span><br><span class="line">  <span class="comment">// å°†åŒ¹é…ä»¥ `/user-` å¼€å¤´çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶å°†å…¶æ”¾åœ¨ `$route.params.afterUser` ä¸‹</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/user-:afterUser(.*)&#x27;</span>, <span class="attr">component</span>: <span class="title class_">UserGeneric</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="åœ¨å‚æ•°ä¸­è‡ªå®šä¹‰æ­£åˆ™"><a href="#åœ¨å‚æ•°ä¸­è‡ªå®šä¹‰æ­£åˆ™" class="headerlink" title="åœ¨å‚æ•°ä¸­è‡ªå®šä¹‰æ­£åˆ™"></a>åœ¨å‚æ•°ä¸­è‡ªå®šä¹‰æ­£åˆ™</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// /:orderId -&gt; ä»…åŒ¹é…æ•°å­—</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:orderId(\\d+)&#x27;</span> &#125;,</span><br><span class="line">  <span class="comment">// /:productName -&gt; åŒ¹é…å…¶ä»–ä»»ä½•å†…å®¹</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:productName&#x27;</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>ç¡®ä¿**è½¬ä¹‰åæ–œæ (Â <code>\</code>Â )**ï¼Œå°±åƒæˆ‘ä»¬å¯¹Â <code>\d</code>Â (å˜æˆ<code>\\d</code>)æ‰€åšçš„é‚£æ ·ï¼Œåœ¨ JavaScript ä¸­å®é™…ä¼ é€’å­—ç¬¦ä¸²ä¸­çš„åæ–œæ å­—ç¬¦ã€‚</p></blockquote><h2 id="å¯é‡å¤çš„å‚æ•°"><a href="#å¯é‡å¤çš„å‚æ•°" class="headerlink" title="å¯é‡å¤çš„å‚æ•°"></a>å¯é‡å¤çš„å‚æ•°</h2><blockquote><p>å¦‚æœä½ éœ€è¦åŒ¹é…å…·æœ‰å¤šä¸ªéƒ¨åˆ†çš„è·¯ç”±ï¼Œå¦‚ &#x2F;first&#x2F;second&#x2F;thirdï¼Œä½ åº”è¯¥ç”¨ *ï¼ˆ0 ä¸ªæˆ–å¤šä¸ªï¼‰å’Œ +ï¼ˆ1 ä¸ªæˆ–å¤šä¸ªï¼‰å°†å‚æ•°æ ‡è®°ä¸ºå¯é‡å¤ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// /:chapters -&gt;  åŒ¹é… /one, /one/two, /one/two/three, ç­‰</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:chapters+&#x27;</span> &#125;,</span><br><span class="line">  <span class="comment">// /:chapters -&gt; åŒ¹é… /, /one, /one/two, /one/two/three, ç­‰</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:chapters*&#x27;</span> &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">//è¿™äº›ä¹Ÿå¯ä»¥é€šè¿‡åœ¨å³æ‹¬å·åæ·»åŠ å®ƒä»¬ä¸è‡ªå®šä¹‰æ­£åˆ™ç»“åˆä½¿ç”¨ï¼š</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ä»…åŒ¹é…æ•°å­—</span></span><br><span class="line">  <span class="comment">// åŒ¹é… /1, /1/2, ç­‰</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:chapters(\\d+)+&#x27;</span> &#125;,</span><br><span class="line">  <span class="comment">// åŒ¹é… /, /1, /1/2, ç­‰</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/:chapters(\\d+)*&#x27;</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="Sensitive-ä¸-strict-è·¯ç”±é…ç½®"><a href="#Sensitive-ä¸-strict-è·¯ç”±é…ç½®" class="headerlink" title="Sensitive ä¸ strict è·¯ç”±é…ç½®"></a>Sensitive ä¸ strict è·¯ç”±é…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// å°†åŒ¹é… /users/posva è€Œéï¼š</span></span><br><span class="line">    <span class="comment">// - /users/posva/ å½“ strict: true</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// - /Users/posva å½“ sensitive: true</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/users/:id&#x27;</span>, <span class="attr">sensitive</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    <span class="comment">// å°†åŒ¹é… /users, /Users, ä»¥åŠ /users/42 è€Œé /users/ æˆ– /users/42/</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/users/:id?&#x27;</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">strict</span>: <span class="literal">true</span>, <span class="comment">// applies to all routes</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h2><blockquote><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ ? ä¿®é¥°ç¬¦(0 ä¸ªæˆ– 1 ä¸ª)å°†ä¸€ä¸ªå‚æ•°æ ‡è®°ä¸ºå¯é€‰ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// åŒ¹é… /users å’Œ /users/posva</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/users/:userId?&#x27;</span> &#125;,</span><br><span class="line">  <span class="comment">// åŒ¹é… /users å’Œ /users/42</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/users/:userId(\\d+)?&#x27;</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="3-åµŒå¥—è·¯ç”±"><a href="#3-åµŒå¥—è·¯ç”±" class="headerlink" title="3.åµŒå¥—è·¯ç”±"></a>3.åµŒå¥—è·¯ç”±</h1><blockquote><p>è¿™é‡Œçš„Â <code>&lt;router-view&gt;</code>Â æ˜¯ä¸€ä¸ªé¡¶å±‚çš„Â <code>router-view</code>ã€‚å®ƒæ¸²æŸ“é¡¶å±‚è·¯ç”±åŒ¹é…çš„ç»„ä»¶ã€‚åŒæ ·åœ°ï¼Œä¸€ä¸ªè¢«æ¸²æŸ“çš„ç»„ä»¶ä¹Ÿå¯ä»¥åŒ…å«è‡ªå·±åµŒå¥—çš„Â <code>&lt;router-view&gt;</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨Â <code>User</code>Â ç»„ä»¶çš„æ¨¡æ¿å†…æ·»åŠ ä¸€ä¸ªÂ <code>&lt;router-view&gt;</code>ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">User</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// å½“ /user/:id/profile åŒ¹é…æˆåŠŸ</span></span><br><span class="line">        <span class="comment">// UserProfile å°†è¢«æ¸²æŸ“åˆ° User çš„ &lt;router-view&gt; å†…éƒ¨</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;profile&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserProfile</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// å½“ /user/:id/posts åŒ¹é…æˆåŠŸ</span></span><br><span class="line">        <span class="comment">// UserPosts å°†è¢«æ¸²æŸ“åˆ° User çš„ &lt;router-view&gt; å†…éƒ¨</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;posts&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserPosts</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œå­è·¯ç”±ä¸­ä¸€å®šä¸è¦åŠ &#x2F;ï¼Œå¦‚&#x2F;profile</p></blockquote><h1 id="4-ç¼–ç¨‹å¼å¯¼èˆª"><a href="#4-ç¼–ç¨‹å¼å¯¼èˆª" class="headerlink" title="4.ç¼–ç¨‹å¼å¯¼èˆª"></a>4.ç¼–ç¨‹å¼å¯¼èˆª</h1><h2 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h2><table><thead><tr><th>å£°æ˜å¼</th><th>ç¼–ç¨‹å¼</th></tr></thead><tbody><tr><td><code>&lt;router-link :to=&quot;...&quot;&gt;</code></td><td><code>router.push(...)</code></td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²è·¯å¾„</span></span><br><span class="line">router.<span class="title function_">push</span>(<span class="string">&#x27;/users/eduardo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦æœ‰è·¯å¾„çš„å¯¹è±¡,è·¯ç”±çš„indexä¸­éœ€è¦ç”¨å ä½ç¬¦ /users/:username</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/users/eduardo&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘½åçš„è·¯ç”±ï¼Œå¹¶åŠ ä¸Šå‚æ•°ï¼Œè®©è·¯ç”±å»ºç«‹ url</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">username</span>: <span class="string">&#x27;eduardo&#x27;</span> &#125; &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦æŸ¥è¯¢å‚æ•°ï¼Œç»“æœæ˜¯ /register?plan=private</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">plan</span>: <span class="string">&#x27;private&#x27;</span> &#125; &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦ hashï¼Œç»“æœæ˜¯ /about#team</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">hash</span>: <span class="string">&#x27;#team&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœæä¾›äº† pathï¼Œparams ä¼šè¢«å¿½ç•¥ï¼Œä¸Šè¿°ä¾‹å­ä¸­çš„ query å¹¶ä¸å±äºè¿™ç§æƒ…å†µã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¸‹é¢ä¾‹å­çš„åšæ³•ï¼Œä½ éœ€è¦æä¾›è·¯ç”±çš„ name æˆ–æ‰‹å†™å®Œæ•´çš„å¸¦æœ‰å‚æ•°çš„ path ï¼š</p></blockquote><blockquote><p>å½“æŒ‡å®šÂ <code>params</code>Â æ—¶ï¼Œå¯æä¾›Â <code>string</code>Â æˆ–Â <code>number</code>Â å‚æ•°ï¼ˆæˆ–è€…å¯¹äº<a href="https://router.vuejs.org/zh/guide/essentials/route-matching-syntax.html#repeatable-params">å¯é‡å¤çš„å‚æ•°</a>å¯æä¾›ä¸€ä¸ªæ•°ç»„ï¼‰ã€‚<strong>ä»»ä½•å…¶ä»–ç±»å‹ï¼ˆå¦‚Â <code>undefined</code>ã€<code>false</code>Â ç­‰ï¼‰éƒ½å°†è¢«è‡ªåŠ¨å­—ç¬¦ä¸²åŒ–</strong>ã€‚å¯¹äº<a href="https://router.vuejs.org/zh/guide/essentials/route-matching-syntax.html#repeatable-params">å¯é€‰å‚æ•°</a>ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼ˆ<code>&quot;&quot;</code>ï¼‰æ¥è·³è¿‡å®ƒã€‚</p></blockquote><h2 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h2><blockquote><p>å®ƒçš„ä½œç”¨ç±»ä¼¼äºÂ <code>router.push</code>ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå®ƒåœ¨å¯¼èˆªæ—¶ä¸ä¼šå‘ history æ·»åŠ æ–°è®°å½•ï¼Œæ­£å¦‚å®ƒçš„åå­—æ‰€æš—ç¤ºçš„é‚£æ ·â€”â€”å®ƒå–ä»£äº†å½“å‰çš„æ¡ç›®ã€‚æ­¤æ—¶ç‚¹å‡»æµè§ˆå™¨çš„è¿”å›æŒ‰é’®ï¼Œä¸å¯ä»¥è¿”å›åˆ°å…ˆå‰çš„ç½‘é¡µï¼Œå› ä¸ºè¢«æ›¿æ¢äº†</p></blockquote><table><thead><tr><th>å£°æ˜å¼</th><th>ç¼–ç¨‹å¼</th></tr></thead><tbody><tr><td><code>&lt;router-link :to=&quot;...&quot; replace&gt;</code></td><td><code>router.replace(...)</code></td></tr></tbody></table><p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¼ é€’ç»™Â <code>router.push</code>Â çš„Â <code>routeLocation</code>Â ä¸­å¢åŠ ä¸€ä¸ªå±æ€§Â <code>replace: true</code>Â ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">replace</span>: <span class="literal">true</span> &#125;)</span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line">router.<span class="title function_">replace</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure><h2 id="å‰è¿›"><a href="#å‰è¿›" class="headerlink" title="å‰è¿›"></a>å‰è¿›</h2><blockquote><p>è¯¥æ–¹æ³•é‡‡ç”¨ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºåœ¨å†å²å †æ ˆä¸­å‰è¿›æˆ–åé€€å¤šå°‘æ­¥ï¼Œç±»ä¼¼äºÂ <code>window.history.go(n)</code>ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å‰ç§»åŠ¨ä¸€æ¡è®°å½•ï¼Œä¸ router.forward() ç›¸åŒ</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// è¿”å›ä¸€æ¡è®°å½•ï¼Œä¸ router.back() ç›¸åŒ</span></span><br><span class="line">router.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line"><span class="comment">// å‰è¿› 3 æ¡è®°å½•</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">3</span>)</span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰é‚£ä¹ˆå¤šè®°å½•ï¼Œé™é»˜å¤±è´¥</span></span><br><span class="line">router.<span class="title function_">go</span>(-<span class="number">100</span>)</span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure><h1 id="5-å‘½åè§†å›¾"><a href="#5-å‘½åè§†å›¾" class="headerlink" title="5.å‘½åè§†å›¾"></a>5.å‘½åè§†å›¾</h1><blockquote><p>æœ‰æ—¶å€™æƒ³åŒæ—¶ (åŒçº§) å±•ç¤ºå¤šä¸ªè§†å›¾ï¼Œè€Œä¸æ˜¯åµŒå¥—å±•ç¤ºï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå¸ƒå±€ï¼Œæœ‰Â <code>sidebar</code>Â (ä¾§å¯¼èˆª) å’ŒÂ <code>main</code>Â (ä¸»å†…å®¹) ä¸¤ä¸ªè§†å›¾ï¼Œè¿™ä¸ªæ—¶å€™å‘½åè§†å›¾å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ä½ å¯ä»¥åœ¨ç•Œé¢ä¸­æ‹¥æœ‰å¤šä¸ªå•ç‹¬å‘½åçš„è§†å›¾ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªå•ç‹¬çš„å‡ºå£ã€‚å¦‚æœÂ <code>router-view</code>Â æ²¡æœ‰è®¾ç½®åå­—ï¼Œé‚£ä¹ˆé»˜è®¤ä¸ºÂ <code>default</code>ã€‚å…¶å®å°±æ˜¯ä¸€ä¸ªç»„ä»¶é‡Œå±•ç¤ºå¤šä¸ªè·¯ç”±ç»„ä»¶</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">&quot;view left-sidebar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;LeftSidebar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">&quot;view main-content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">&quot;view right-sidebar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;RightSidebar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸€ä¸ªè§†å›¾ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ¸²æŸ“ï¼Œå› æ­¤å¯¹äºåŒä¸ªè·¯ç”±ï¼Œå¤šä¸ªè§†å›¾å°±éœ€è¦å¤šä¸ªç»„ä»¶ã€‚ç¡®ä¿æ­£ç¡®ä½¿ç”¨Â <code>components</code>Â é…ç½® (å¸¦ä¸ŠÂ <strong>s</strong>)ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="attr">default</span>: <span class="title class_">Home</span>,</span><br><span class="line">        <span class="comment">// LeftSidebar: LeftSidebar çš„ç¼©å†™</span></span><br><span class="line">        <span class="title class_">LeftSidebar</span>,</span><br><span class="line">        <span class="comment">// å®ƒä»¬ä¸ `&lt;router-view&gt;` ä¸Šçš„ `name` å±æ€§åŒ¹é…</span></span><br><span class="line">        <span class="title class_">RightSidebar</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6-é‡å®šå‘"><a href="#6-é‡å®šå‘" class="headerlink" title="6.é‡å®šå‘"></a>6.é‡å®šå‘</h1><blockquote><p>é‡å®šå‘ä¹Ÿæ˜¯é€šè¿‡Â <code>routes</code>Â é…ç½®æ¥å®Œæˆï¼Œä¸‹é¢ä¾‹å­æ˜¯ä»Â &#96;&#96;Â é‡å®šå‘åˆ°Â <code>/index</code>ï¼šè¿™æ ·ç”¨æˆ·æ‰“å¼€é¦–é¡µæ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è·³è½¬åˆ°<code>/index</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [&#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/index&#x27;</span> &#125;]</span><br></pre></td></tr></table></figure><blockquote><p>é‡å®šå‘çš„ç›®æ ‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘½åçš„è·¯ç”±ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [&#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">redirect</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;homepage&#x27;</span> &#125; &#125;]</span><br></pre></td></tr></table></figure><blockquote><p>ç”šè‡³æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ŒåŠ¨æ€è¿”å›é‡å®šå‘ç›®æ ‡ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// /search/screens -&gt; /search?q=screens</span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/search/:searchText&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="function"><span class="params">to</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ–¹æ³•æ¥æ”¶ç›®æ ‡è·¯ç”±ä½œä¸ºå‚æ•°</span></span><br><span class="line">      <span class="comment">// return é‡å®šå‘çš„å­—ç¬¦ä¸²è·¯å¾„/è·¯å¾„å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">path</span>: <span class="string">&#x27;/search&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">q</span>: to.<span class="property">params</span>.<span class="property">searchText</span> &#125; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/search&#x27;</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="ç›¸å¯¹é‡å®šå‘"><a href="#ç›¸å¯¹é‡å®šå‘" class="headerlink" title="ç›¸å¯¹é‡å®šå‘"></a>ç›¸å¯¹é‡å®šå‘</h2><blockquote><p>ä¹Ÿå¯ä»¥é‡å®šå‘åˆ°ç›¸å¯¹ä½ç½®ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// å°†æ€»æ˜¯æŠŠ/users/123/postsé‡å®šå‘åˆ°/users/123/profileã€‚</span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/users/:id/posts&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="function"><span class="params">to</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¯¥å‡½æ•°æ¥æ”¶ç›®æ ‡è·¯ç”±ä½œä¸ºå‚æ•°</span></span><br><span class="line">      <span class="comment">// ç›¸å¯¹ä½ç½®ä¸ä»¥`/`å¼€å¤´</span></span><br><span class="line">      <span class="comment">// æˆ– &#123; path: &#x27;profile&#x27;&#125;</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;profile&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h2><blockquote><p>é‡å®šå‘æ˜¯æŒ‡å½“ç”¨æˆ·è®¿é—® &#x2F;home æ—¶ï¼ŒURL ä¼šè¢« &#x2F; æ›¿æ¢ï¼Œç„¶ååŒ¹é…æˆ &#x2F;ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯åˆ«åå‘¢ï¼Ÿå°† &#x2F; åˆ«åä¸º &#x2F;homeï¼Œæ„å‘³ç€å½“ç”¨æˆ·è®¿é—® &#x2F;home æ—¶ï¼ŒURL ä»ç„¶æ˜¯ &#x2F;homeï¼Œä½†ä¼šè¢«åŒ¹é…ä¸ºç”¨æˆ·æ­£åœ¨è®¿é—® &#x2F;ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Homepage</span>, <span class="attr">alias</span>: <span class="string">&#x27;/home&#x27;</span> &#125;]</span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡åˆ«åï¼Œä½ å¯ä»¥è‡ªç”±åœ°å°† UI ç»“æ„æ˜ å°„åˆ°ä¸€ä¸ªä»»æ„çš„ URLï¼Œè€Œä¸å—é…ç½®çš„åµŒå¥—ç»“æ„çš„é™åˆ¶ã€‚ä½¿åˆ«åä»¥Â <code>/</code>Â å¼€å¤´ï¼Œä»¥ä½¿åµŒå¥—è·¯å¾„ä¸­çš„è·¯å¾„æˆä¸ºç»å¯¹è·¯å¾„ã€‚ä½ ç”šè‡³å¯ä»¥å°†ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œç”¨ä¸€ä¸ªæ•°ç»„æä¾›å¤šä¸ªåˆ«åï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/users&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">UsersLayout</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      <span class="comment">// ä¸ºè¿™ 3 ä¸ª URL å‘ˆç° UserList</span></span><br><span class="line">      <span class="comment">// - /users</span></span><br><span class="line">      <span class="comment">// - /users/list</span></span><br><span class="line">      <span class="comment">// - /people</span></span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: <span class="title class_">UserList</span>, <span class="attr">alias</span>: [<span class="string">&#x27;/people&#x27;</span>, <span class="string">&#x27;list&#x27;</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="7-è·¯ç”±ç»„ä»¶ä¼ å‚"><a href="#7-è·¯ç”±ç»„ä»¶ä¼ å‚" class="headerlink" title="7.è·¯ç”±ç»„ä»¶ä¼ å‚"></a>7.è·¯ç”±ç»„ä»¶ä¼ å‚</h1><blockquote><p>åœ¨ä½ çš„ç»„ä»¶ä¸­ä½¿ç”¨Â <code>$route</code>Â ä¼šä¸è·¯ç”±ç´§å¯†è€¦åˆï¼Œè¿™é™åˆ¶äº†ç»„ä»¶çš„çµæ´»æ€§ï¼Œå› ä¸ºå®ƒåªèƒ½ç”¨äºç‰¹å®šçš„ URLã€‚è™½ç„¶è¿™ä¸ä¸€å®šæ˜¯ä»¶åäº‹ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡Â <code>props</code>Â é…ç½®æ¥è§£é™¤è¿™ç§è¡Œä¸ºï¼š</p></blockquote><p>æˆ‘ä»¬å¯ä»¥å°†ä¸‹é¢çš„ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;User &#123;&#123; $route.params.id &#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> routes = [&#123; <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span> &#125;]</span><br></pre></td></tr></table></figure><p>æ›¿æ¢æˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="comment">// è¯·ç¡®ä¿æ·»åŠ ä¸€ä¸ªä¸è·¯ç”±å‚æ•°å®Œå…¨ç›¸åŒçš„ prop å</span></span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;User &#123;&#123; id &#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> routes = [&#123; <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span>, <span class="attr">props</span>: <span class="literal">true</span> &#125;]</span><br></pre></td></tr></table></figure><h2 id="å¸ƒå°”æ¨¡å¼"><a href="#å¸ƒå°”æ¨¡å¼" class="headerlink" title="å¸ƒå°”æ¨¡å¼"></a>å¸ƒå°”æ¨¡å¼</h2><blockquote><p>å½“ props è®¾ç½®ä¸º true æ—¶ï¼Œroute.params å°†è¢«è®¾ç½®ä¸ºç»„ä»¶çš„ propsã€‚</p></blockquote><h2 id="å‘½åè§†å›¾"><a href="#å‘½åè§†å›¾" class="headerlink" title="å‘½åè§†å›¾"></a>å‘½åè§†å›¾</h2><blockquote><p>å¯¹äºæœ‰å‘½åè§†å›¾çš„è·¯ç”±ï¼Œä½ å¿…é¡»ä¸ºæ¯ä¸ªå‘½åè§†å›¾å®šä¹‰ props é…ç½®ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="attr">default</span>: <span class="title class_">User</span>, <span class="attr">sidebar</span>: <span class="title class_">Sidebar</span> &#125;,</span><br><span class="line">    <span class="attr">props</span>: &#123; <span class="attr">default</span>: <span class="literal">true</span>, <span class="attr">sidebar</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡æ¨¡å¼"><a href="#å¯¹è±¡æ¨¡å¼" class="headerlink" title="å¯¹è±¡æ¨¡å¼"></a>å¯¹è±¡æ¨¡å¼</h2><blockquote><p>å½“ props æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒå°†åŸæ ·è®¾ç½®ä¸ºç»„ä»¶ propsã€‚å½“ props æ˜¯é™æ€çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/users&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">User</span>,</span><br><span class="line">    <span class="attr">props</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;jyc&quot;</span>,<span class="attr">age</span>:<span class="string">&quot;16&quot;</span>&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Userç»„ä»¶å£°æ˜å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>([<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>])</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°æ¨¡å¼"><a href="#å‡½æ•°æ¨¡å¼" class="headerlink" title="å‡½æ•°æ¨¡å¼"></a>å‡½æ•°æ¨¡å¼</h2><blockquote><p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè¿”å› props çš„å‡½æ•°ã€‚è¿™å…è®¸ä½ å°†å‚æ•°è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œå°†é™æ€å€¼ä¸åŸºäºè·¯ç”±çš„å€¼ç›¸ç»“åˆç­‰ç­‰ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/users/:id&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">User</span>,</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;user&#x27;</span>,</span><br><span class="line"><span class="attr">props</span>: <span class="function"><span class="params">route</span>=&gt;</span>(&#123;<span class="attr">name</span>:route.<span class="property">query</span>.<span class="property">name</span>,<span class="attr">age</span>:route.<span class="property">query</span>.<span class="property">age</span>&#125;),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Userç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>([<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">age</span>);</span><br></pre></td></tr></table></figure><blockquote><p>URLÂ <code>/users/1?name=jyc&amp;age=16</code>Â å°†ä¼ é€’Â <code>&#123;name: &#39;jyc&#39;,age:&#39;16&#39;&#125;</code>Â ä½œä¸º props ä¼ ç»™Â <code>User</code>Â ç»„ä»¶ã€‚</p></blockquote><h1 id="é«˜çº§ç¯‡"><a href="#é«˜çº§ç¯‡" class="headerlink" title="é«˜çº§ç¯‡"></a>é«˜çº§ç¯‡</h1><p>ï¼ˆtodo)</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> Vue3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pinia</title>
      <link href="/posts/74dce755/"/>
      <url>/posts/74dce755/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add pinia</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…ä½¿ç”¨ npm</span></span><br><span class="line">npm install pinia</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨vueé¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¼šåœ¨srcä¸‹å»ºç«‹&#x2F;storeæ–‡ä»¶å¤¹ï¼Œç”¨ä»¥å­˜æ”¾å…¨å±€çŠ¶æ€æ–‡ä»¶ã€‚</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/store/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;createPinia&#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;  </span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createPinia</span>();  </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(store)</span><br><span class="line"><span class="comment">//------------------------------------------------</span></span><br><span class="line"><span class="comment">//æˆ–ç›´æ¥åœ¨main.tsä¸­å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br></pre></td></tr></table></figure><h1 id="2-æ ¸å¿ƒæ¦‚å¿µ"><a href="#2-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2.æ ¸å¿ƒæ¦‚å¿µ"></a>2.æ ¸å¿ƒæ¦‚å¿µ</h1><h2 id="1-State"><a href="#1-State" class="headerlink" title="1.State"></a>1.State</h2><blockquote><p>å¤§å¤šæ•°æ—¶å€™ï¼Œstate æ˜¯ store çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚ æˆ‘ä»¬é€šå¸¸ä»å®šä¹‰åº”ç”¨ç¨‹åºçš„çŠ¶æ€å¼€å§‹ã€‚ åœ¨ Pinia ä¸­ï¼ŒçŠ¶æ€è¢«å®šä¹‰ä¸ºè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•°ã€‚ Pinia åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½å¯ä»¥å·¥ä½œã€‚(å…¶å®ä¹Ÿå°±æ˜¯å…¨å±€å…±äº«çš„æ•°æ®ï¼Œå¦‚ç™»å½•ç”¨æˆ·ä¿¡æ¯)</p></blockquote><h3 id="å®šä¹‰State"><a href="#å®šä¹‰State" class="headerlink" title="å®šä¹‰State"></a>å®šä¹‰State</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeId&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// æ¨èä½¿ç”¨ å®Œæ•´ç±»å‹æ¨æ–­çš„ç®­å¤´å‡½æ•°</span></span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// æ‰€æœ‰è¿™äº›å±æ€§éƒ½å°†è‡ªåŠ¨æ¨æ–­å…¶ç±»å‹</span></span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Eduardo&#x27;</span>,</span><br><span class="line">      <span class="attr">isAdmin</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeId&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// æ¨èä½¿ç”¨ å®Œæ•´ç±»å‹æ¨æ–­çš„ç®­å¤´å‡½æ•°</span></span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="comment">// æ‰€æœ‰è¿™äº›å±æ€§éƒ½å°†è‡ªåŠ¨æ¨æ–­å…¶ç±»å‹</span></span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Eduardo&#x27;</span>,</span><br><span class="line">      <span class="attr">isAdmin</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>å½“ä½ åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨å¤§æ‹¬å· {} åŒ…å›´ä»£ç å—æ—¶ï¼Œä½ å¿…é¡»æ˜¾å¼ä½¿ç”¨ return è¯­å¥æ¥æŒ‡å®šè¿”å›å€¼ã€‚è¿™æ˜¯å› ä¸ºå¤§æ‹¬å· {} å¯ä»¥åŒ…å«å¤šä¸ªè¯­å¥ï¼Œå› æ­¤ä½ éœ€è¦æ˜ç¡®æŒ‡å®šå“ªä¸ªè¯­å¥çš„ç»“æœåº”è¯¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚<br>æ‰€ä»¥ï¼Œå¦‚æœä½ å†™æˆ f: () &#x3D;&gt; { return {} }ï¼Œè¿™ä¸ f: () &#x3D;&gt; ({}) æ˜¯ç­‰ä»·çš„ï¼Œéƒ½è¡¨ç¤ºå‡½æ•° f è¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§æ‹¬å· {} åŒ…å«äº†ä¸€ä¸ª return è¯­å¥ï¼ŒæŒ‡å®šäº†è¿”å›å€¼ä¸ºç©ºå¯¹è±¡ã€‚å¦‚æœä½ çœç•¥å¤§æ‹¬å·ï¼Œé‚£ä¹ˆç®­å¤´å‡½æ•°å°†é»˜è®¤å°†åé¢çš„è¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼ã€‚</p></blockquote><h3 id="è®¿é—®State"><a href="#è®¿é—®State" class="headerlink" title="è®¿é—®State"></a>è®¿é—®State</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useStore&#125; <span class="keyword">from</span> <span class="string">&#x27;../store/module/user&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"><span class="comment">//è®¿é—®çŠ¶æ€ä¸­çš„å±æ€§</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">counter</span>)</span><br><span class="line"><span class="comment">//é‡ç½®åˆ°åˆå§‹çŠ¶æ€</span></span><br><span class="line">store.$reset()</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„storeç±»å‹æ˜¯ä¸€ä¸ªreactiveåŒ…è£¹çš„å“åº”å¼å¯¹è±¡</p></blockquote><blockquote><p><strong>ä¸ºäº†ä» Store ä¸­æå–å±æ€§åŒæ—¶ä¿æŒå…¶å“åº”å¼ï¼Œæ‚¨éœ€è¦ä½¿ç”¨storeToRefs()æˆ–è€…ä½¿ç”¨è®¡ç®—å±æ€§ã€‚ å®ƒå°†ä¸ºä»»ä½•å“åº”å¼å±æ€§åˆ›å»º refsã€‚ å½“æ‚¨ä»…ä½¿ç”¨ store ä¸­çš„çŠ¶æ€ä½†ä¸è°ƒç”¨ä»»ä½•æ“ä½œæ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ï¼š</strong></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line">    <span class="comment">// `name` å’Œ `doubleCount` æ˜¯å“åº”å¼å¼•ç”¨</span></span><br><span class="line">    <span class="comment">// è¿™ä¹Ÿä¼šä¸ºæ’ä»¶æ·»åŠ çš„å±æ€§åˆ›å»ºå¼•ç”¨</span></span><br><span class="line">    <span class="comment">// ä½†è·³è¿‡ä»»ä½• action æˆ– éå“åº”å¼ï¼ˆä¸æ˜¯ ref/reactiveï¼‰çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">const</span> &#123; name, doubleCount &#125; = <span class="title function_">storeToRefs</span>(store)</span><br><span class="line"><span class="comment">//doubleValue: computed(() =&gt; store.doubleCount),</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      doubleCount</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹çŠ¶æ€"><a href="#ä¿®æ”¹çŠ¶æ€" class="headerlink" title="ä¿®æ”¹çŠ¶æ€"></a>ä¿®æ”¹çŠ¶æ€</h3><h4 id="æ–¹å¼1"><a href="#æ–¹å¼1" class="headerlink" title="æ–¹å¼1"></a>æ–¹å¼1</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="property">counter</span>++;</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼2"><a href="#æ–¹å¼2" class="headerlink" title="æ–¹å¼2"></a>æ–¹å¼2</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éœ€è¦é‡æ–°èµ‹ä¸€ä¸ªæ–°çš„å€¼ï¼Œä¸åˆ©äºæ•°ç»„ï¼Œé›†åˆçš„å¢åˆ ä¿®æ”¹</span></span><br><span class="line">store.$patch(&#123;</span><br><span class="line">  <span class="attr">counter</span>: store.<span class="property">counter</span> + <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Abalam&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°å½¢å¼ï¼Œå¯¹stateè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">store.$patch(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  state.<span class="property">items</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;shoes&#x27;</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;)</span><br><span class="line">  state.<span class="property">hasChanged</span> = <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›´æ¥ä¿®æ”¹state</span></span><br><span class="line">store.<span class="property">$state</span> = &#123; <span class="attr">counter</span>: <span class="number">666</span>, <span class="attr">name</span>: <span class="string">&#x27;Paimon&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="è®¢é˜…çŠ¶æ€"><a href="#è®¢é˜…çŠ¶æ€" class="headerlink" title="è®¢é˜…çŠ¶æ€"></a>è®¢é˜…çŠ¶æ€</h3><blockquote><p>è®¢é˜…çŠ¶æ€çš„å˜åŒ–ï¼Œæ¯å½“çŠ¶æ€è¢«ä¿®æ”¹æˆ–æ”¹å˜æ—¶ï¼Œéƒ½ä¼šè§¦å‘å›è°ƒå‡½æ•°</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cartStore.$subscribe(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// import &#123; MutationType &#125; from &#x27;pinia&#x27;</span></span><br><span class="line">  mutation.<span class="property">type</span> <span class="comment">// &#x27;direct&#x27; æ–¹å¼1| &#x27;patch object&#x27; æ–¹å¼2(1)| &#x27;patch function&#x27; æ–¹å¼2(2)</span></span><br><span class="line">  <span class="comment">// ä¸ cartStore.$id ç›¸åŒ</span></span><br><span class="line">  mutation.<span class="property">storeId</span> <span class="comment">// &#x27;cart&#x27;</span></span><br><span class="line">  <span class="comment">// ä»…é€‚ç”¨äº mutation.type === &#x27;patch object&#x27;</span></span><br><span class="line">  mutation.<span class="property">payload</span> <span class="comment">// è¡¥ä¸å¯¹è±¡ä¼ é€’ç»™ to cartStore.$patch()</span></span><br><span class="line">  <span class="comment">// æ¯å½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†æ•´ä¸ªçŠ¶æ€æŒä¹…åŒ–åˆ°æœ¬åœ°å­˜å‚¨</span></span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;cart&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="2-Getters"><a href="#2-Getters" class="headerlink" title="2.Getters"></a>2.Getters</h2><blockquote><p>Getter å®Œå…¨ç­‰åŒäº Store çŠ¶æ€çš„ <strong>è®¡ç®—å€¼</strong>ã€‚ å®ƒä»¬å¯ä»¥ç”¨ defineStore() ä¸­çš„ getters å±æ€§å®šä¹‰ã€‚ ä»–ä»¬æ¥æ”¶â€œçŠ¶æ€â€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä»¥é¼“åŠ±ç®­å¤´å‡½æ•°çš„ä½¿ç”¨ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">counter</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨å°†è¿”å›ç±»å‹æ¨æ–­ä¸ºæ•°å­—</span></span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">counter</span> * <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è¿”å›ç±»å‹å¿…é¡»æ˜ç¡®è®¾ç½®</span></span><br><span class="line">    <span class="title function_">doublePlusOne</span>(): number &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">counter</span> * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¿é—®å…¶ä»–getters</span></span><br><span class="line">    <span class="title function_">doubleCountPlusOne</span>():number &#123;</span><br><span class="line">      <span class="comment">// è‡ªåŠ¨å®Œæˆ âœ¨</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">doubleCount</span> + <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¼ é€’å‚æ•°ç»™getters</span></span><br><span class="line">    <span class="comment">// gettersæœ¬èº«å’Œè®¡ç®—å±æ€§ä¸€æ ·ï¼Œæ— æ³•æ¥æ”¶å‚æ•°ï¼Œä½†å¯ä»¥è¿”å›ä¸€ä¸ªæ¥æ”¶å‚æ•°çš„å‡½æ•°ã€‚å¦‚ä¸‹é¢çš„getUserById</span></span><br><span class="line">    <span class="attr">getUserById</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">userId</span>) =&gt;</span> state.<span class="property">users</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> user.<span class="property">id</span> === userId)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¿é—®å…¶ä»–Storeçš„getters</span></span><br><span class="line">    <span class="comment">// é¦–å…ˆéœ€è¦åœ¨é¡¶éƒ¨importå…¶ä»–Store</span></span><br><span class="line">    <span class="comment">// import &#123;useOtherStore&#125; from &#x27;./other-store&#x27;</span></span><br><span class="line">    <span class="title function_">getOtherStore</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> otherStore = <span class="title function_">useOtherStore</span>()</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">count</span> + otherStore.<span class="property">count</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥ç›´æ¥è®¿é—®Storeçš„ä»»ä½•getterä½œä¸ºstoreçš„å±æ€§ï¼Œå°±å’Œstateå±æ€§ä¸€æ ·</p></blockquote><h2 id="3-Actions"><a href="#3-Actions" class="headerlink" title="3.Actions"></a>3.Actions</h2><blockquote><p>Actions ç›¸å½“äºç»„ä»¶ä¸­çš„ <strong>methods</strong>ã€‚ å®ƒä»¬å¯ä»¥ä½¿ç”¨ defineStore() ä¸­çš„ actions å±æ€§å®šä¹‰ï¼Œå¹¶ä¸”å®ƒä»¬éå¸¸é€‚åˆå®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">counter</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">counter</span>++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">randomizeCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">counter</span> = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">100</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>())</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><ol><li>å’Œgettersä¸€æ ·ï¼Œåœ¨actionsåŒæ ·å¯ä»¥è®¿é—®å…¶ä»–Store</li><li>å¯ä»¥å®šä¹‰å¼‚æ­¥æ–¹æ³•</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useAuthStore &#125; <span class="keyword">from</span> <span class="string">&#x27;./auth-store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useSettingsStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;settings&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">fetchUserPreferences</span>(<span class="params">preferences</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> auth = <span class="title function_">useAuthStore</span>()</span><br><span class="line">      <span class="keyword">if</span> (auth.<span class="property">isAuthenticated</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">preferences</span> = <span class="keyword">await</span> <span class="title function_">fetchPreferences</span>()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;User must be authenticated&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è®¢é˜…Actions"><a href="#è®¢é˜…Actions" class="headerlink" title="è®¢é˜…Actions"></a>è®¢é˜…Actions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unsubscribe = someStore.$onAction(</span><br><span class="line">  <span class="function">(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    name, // action çš„åå­—</span></span></span><br><span class="line"><span class="params"><span class="function">    store, // store å®ä¾‹</span></span></span><br><span class="line"><span class="params"><span class="function">    args, // è°ƒç”¨è¿™ä¸ª action çš„å‚æ•°</span></span></span><br><span class="line"><span class="params"><span class="function">    after, // åœ¨è¿™ä¸ª action æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span></span></span><br><span class="line"><span class="params"><span class="function">    onError, // åœ¨è¿™ä¸ª action æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span></span></span><br><span class="line"><span class="params"><span class="function">  &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è®°å½•å¼€å§‹çš„æ—¶é—´å˜é‡</span></span><br><span class="line">    <span class="keyword">const</span> startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="comment">// è¿™å°†åœ¨ `store` ä¸Šçš„æ“ä½œæ‰§è¡Œä¹‹å‰è§¦å‘</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Start &quot;<span class="subst">$&#123;name&#125;</span>&quot; with params [<span class="subst">$&#123;args.join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>].`</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœ action æˆåŠŸå¹¶ä¸”å®Œå…¨è¿è¡Œåï¼Œafter å°†è§¦å‘ã€‚</span></span><br><span class="line">    <span class="comment">// å®ƒå°†ç­‰å¾…ä»»ä½•è¿”å›çš„ promise</span></span><br><span class="line">    <span class="title function_">after</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">        <span class="string">`Finished &quot;<span class="subst">$&#123;name&#125;</span>&quot; after <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">          <span class="built_in">Date</span>.now() - startTime</span></span></span><br><span class="line"><span class="subst"><span class="string">        &#125;</span>ms.\nResult: <span class="subst">$&#123;result&#125;</span>.`</span></span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœ action æŠ›å‡ºæˆ–è¿”å› Promise.reject ï¼ŒonError å°†è§¦å‘</span></span><br><span class="line">    <span class="title function_">onError</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(</span><br><span class="line">        <span class="string">`Failed &quot;<span class="subst">$&#123;name&#125;</span>&quot; after <span class="subst">$&#123;<span class="built_in">Date</span>.now() - startTime&#125;</span>ms.\nError: <span class="subst">$&#123;error&#125;</span>.`</span></span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰‹åŠ¨ç§»é™¤è®¢é˜…</span></span><br><span class="line"><span class="title function_">unsubscribe</span>()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> Vue3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ObsidianåŸºæœ¬ä½¿ç”¨</title>
      <link href="/posts/a7d785f0/"/>
      <url>/posts/a7d785f0/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å­—ä½“"><a href="#1-å­—ä½“" class="headerlink" title="1.å­—ä½“"></a>1.å­—ä½“</h1><h2 id="åŠ ç²—"><a href="#åŠ ç²—" class="headerlink" title="åŠ ç²—"></a>åŠ ç²—</h2><p>ä½¿ç”¨**&lt; content &gt;**</p><h2 id="æ–œä½“"><a href="#æ–œä½“" class="headerlink" title="æ–œä½“"></a>æ–œä½“</h2><p>ä½¿ç”¨*&lt; content &gt;*<br>ä½¿ç”¨_&lt; content &gt;_</p><h2 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h2><p><del>123</del></p><hr><h1 id="2-åˆ—è¡¨"><a href="#2-åˆ—è¡¨" class="headerlink" title="2.åˆ—è¡¨"></a>2.åˆ—è¡¨</h1><h2 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h2><ul><li>123</li><li>123</li></ul><h2 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h2><ol><li>123<ol><li>123</li><li>456</li></ol></li><li>456</li><li>789</li></ol><h2 id="ä»»åŠ¡åˆ—è¡¨"><a href="#ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="ä»»åŠ¡åˆ—è¡¨"></a>ä»»åŠ¡åˆ—è¡¨</h2><ul><li><input disabled="" type="checkbox"> todo1</li><li><input checked="" disabled="" type="checkbox"> todo2</li></ul><hr><h1 id="3-æ ¼å¼"><a href="#3-æ ¼å¼" class="headerlink" title="3.æ ¼å¼"></a>3.æ ¼å¼</h1><h2 id="å¼•ç”¨å—"><a href="#å¼•ç”¨å—" class="headerlink" title="å¼•ç”¨å—"></a>å¼•ç”¨å—</h2><blockquote><p>æˆ‘æ˜¯å¼•ç”¨å—1<br>æˆ‘æ˜¯å¼•ç”¨å—2<br>æˆ‘æ˜¯å¼•ç”¨å—3</p></blockquote><h2 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">123456</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h2><table><thead><tr><th>æ ‡é¢˜1</th><th>æ ‡é¢˜2</th></tr></thead><tbody><tr><td>è¡Œ1åˆ—1</td><td>è¡Œ1åˆ—2</td></tr><tr><td>è¡Œ2åˆ—1</td><td>è¡Œ2åˆ—2</td></tr></tbody></table><h1 id="4-å…¶ä»–"><a href="#4-å…¶ä»–" class="headerlink" title="4.å…¶ä»–"></a>4.å…¶ä»–</h1><h2 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h2><p>![[Pasted image 20230911213917.png]]</p><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><p>#å†™ä½œ<br>#å†™ä½œ&#x2F;è®°å™æ–‡<br>#å†™ä½œ&#x2F;è®®è®ºæ–‡</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p>[[å¼•ç”¨]]</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> obsidian </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
